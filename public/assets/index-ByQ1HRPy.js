import{r as c,_ as I,R as g,a as w,c as O,P as m,j as e,q as _}from"./index-DlegwXl8.js";import{C as b,a as A}from"./CRow-8fgCHhrX.js";import{C as he,a as me}from"./CCardBody-jS9d7Eoq.js";import{C as fe}from"./CCardHeader-D-_VjtT7.js";import{a as E,c as S,d as H}from"./index.esm-B5ZaXYA7.js";import{_ as ve,f as Ce,a as xe,T as ge,u as je}from"./CCloseButton-Dio0Q2fj.js";import{C as Ne,a as Ee,b as oe,c as $,d as ye,e as k}from"./CTable-DkZvId7T.js";import{a as z,b as W,c as q,d as U,e as G}from"./DefaultLayout-a913-FBV.js";import{C as J}from"./cil-user-sgRAOfYW.js";import{C as Q}from"./CFormTextarea-BUstLHKi.js";var ce=c.createContext({}),Z=c.forwardRef(function(s,i){var u=s.children,r=s.activeItemKey,o=s.alwaysOpen,d=o===void 0?!1:o,h=s.className,a=s.flush,t=I(s,["children","activeItemKey","alwaysOpen","className","flush"]),n=c.useState(r),f=n[0],v=n[1];return g.createElement("div",w({className:O("accordion",{"accordion-flush":a},h)},t,{ref:i}),g.createElement(ce.Provider,{value:{_activeItemKey:f,alwaysOpen:d,setActiveKey:v}},u))});Z.propTypes={alwaysOpen:m.bool,activeItemKey:m.oneOfType([m.number,m.string]),children:m.node,className:m.string,flush:m.bool};Z.displayName="CAccordion";var ee=c.createContext({}),se=c.forwardRef(function(s,i){var u=s.children,r=s.className,o=s.id,d=s.itemKey,h=I(s,["children","className","id","itemKey"]),a=o??c.useId(),t=c.useRef(d??a),n=c.useContext(ce),f=n._activeItemKey,v=n.alwaysOpen,C=n.setActiveKey,x=c.useState(f===t.current),j=x[0],N=x[1];return c.useEffect(function(){!v&&j&&C(t.current)},[j]),c.useEffect(function(){N(f===t.current)},[f]),g.createElement("div",w({className:O("accordion-item",r)},h,{ref:i}),g.createElement(ee.Provider,{value:{id:a,setVisible:N,visible:j}},u))});se.propTypes={children:m.node,className:m.string,itemKey:m.oneOfType([m.number,m.string])};se.displayName="CAccordionItem";function Y(){return Y=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var u=arguments[i];for(var r in u)({}).hasOwnProperty.call(u,r)&&(s[r]=u[r])}return s},Y.apply(null,arguments)}function be(s,i){return s.classList?!!i&&s.classList.contains(i):(" "+(s.className.baseVal||s.className)+" ").indexOf(" "+i+" ")!==-1}function Ae(s,i){s.classList?s.classList.add(i):be(s,i)||(typeof s.className=="string"?s.className=s.className+" "+i:s.setAttribute("class",(s.className&&s.className.baseVal||"")+" "+i))}function le(s,i){return s.replace(new RegExp("(^|\\s)"+i+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function we(s,i){s.classList?s.classList.remove(i):typeof s.className=="string"?s.className=le(s.className,i):s.setAttribute("class",le(s.className&&s.className.baseVal||"",i))}var Te=function(i,u){return i&&u&&u.split(" ").forEach(function(r){return Ae(i,r)})},X=function(i,u){return i&&u&&u.split(" ").forEach(function(r){return we(i,r)})},re=function(s){ve(i,s);function i(){for(var r,o=arguments.length,d=new Array(o),h=0;h<o;h++)d[h]=arguments[h];return r=s.call.apply(s,[this].concat(d))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(a,t){var n=r.resolveArguments(a,t),f=n[0],v=n[1];r.removeClasses(f,"exit"),r.addClass(f,v?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(a,t)},r.onEntering=function(a,t){var n=r.resolveArguments(a,t),f=n[0],v=n[1],C=v?"appear":"enter";r.addClass(f,C,"active"),r.props.onEntering&&r.props.onEntering(a,t)},r.onEntered=function(a,t){var n=r.resolveArguments(a,t),f=n[0],v=n[1],C=v?"appear":"enter";r.removeClasses(f,C),r.addClass(f,C,"done"),r.props.onEntered&&r.props.onEntered(a,t)},r.onExit=function(a){var t=r.resolveArguments(a),n=t[0];r.removeClasses(n,"appear"),r.removeClasses(n,"enter"),r.addClass(n,"exit","base"),r.props.onExit&&r.props.onExit(a)},r.onExiting=function(a){var t=r.resolveArguments(a),n=t[0];r.addClass(n,"exit","active"),r.props.onExiting&&r.props.onExiting(a)},r.onExited=function(a){var t=r.resolveArguments(a),n=t[0];r.removeClasses(n,"exit"),r.addClass(n,"exit","done"),r.props.onExited&&r.props.onExited(a)},r.resolveArguments=function(a,t){return r.props.nodeRef?[r.props.nodeRef.current,a]:[a,t]},r.getClassNames=function(a){var t=r.props.classNames,n=typeof t=="string",f=n&&t?t+"-":"",v=n?""+f+a:t[a],C=n?v+"-active":t[a+"Active"],x=n?v+"-done":t[a+"Done"];return{baseClassName:v,activeClassName:C,doneClassName:x}},r}var u=i.prototype;return u.addClass=function(o,d,h){var a=this.getClassNames(d)[h+"ClassName"],t=this.getClassNames("enter"),n=t.doneClassName;d==="appear"&&h==="done"&&n&&(a+=" "+n),h==="active"&&o&&Ce(o),a&&(this.appliedClasses[d][h]=a,Te(o,a))},u.removeClasses=function(o,d){var h=this.appliedClasses[d],a=h.base,t=h.active,n=h.done;this.appliedClasses[d]={},a&&X(o,a),t&&X(o,t),n&&X(o,n)},u.render=function(){var o=this.props;o.classNames;var d=xe(o,["classNames"]);return g.createElement(ge,Y({},d,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},i}(g.Component);re.defaultProps={classNames:""};re.propTypes={};var ae=c.forwardRef(function(s,i){var u=s.children,r=s.className,o=s.horizontal,d=s.onHide,h=s.onShow,a=s.visible,t=I(s,["children","className","horizontal","onHide","onShow","visible"]),n=c.useRef(null),f=je(i,n),v=c.useState(),C=v[0],x=v[1],j=c.useState(),N=j[0],T=j[1],P=function(){if(h&&h(),o){n.current&&T(n.current.scrollWidth);return}n.current&&x(n.current.scrollHeight)},B=function(){if(o){T(0);return}x(0)},M=function(){if(o){n.current&&T(n.current.scrollWidth);return}n.current&&x(n.current.scrollHeight)},F=function(){if(d&&d(),o){T(0);return}x(0)},R=function(){if(o){T(0);return}x(0)};return g.createElement(re,{in:a,nodeRef:n,onEntering:P,onEntered:B,onExit:M,onExiting:F,onExited:R,timeout:350},function(K){var L=C===0?null:{height:C},D=N===0?null:{width:N};return g.createElement("div",w({className:O(r,{"collapse-horizontal":o,collapsing:K==="entering"||K==="exiting","collapse show":K==="entered",collapse:K==="exited"}),style:w(w({},L),D)},t,{ref:f}),u)})});ae.propTypes={children:m.node,className:m.string,horizontal:m.bool,onHide:m.func,onShow:m.func,visible:m.bool};ae.displayName="CCollapse";var ne=c.forwardRef(function(s,i){var u=s.children,r=s.className,o=I(s,["children","className"]),d=c.useContext(ee),h=d.id,a=d.visible;return g.createElement(ae,{className:"accordion-collapse",id:h,visible:a},g.createElement("div",w({className:O("accordion-body",r)},o,{ref:i}),u))});ne.propTypes={children:m.node,className:m.string};ne.displayName="CAccordionBody";var ie=c.forwardRef(function(s,i){var u=s.children,r=s.className,o=I(s,["children","className"]),d=c.useContext(ee),h=d.id,a=d.visible,t=d.setVisible;return g.createElement("button",w({type:"button",className:O("accordion-button",{collapsed:!a},r),"aria-controls":h,"aria-expanded":a,onClick:function(){return t(!a)}},o,{ref:i}),u)});ie.propTypes={children:m.node,className:m.string};ie.displayName="CAccordionButton";var te=c.forwardRef(function(s,i){var u=s.children,r=s.className,o=I(s,["children","className"]);return g.createElement("div",w({className:O("accordion-header",r)},o,{ref:i}),g.createElement(ie,null,u))});te.propTypes={children:m.node,className:m.string};te.displayName="CAccordionHeader";const $e=()=>{const[s,i]=c.useState([]),[u,r]=c.useState([]),[o,d]=c.useState(""),[h,a]=c.useState(""),[t,n]=c.useState(""),[f,v]=c.useState(""),[C,x]=c.useState({title:"",description:"",file:null}),[j,N]=c.useState(null),[T,P]=c.useState(!1),[B,M]=c.useState(!1),[F,R]=c.useState(!1);c.useEffect(()=>{(async()=>{try{const p=await _.get("/api/programs");i(p.data.data)}catch(p){console.error("Error fetching programs:",p)}})()},[]),c.useEffect(()=>{(async()=>{try{const p=await _.get("/api/courses");r(p.data.data)}catch(p){console.error("Error fetching courses:",p)}})()},[]);const K=async()=>{try{const l=await _.post("/api/programs",{title:o,description:h});i(p=>[...p,l.data.data]),d(""),a(""),P(!1)}catch(l){console.error("Error adding program:",l)}},L=async()=>{try{const l=await _.post("/api/courses",{title:t,description:f,program_id:j});r([...u,l.data]),M(!1)}catch(l){console.error("Error saving course:",l)}},D=l=>{const{id:p,value:y}=l.target;x(V=>({...V,[p]:y}))},de=l=>{x(p=>({...p,file:l.target.files[0]}))},ue=async()=>{var p;const l=new FormData;l.append("title",C.title),l.append("description",C.description),l.append("course_id",j),C.file&&l.append("file",C.file);try{await _.post("/api/modules",l,{headers:{"Content-Type":"multipart/form-data"}}),x({title:"",description:"",file:null}),R(!1)}catch(y){console.error("Error uploading module:",((p=y.response)==null?void 0:p.data)||y.message)}},pe=l=>{N(l),R(!0)};return e.jsxs(b,{children:[e.jsx(A,{xs:12,children:e.jsxs(he,{className:"mb-4",children:[e.jsxs(fe,{children:[e.jsx("strong",{children:"List of Programs"}),e.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:e.jsx(E,{color:"primary",onClick:()=>P(!0),children:"Add Program"})})]}),e.jsx(me,{children:e.jsx(Z,{alwaysOpen:!0,children:s.map(l=>e.jsxs(se,{children:[e.jsx(te,{onClick:()=>{N(l.id)},children:l.title}),e.jsxs(ne,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",l.description]}),e.jsx(E,{color:"primary",onClick:()=>{N(l.id),M(!0)},children:"Add Course"}),e.jsxs(Ne,{striped:!0,className:"mt-3",children:[e.jsx(Ee,{children:e.jsxs(oe,{children:[e.jsx($,{children:"Title"}),e.jsx($,{children:"Description"}),e.jsx($,{children:"Module"}),e.jsx($,{children:"Actions"})]})}),e.jsx(ye,{children:u.filter(p=>p.program_id===l.id).map(p=>e.jsxs(oe,{children:[e.jsx(k,{children:p.title}),e.jsx(k,{children:p.description}),e.jsx(k,{children:p.modules&&p.modules.length>0?p.modules.map((y,V)=>e.jsx("div",{children:y.file_url?e.jsx("a",{href:y.file_url,target:"_blank",rel:"noopener noreferrer",children:y.file_name||"Download"}):e.jsx("span",{children:"No File"})},V)):e.jsx("span",{children:"â€”"})}),e.jsx(k,{children:e.jsx(E,{color:"primary",onClick:()=>pe(p.id),children:p.modules&&p.modules.length>0?"Edit Module":"Add Module"})})]},p.id))})]})]})]},l.id))})})]})}),e.jsxs(z,{size:"xl",visible:T,onClose:()=>P(!1),children:[e.jsx(W,{children:e.jsx(q,{children:"Add Program"})}),e.jsx(U,{children:e.jsxs(J,{children:[e.jsx(b,{className:"mb-3",children:e.jsxs(A,{md:12,children:[e.jsx(S,{children:"Program Title"}),e.jsx(H,{value:o,onChange:l=>d(l.target.value)})]})}),e.jsx(b,{className:"mb-3",children:e.jsxs(A,{md:12,children:[e.jsx(S,{children:"Program Description"}),e.jsx(Q,{value:h,onChange:l=>a(l.target.value)})]})})]})}),e.jsxs(G,{children:[e.jsx(E,{color:"secondary",onClick:()=>P(!1),children:"Close"}),e.jsx(E,{color:"primary",onClick:K,children:"Save Program"})]})]}),e.jsxs(z,{size:"xl",visible:B,onClose:()=>M(!1),children:[e.jsx(W,{children:e.jsx(q,{children:"Add Course"})}),e.jsx(U,{children:e.jsxs(J,{children:[e.jsx(b,{className:"mb-3",children:e.jsxs(A,{md:12,children:[e.jsx(S,{children:"Course Title"}),e.jsx(H,{value:t,onChange:l=>n(l.target.value)})]})}),e.jsx(b,{className:"mb-3",children:e.jsxs(A,{md:12,children:[e.jsx(S,{children:"Course Description"}),e.jsx(Q,{value:f,onChange:l=>v(l.target.value)})]})})]})}),e.jsxs(G,{children:[e.jsx(E,{color:"secondary",onClick:()=>M(!1),children:"Close"}),e.jsx(E,{color:"primary",onClick:L,children:"Save Course"})]})]}),e.jsxs(z,{size:"xl",visible:F,onClose:()=>R(!1),children:[e.jsx(W,{children:e.jsx(q,{children:"Add Module"})}),e.jsx(U,{children:e.jsxs(J,{children:[e.jsx(b,{className:"mb-3",children:e.jsxs(A,{md:12,children:[e.jsx(S,{children:"Module Title"}),e.jsx(H,{id:"title",value:C.title,onChange:D})]})}),e.jsx(b,{className:"mb-3",children:e.jsxs(A,{md:12,children:[e.jsx(S,{children:"Module Description"}),e.jsx(Q,{id:"description",value:C.description,onChange:D})]})}),e.jsx(b,{className:"mb-3",children:e.jsxs(A,{md:12,children:[e.jsx(S,{children:"Upload File"}),e.jsx(H,{type:"file",onChange:de})]})})]})}),e.jsxs(G,{children:[e.jsx(E,{color:"secondary",onClick:()=>R(!1),children:"Close"}),e.jsx(E,{color:"primary",onClick:ue,children:"Save Module"})]})]})]})};export{$e as default};
