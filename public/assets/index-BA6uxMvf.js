import{r as d,j as e,P as r,o as y}from"./index-CvaDxM26.js";import{c as n,a as b,d as w}from"./index.esm-Cesk6LXc.js";import{a as S,b as T,c as E,d as D}from"./DefaultLayout-BaIJzMdi.js";import{C as q}from"./CModalTitle-w0RTuVP_.js";import{C as M}from"./CForm-CQBBHmlQ.js";import{C as o}from"./CFormInput-BOEsO2CC.js";import{C as f}from"./CFormSelect-CsR9oD1Q.js";import{C as P,a as V}from"./CRow-C7g1GJNq.js";import{C as A,a as H}from"./CCardBody-BTOT08s5.js";import{C as B}from"./CCardHeader-CHdDGNqb.js";import{C as U,a as k,b as _,c as m,d as z,e as c}from"./CTable-CbmdlNMP.js";import{c as I}from"./cil-options-sHCm5Gxk.js";import"./CCloseButton-CanG_RlZ.js";import"./cil-user-Ddrdy7PS.js";const g=({modalVisible:p,setModalVisible:h,user:a,roles:u,departments:j})=>{var x;const[t,C]=d.useState({name:a.name||"",email:a.email||"",role:a.role_id||"",department:((x=a.department)==null?void 0:x.id)||"",employee_type:a.employee_type||"",employment_status:a.employment_status||"",date_of_hire:a.date_of_hire||"",gender:a.gender||"",phone_number:a.phone_number||"",address:a.address||""});return e.jsxs(S,{visible:p,onClose:()=>h(!1),size:"lg",children:[e.jsx(T,{children:e.jsx(q,{children:"View Profile"})}),e.jsx(E,{children:e.jsxs(M,{children:[e.jsx(n,{htmlFor:"name",children:"Full Name"}),e.jsx(o,{id:"name",name:"name",value:t.name,readOnly:!0}),e.jsx(n,{htmlFor:"email",children:"Email"}),e.jsx(o,{id:"email",name:"email",value:t.email,readOnly:!0}),e.jsx(n,{htmlFor:"role",children:"Role"}),e.jsx(f,{id:"role",name:"role",value:t.role,readOnly:!0,children:u.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))}),e.jsx(n,{htmlFor:"department",children:"Department"}),e.jsx(f,{id:"department",name:"department",value:t.department,readOnly:!0,children:j.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))}),e.jsx(n,{htmlFor:"employee_type",children:"Employee Type"}),e.jsx(o,{id:"employee_type",name:"employee_type",value:t.employee_type,readOnly:!0}),e.jsx(n,{htmlFor:"employment_status",children:"Employment Status"}),e.jsx(o,{id:"employment_status",name:"employment_status",value:t.employment_status,readOnly:!0}),e.jsx(n,{htmlFor:"date_of_hire",children:"Date of Hire"}),e.jsx(o,{id:"date_of_hire",name:"date_of_hire",type:"date",value:t.date_of_hire,readOnly:!0}),e.jsx(n,{htmlFor:"gender",children:"Gender"}),e.jsx(o,{id:"gender",name:"gender",value:t.gender,readOnly:!0}),e.jsx(n,{htmlFor:"phone_number",children:"Phone Number"}),e.jsx(o,{id:"phone_number",name:"phone_number",value:t.phone_number,readOnly:!0}),e.jsx(n,{htmlFor:"address",children:"Address"}),e.jsx(o,{id:"address",name:"address",value:t.address,readOnly:!0})]})}),e.jsx(D,{children:e.jsx(b,{color:"secondary",onClick:()=>h(!1),children:"Close"})})]})};g.propTypes={modalVisible:r.bool.isRequired,setModalVisible:r.func.isRequired,user:r.shape({id:r.number.isRequired,name:r.string,email:r.string,role_id:r.number,department:r.shape({id:r.number,name:r.string}),employee_type:r.string,employment_status:r.string,date_of_hire:r.string,gender:r.string,phone_number:r.string,address:r.string}).isRequired,roles:r.array.isRequired,departments:r.array.isRequired};const te=()=>{const[p,h]=d.useState([]),[a,u]=d.useState(null),[j,t]=d.useState(!1),[C,x]=d.useState([]),[l,F]=d.useState([]),v=async()=>{try{const s=await y.get("/users");h(s.data.users)}catch(s){console.error("Error fetching users:",s)}},R=async()=>{try{const s=await y.get("/roles"),i=await y.get("/departments");x(s.data.roles),F(i.data.departments)}catch(s){console.error("Error fetching roles or departments:",s)}};d.useEffect(()=>{v(),R()},[]);const N=s=>{const i=p.find(O=>O.id===s);u(i),t(!0)};return e.jsxs(P,{children:[e.jsx(V,{xs:12,children:e.jsxs(A,{className:"mb-4",children:[e.jsx(B,{className:"d-flex justify-content-between align-items-center",children:e.jsx("strong",{children:"Access Control"})}),e.jsx(H,{children:e.jsxs(U,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[e.jsx(k,{children:e.jsxs(_,{children:[e.jsx(m,{children:"Name"}),e.jsx(m,{children:"Email"}),e.jsx(m,{className:"text-center",children:"Role"}),e.jsx(m,{className:"text-center",children:"Department"}),e.jsx(m,{className:"text-center",children:"Actions"})]})}),e.jsx(z,{children:p.map(s=>{var i;return e.jsxs(_,{children:[e.jsx(c,{children:s.name}),e.jsx(c,{children:s.email}),e.jsx(c,{className:"text-center",children:s.role.name}),e.jsx(c,{className:"text-center",children:(i=s.department)==null?void 0:i.name}),e.jsx(c,{className:"text-center",children:e.jsxs(b,{color:"secondary",size:"sm",onClick:()=>N(s.id),children:[e.jsx(w,{icon:I,className:"me-1"}),"View"]})})]},s.id)})})]})})]})}),a&&e.jsx(g,{modalVisible:j,setModalVisible:t,user:a,roles:C,departments:l})]})};export{te as default};
