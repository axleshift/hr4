import{r as l,x as C,i as f,j as e}from"./index-Dngv1Mo5.js";import{C as T,a as $}from"./CRow-CDCoKOHc.js";import{a as k,b as B,d as D,e as F,f as R}from"./DefaultLayout-B7yoWVhG.js";import{C as P}from"./CFormSelect-Bnl9VTd0.js";import{a as g}from"./index.esm-CpWMGvIw.js";import{C as A,a as I}from"./CCardBody-Da3IfA1V.js";import{C as V}from"./CCardHeader-DbiG8D6Z.js";import{C as O,a as U,b,c as r,d as q,e as n}from"./CTable-DIpsDphL.js";import"./CCloseButton-DIKll9n0.js";import"./cil-user-8iO1EhCe.js";const _=()=>{const[y,i]=l.useState([]),[E,N]=l.useState([]),[w,o]=l.useState(!1),[c,d]=l.useState(null),[h,x]=l.useState("");l.useEffect(()=>{m(),S()},[]);const m=async()=>{try{const s=await C.get("https://backend-hr1.axleshift.com/api/employees");i(s.data.data||s.data)}catch(s){console.error("Error fetching external employees:",s);try{const t=await f.get("/api/employee");i(t.data.data)}catch(t){console.error("Error fetching local employees:",t)}}},S=async()=>{try{const s=await C.get("https://backend-hr1.axleshift.com/api/newhires");N(s.data.data||s.data)}catch(s){console.error("Error fetching new hires:",s)}},u=s=>{const t=s.middleName?` ${s.middleName}`:"";return`${s.firstName}${t} ${s.lastName}`},v=async(s,t)=>{try{await f.put(`/api/employee-status/${s}`,{status:t}),m(),o(!1)}catch(a){console.error(`Error updating status for ${s}:`,a)}},H=s=>{switch(s){case"ongoing":return"warning";case"passed":return"success";case"failed":return"danger";default:return"secondary"}},j=(s,t)=>e.jsxs(A,{className:"mb-4",children:[e.jsx(V,{className:"d-flex justify-content-between align-items-center",children:e.jsx("strong",{children:t})}),e.jsx(I,{children:e.jsxs(O,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[e.jsx(U,{children:e.jsxs(b,{children:[e.jsx(r,{children:"Employee ID"}),e.jsx(r,{children:"Name"}),e.jsx(r,{children:"Position"}),e.jsx(r,{children:"Department"}),e.jsx(r,{children:"Date Hired"}),e.jsx(r,{children:"Email"}),e.jsx(r,{className:"text-center",children:"Status"}),e.jsx(r,{className:"text-center",children:"Actions"})]})}),e.jsx(q,{children:s.map(a=>e.jsxs(b,{children:[e.jsx(n,{children:a.employeeId}),e.jsx(n,{children:u(a)}),e.jsx(n,{children:a.position}),e.jsx(n,{children:a.department}),e.jsx(n,{children:a.dateHired}),e.jsx(n,{children:a.email}),e.jsx(n,{className:"text-center",children:e.jsx(R,{color:H(a.status),children:a.status})}),e.jsx(n,{className:"text-center",children:e.jsx("button",{className:"btn btn-primary",onClick:()=>M(a),children:"Action"})})]},a.id))})]})})]}),M=s=>{d(s),x(s.status||"pending"),o(!0)},p=()=>{o(!1),d(null)};return e.jsxs(T,{children:[e.jsxs($,{xs:12,children:[j(y,"Employee Management"),j(E,"New Hires")]}),c&&e.jsxs(k,{visible:w,onClose:p,children:[e.jsxs(B,{children:[e.jsx("strong",{children:u(c)})," "]}),e.jsx(D,{children:e.jsxs("div",{children:[e.jsx("label",{children:"Status"}),e.jsxs(P,{value:h,onChange:s=>x(s.target.value),children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"ongoing",children:"Ongoing"}),e.jsx("option",{value:"passed",children:"Passed"}),e.jsx("option",{value:"failed",children:"Failed"})]})]})}),e.jsxs(F,{children:[e.jsx(g,{color:"secondary",onClick:p,children:"Close"}),e.jsx(g,{color:"primary",onClick:()=>v(c.employeeId,h),children:"Update Status"})]})]})]})};export{_ as default};
