import{r as l,j as e}from"./index-DnjxPi8x.js";import{a as _}from"./axios-CCb-kr4I.js";import{C as M,a as q}from"./CRow-BhzYYVhC.js";import{C as D,a as A}from"./CCardBody-C4z__d36.js";import{C as E}from"./CCardHeader-DDqsUPlY.js";import{a as m}from"./index.esm-Cv2JPB9I.js";import{C as I,a as $,b as k,c as B,d as L}from"./CModalTitle-D9411mcJ.js";import{C as N}from"./CForm-DoBlG8Ir.js";import{C as d}from"./CFormLabel-CndHjYJW.js";import{C as c}from"./CFormInput-BHD_T-gC.js";import{C as H,a as P,b as y,c as a,d as R}from"./CTable-BZ2_ZagD.js";import{a as O}from"./DefaultLayout-B0x7j7Xb.js";import"./CFormControlWrapper-D2NVEMzg.js";import"./CFormControlValidation-B-MQbxP3.js";import"./cil-user-Ddrdy7PS.js";const re=()=>{const[T,h]=l.useState(!1),[x,v]=l.useState([]),[n,u]=l.useState({training_class:"",agenda:"",location:"",schedule:"",start_time:"",end_time:""});l.useEffect(()=>{g()},[]);const g=async()=>{try{const s=await _.get("http://localhost:8000/api/training");v(s.data.data)}catch(s){console.error("Error fetching trainings:",s)}},o=s=>{const{name:t,value:r}=s.target;u({...n,[t]:r})},b=async s=>{s.preventDefault();try{await _.post("http://localhost:8000/api/training",n),h(!1),g(),u({training_class:"",agenda:"",location:"",schedule:"",start_time:"",end_time:""})}catch(t){console.error("Error adding training:",t)}},S=x.filter((s,t,r)=>t===r.findIndex(i=>i.training_class===s.training_class)),w=x.filter((s,t,r)=>t===r.findIndex(i=>i.agenda===s.agenda)),j=(s,t,r)=>{const i=new Date,C=new Date(`${s}T${t}`),f=new Date(`${s}T${r}`);return i<C?"Pending":i<=f?"Ongoing":"Complete"},p=s=>{const[t,r]=s.split(":"),i=parseInt(t,10),C=i>=12?"PM":"AM";return`${i%12||12}:${r} ${C}`},[X,F]=l.useState(new Date);return l.useEffect(()=>{const s=setInterval(()=>{F(new Date)},1e3);return()=>clearInterval(s)},[]),e.jsx(M,{children:e.jsx(q,{xs:12,children:e.jsxs(D,{className:"mb-4",children:[e.jsxs(E,{children:[e.jsx("strong",{children:"Training Schedule"}),e.jsxs("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:[e.jsx(m,{color:"primary",onClick:()=>h(!0),children:"Add Stuff"}),e.jsxs(I,{alignment:"center",backdrop:"static",size:"lg",visible:T,onClose:()=>h(!1),children:[e.jsx($,{children:e.jsx(k,{children:"Add Stuff"})}),e.jsx(B,{children:e.jsxs(N,{onSubmit:b,children:[e.jsx(d,{htmlFor:"training_class",children:"Training Class"}),e.jsx(c,{type:"text",id:"training_class",name:"training_class",value:n.training_class,onChange:o,required:!0}),e.jsx("div",{children:S.map(s=>e.jsx(m,{color:"secondary",variant:"outline",className:"me-2",onClick:()=>u({...n,training_class:s.training_class}),children:s.training_class},s.id))}),e.jsx(d,{htmlFor:"agenda",children:"Type of Agenda"}),e.jsx(c,{type:"text",id:"agenda",name:"agenda",value:n.agenda,onChange:o,required:!0}),e.jsx("div",{children:w.map(s=>e.jsx(m,{color:"secondary",variant:"outline",className:"me-2",onClick:()=>u({...n,agenda:s.agenda}),children:s.agenda},s.id))}),e.jsx(d,{htmlFor:"location",children:"Location / Mode"}),e.jsx(c,{type:"text",id:"location",name:"location",value:n.location,onChange:o,required:!0}),e.jsx(d,{htmlFor:"schedule",children:"Schedule"}),e.jsx(c,{type:"date",id:"schedule",name:"schedule",value:n.schedule,onChange:o,required:!0}),e.jsx(d,{htmlFor:"start_time",children:"Start Time"}),e.jsx(c,{type:"time",id:"start_time",name:"start_time",value:n.start_time,onChange:o,required:!0}),e.jsx(d,{htmlFor:"end_time",children:"End Time"}),e.jsx(c,{type:"time",id:"end_time",name:"end_time",value:n.end_time,onChange:o,required:!0}),e.jsxs(L,{children:[e.jsx(m,{color:"secondary",onClick:()=>h(!1),children:"Cancel"}),e.jsx(m,{color:"primary",type:"submit",children:"Add Module"})]})]})})]})]})]}),e.jsx(A,{children:e.jsxs(H,{children:[e.jsx(P,{children:e.jsxs(y,{children:[e.jsx(a,{children:"Training Class"}),e.jsx(a,{children:"Agenda"}),e.jsx(a,{children:"Location"}),e.jsx(a,{children:"Schedule"}),e.jsx(a,{}),e.jsx(a,{}),e.jsx(a,{children:"Status"})]})}),e.jsx(R,{children:x.map(s=>e.jsxs(y,{children:[e.jsx(a,{children:s.training_class}),e.jsx(a,{children:s.agenda}),e.jsx(a,{children:s.location}),e.jsx(a,{children:s.schedule}),e.jsx(a,{children:p(s.start_time)}),e.jsx(a,{children:p(s.end_time)}),e.jsx(a,{children:e.jsx(O,{color:j(s.schedule,s.start_time,s.end_time)==="Pending"?"warning":j(s.schedule,s.start_time,s.end_time)==="Ongoing"?"info":"success",className:"ms-2",children:j(s.schedule,s.start_time,s.end_time)})})]},s.id))})]})})]})})})};export{re as default};
