import{r as l,_ as w,R as x,a as N,c as T,P as m,j as r,q as R}from"./index-BBd5kc4q.js";import{C as S,a as P}from"./CRow-B2nS_ogy.js";import{C as te,a as oe}from"./CCardBody-C49Eafxi.js";import{C as le}from"./CCardHeader-yN1vG4TA.js";import{a as b,c as K,d as G}from"./index.esm-BDzEMjCg.js";import{_ as ce,f as de,a as ue,T as pe,u as me}from"./CCloseButton-D-rF4La7.js";import{C as fe,a as he,b as J,c as $,d as ve,e as D}from"./CTable-BEwkEoXp.js";import{a as Q,b as U,c as X,d as Y,e as Z}from"./DefaultLayout-asXwewzv.js";import{C as ee}from"./cil-user-H4LDV4mT.js";import{C as se}from"./CFormTextarea-DgCUJBir.js";var ae=l.createContext({}),_=l.forwardRef(function(s,i){var d=s.children,e=s.activeItemKey,o=s.alwaysOpen,c=o===void 0?!1:o,u=s.className,a=s.flush,t=w(s,["children","activeItemKey","alwaysOpen","className","flush"]),n=l.useState(e),f=n[0],h=n[1];return x.createElement("div",N({className:T("accordion",{"accordion-flush":a},u)},t,{ref:i}),x.createElement(ae.Provider,{value:{_activeItemKey:f,alwaysOpen:c,setActiveKey:h}},d))});_.propTypes={alwaysOpen:m.bool,activeItemKey:m.oneOfType([m.number,m.string]),children:m.node,className:m.string,flush:m.bool};_.displayName="CAccordion";var M=l.createContext({}),V=l.forwardRef(function(s,i){var d=s.children,e=s.className,o=s.id,c=s.itemKey,u=w(s,["children","className","id","itemKey"]),a=o??l.useId(),t=l.useRef(c??a),n=l.useContext(ae),f=n._activeItemKey,h=n.alwaysOpen,C=n.setActiveKey,g=l.useState(f===t.current),j=g[0],y=g[1];return l.useEffect(function(){!h&&j&&C(t.current)},[j]),l.useEffect(function(){y(f===t.current)},[f]),x.createElement("div",N({className:T("accordion-item",e)},u,{ref:i}),x.createElement(M.Provider,{value:{id:a,setVisible:y,visible:j}},d))});V.propTypes={children:m.node,className:m.string,itemKey:m.oneOfType([m.number,m.string])};V.displayName="CAccordionItem";function L(){return L=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var d=arguments[i];for(var e in d)({}).hasOwnProperty.call(d,e)&&(s[e]=d[e])}return s},L.apply(null,arguments)}function Ce(s,i){return s.classList?!!i&&s.classList.contains(i):(" "+(s.className.baseVal||s.className)+" ").indexOf(" "+i+" ")!==-1}function ge(s,i){s.classList?s.classList.add(i):Ce(s,i)||(typeof s.className=="string"?s.className=s.className+" "+i:s.setAttribute("class",(s.className&&s.className.baseVal||"")+" "+i))}function re(s,i){return s.replace(new RegExp("(^|\\s)"+i+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function xe(s,i){s.classList?s.classList.remove(i):typeof s.className=="string"?s.className=re(s.className,i):s.setAttribute("class",re(s.className&&s.className.baseVal||"",i))}var je=function(i,d){return i&&d&&d.split(" ").forEach(function(e){return ge(i,e)})},B=function(i,d){return i&&d&&d.split(" ").forEach(function(e){return xe(i,e)})},k=function(s){ce(i,s);function i(){for(var e,o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return e=s.call.apply(s,[this].concat(c))||this,e.appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(a,t){var n=e.resolveArguments(a,t),f=n[0],h=n[1];e.removeClasses(f,"exit"),e.addClass(f,h?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(a,t)},e.onEntering=function(a,t){var n=e.resolveArguments(a,t),f=n[0],h=n[1],C=h?"appear":"enter";e.addClass(f,C,"active"),e.props.onEntering&&e.props.onEntering(a,t)},e.onEntered=function(a,t){var n=e.resolveArguments(a,t),f=n[0],h=n[1],C=h?"appear":"enter";e.removeClasses(f,C),e.addClass(f,C,"done"),e.props.onEntered&&e.props.onEntered(a,t)},e.onExit=function(a){var t=e.resolveArguments(a),n=t[0];e.removeClasses(n,"appear"),e.removeClasses(n,"enter"),e.addClass(n,"exit","base"),e.props.onExit&&e.props.onExit(a)},e.onExiting=function(a){var t=e.resolveArguments(a),n=t[0];e.addClass(n,"exit","active"),e.props.onExiting&&e.props.onExiting(a)},e.onExited=function(a){var t=e.resolveArguments(a),n=t[0];e.removeClasses(n,"exit"),e.addClass(n,"exit","done"),e.props.onExited&&e.props.onExited(a)},e.resolveArguments=function(a,t){return e.props.nodeRef?[e.props.nodeRef.current,a]:[a,t]},e.getClassNames=function(a){var t=e.props.classNames,n=typeof t=="string",f=n&&t?t+"-":"",h=n?""+f+a:t[a],C=n?h+"-active":t[a+"Active"],g=n?h+"-done":t[a+"Done"];return{baseClassName:h,activeClassName:C,doneClassName:g}},e}var d=i.prototype;return d.addClass=function(o,c,u){var a=this.getClassNames(c)[u+"ClassName"],t=this.getClassNames("enter"),n=t.doneClassName;c==="appear"&&u==="done"&&n&&(a+=" "+n),u==="active"&&o&&de(o),a&&(this.appliedClasses[c][u]=a,je(o,a))},d.removeClasses=function(o,c){var u=this.appliedClasses[c],a=u.base,t=u.active,n=u.done;this.appliedClasses[c]={},a&&B(o,a),t&&B(o,t),n&&B(o,n)},d.render=function(){var o=this.props;o.classNames;var c=ue(o,["classNames"]);return x.createElement(pe,L({},c,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},i}(x.Component);k.defaultProps={classNames:""};k.propTypes={};var z=l.forwardRef(function(s,i){var d=s.children,e=s.className,o=s.horizontal,c=s.onHide,u=s.onShow,a=s.visible,t=w(s,["children","className","horizontal","onHide","onShow","visible"]),n=l.useRef(null),f=me(i,n),h=l.useState(),C=h[0],g=h[1],j=l.useState(),y=j[0],E=j[1],I=function(){if(u&&u(),o){n.current&&E(n.current.scrollWidth);return}n.current&&g(n.current.scrollHeight)},H=function(){if(o){E(0);return}g(0)},O=function(){if(o){n.current&&E(n.current.scrollWidth);return}n.current&&g(n.current.scrollHeight)},p=function(){if(c&&c(),o){E(0);return}g(0)},v=function(){if(o){E(0);return}g(0)};return x.createElement(k,{in:a,nodeRef:n,onEntering:I,onEntered:H,onExit:O,onExiting:p,onExited:v,timeout:350},function(A){var ne=C===0?null:{height:C},ie=y===0?null:{width:y};return x.createElement("div",N({className:T(e,{"collapse-horizontal":o,collapsing:A==="entering"||A==="exiting","collapse show":A==="entered",collapse:A==="exited"}),style:N(N({},ne),ie)},t,{ref:f}),d)})});z.propTypes={children:m.node,className:m.string,horizontal:m.bool,onHide:m.func,onShow:m.func,visible:m.bool};z.displayName="CCollapse";var F=l.forwardRef(function(s,i){var d=s.children,e=s.className,o=w(s,["children","className"]),c=l.useContext(M),u=c.id,a=c.visible;return x.createElement(z,{className:"accordion-collapse",id:u,visible:a},x.createElement("div",N({className:T("accordion-body",e)},o,{ref:i}),d))});F.propTypes={children:m.node,className:m.string};F.displayName="CAccordionBody";var W=l.forwardRef(function(s,i){var d=s.children,e=s.className,o=w(s,["children","className"]),c=l.useContext(M),u=c.id,a=c.visible,t=c.setVisible;return x.createElement("button",N({type:"button",className:T("accordion-button",{collapsed:!a},e),"aria-controls":u,"aria-expanded":a,onClick:function(){return t(!a)}},o,{ref:i}),d)});W.propTypes={children:m.node,className:m.string};W.displayName="CAccordionButton";var q=l.forwardRef(function(s,i){var d=s.children,e=s.className,o=w(s,["children","className"]);return x.createElement("div",N({className:T("accordion-header",e)},o,{ref:i}),x.createElement(W,null,d))});q.propTypes={children:m.node,className:m.string};q.displayName="CAccordionHeader";const Ke=()=>{const[s,i]=l.useState(!1),[d,e]=l.useState(!1),[o,c]=l.useState([]),[u,a]=l.useState([]),[t,n]=l.useState(null),[f,h]=l.useState(""),[C,g]=l.useState(""),[j,y]=l.useState(""),[E,I]=l.useState("");l.useEffect(()=>{(async()=>{try{const v=await R.get("/api/programs");c(v.data.data)}catch(v){console.error("Error fetching programs:",v)}})()},[]),l.useEffect(()=>{(async()=>{try{const v=await R.get("/api/courses");console.log("Courses fetched:",v.data),a(v.data.data)}catch(v){console.error("Error fetching courses:",v)}})()},[]);const H=async()=>{try{const v=(await R.get("/api/programs",{title:f,description:C})).data.data;c(A=>[...A,v]),h(""),g(""),i(!1)}catch(p){console.error("Error adding program:",p)}},O=async()=>{try{const p=await R.post("/api/courses",{title:j,description:E,program_id:t});console.log("Course saved:",p.data),a([...u,p.data]),e(!1)}catch(p){console.error("Error saving course:",p)}};return r.jsxs(S,{children:[r.jsx(P,{xs:12,children:r.jsxs(te,{className:"mb-4",children:[r.jsxs(le,{children:[r.jsx("strong",{children:"List of Programs"}),r.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:r.jsx(b,{color:"primary",onClick:()=>i(!0),children:"Add Program"})})]}),r.jsx(oe,{children:r.jsx(_,{alwaysOpen:!0,children:o.map(p=>r.jsxs(V,{children:[r.jsx(q,{onClick:()=>n(p.id),children:p.title}),r.jsxs(F,{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Description:"})," ",p.description]}),r.jsx(b,{color:"primary",onClick:()=>{n(p.id),e(!0)},children:"Add Course"}),r.jsxs(fe,{striped:!0,className:"mt-3",children:[r.jsx(he,{children:r.jsxs(J,{children:[r.jsx($,{children:"Title"}),r.jsx($,{children:"Description"}),r.jsx($,{children:"Modules"})]})}),r.jsx(ve,{children:u.filter(v=>v.program_id===p.id).map(v=>r.jsxs(J,{children:[r.jsx(D,{children:v.title}),r.jsx(D,{children:v.description}),r.jsx(D,{children:r.jsx(b,{size:"sm",color:"info",onClick:()=>{console.log("Manage modules for course:",v.id)},children:"Manage Modules"})})]},v.id))})]})]})]},p.id))})})]})}),r.jsxs(Q,{size:"xl",visible:s,onClose:()=>i(!1),children:[r.jsx(U,{children:r.jsx(X,{children:"Add Program"})}),r.jsx(Y,{children:r.jsxs(ee,{children:[r.jsx(S,{className:"mb-3",children:r.jsxs(P,{md:12,children:[r.jsx(K,{children:"Program Title"}),r.jsx(G,{value:f,onChange:p=>h(p.target.value)})]})}),r.jsx(S,{className:"mb-3",children:r.jsxs(P,{md:12,children:[r.jsx(K,{children:"Program Description"}),r.jsx(se,{value:C,onChange:p=>g(p.target.value)})]})})]})}),r.jsxs(Z,{children:[r.jsx(b,{color:"secondary",onClick:()=>i(!1),children:"Close"}),r.jsx(b,{color:"primary",onClick:H,children:"Save Program"})]})]}),r.jsxs(Q,{size:"xl",visible:d,onClose:()=>e(!1),children:[r.jsx(U,{children:r.jsx(X,{children:"Add Course"})}),r.jsx(Y,{children:r.jsxs(ee,{children:[r.jsx(S,{className:"mb-3",children:r.jsxs(P,{md:12,children:[r.jsx(K,{children:"Course Title"}),r.jsx(G,{value:j,onChange:p=>y(p.target.value)})]})}),r.jsx(S,{className:"mb-3",children:r.jsxs(P,{md:12,children:[r.jsx(K,{children:"Course Description"}),r.jsx(se,{value:E,onChange:p=>I(p.target.value)})]})})]})}),r.jsxs(Z,{children:[r.jsx(b,{color:"secondary",onClick:()=>e(!1),children:"Close"}),r.jsx(b,{color:"primary",onClick:O,children:"Save Course"})]})]})]})};export{Ke as default};
