import{r as l,_ as P,R as C,a as b,c as R,P as m,j as r,q as K}from"./index-BdDn9Wx2.js";import{C as _,a as I}from"./CRow-CmXrvWpw.js";import{C as ue,a as pe}from"./CCardBody-caye1oJA.js";import{C as me}from"./CCardHeader-CW2_hSqX.js";import{a as w,c as M,d as Y}from"./index.esm-UTWN6Dtv.js";import{_ as fe,f as he,a as ve,T as Ce,u as xe}from"./CCloseButton-BIQ48Dvg.js";import{C as ge,a as je,b as Z,c as O,d as Ee,e as H}from"./CTable-BA4DzUQ2.js";import{a as ee,b as se,c as re,d as ae,e as ne}from"./DefaultLayout--w2UN3wO.js";import{C as te}from"./cil-user-FUetajRg.js";import{C as ie}from"./CFormTextarea-DkuKfDC7.js";var le=l.createContext({}),z=l.forwardRef(function(e,t){var d=e.children,s=e.activeItemKey,o=e.alwaysOpen,c=o===void 0?!1:o,u=e.className,a=e.flush,i=P(e,["children","activeItemKey","alwaysOpen","className","flush"]),n=l.useState(s),h=n[0],v=n[1];return C.createElement("div",b({className:R("accordion",{"accordion-flush":a},u)},i,{ref:t}),C.createElement(le.Provider,{value:{_activeItemKey:h,alwaysOpen:c,setActiveKey:v}},d))});z.propTypes={alwaysOpen:m.bool,activeItemKey:m.oneOfType([m.number,m.string]),children:m.node,className:m.string,flush:m.bool};z.displayName="CAccordion";var F=l.createContext({}),W=l.forwardRef(function(e,t){var d=e.children,s=e.className,o=e.id,c=e.itemKey,u=P(e,["children","className","id","itemKey"]),a=o??l.useId(),i=l.useRef(c??a),n=l.useContext(le),h=n._activeItemKey,v=n.alwaysOpen,x=n.setActiveKey,g=l.useState(h===i.current),j=g[0],N=g[1];return l.useEffect(function(){!v&&j&&x(i.current)},[j]),l.useEffect(function(){N(h===i.current)},[h]),C.createElement("div",b({className:R("accordion-item",s)},u,{ref:t}),C.createElement(F.Provider,{value:{id:a,setVisible:N,visible:j}},d))});W.propTypes={children:m.node,className:m.string,itemKey:m.oneOfType([m.number,m.string])};W.displayName="CAccordionItem";function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var d=arguments[t];for(var s in d)({}).hasOwnProperty.call(d,s)&&(e[s]=d[s])}return e},k.apply(null,arguments)}function Ne(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function be(e,t){e.classList?e.classList.add(t):Ne(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function oe(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function ye(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=oe(e.className,t):e.setAttribute("class",oe(e.className&&e.className.baseVal||"",t))}var Ae=function(t,d){return t&&d&&d.split(" ").forEach(function(s){return be(t,s)})},V=function(t,d){return t&&d&&d.split(" ").forEach(function(s){return ye(t,s)})},q=function(e){fe(t,e);function t(){for(var s,o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return s=e.call.apply(e,[this].concat(c))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(a,i){var n=s.resolveArguments(a,i),h=n[0],v=n[1];s.removeClasses(h,"exit"),s.addClass(h,v?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(a,i)},s.onEntering=function(a,i){var n=s.resolveArguments(a,i),h=n[0],v=n[1],x=v?"appear":"enter";s.addClass(h,x,"active"),s.props.onEntering&&s.props.onEntering(a,i)},s.onEntered=function(a,i){var n=s.resolveArguments(a,i),h=n[0],v=n[1],x=v?"appear":"enter";s.removeClasses(h,x),s.addClass(h,x,"done"),s.props.onEntered&&s.props.onEntered(a,i)},s.onExit=function(a){var i=s.resolveArguments(a),n=i[0];s.removeClasses(n,"appear"),s.removeClasses(n,"enter"),s.addClass(n,"exit","base"),s.props.onExit&&s.props.onExit(a)},s.onExiting=function(a){var i=s.resolveArguments(a),n=i[0];s.addClass(n,"exit","active"),s.props.onExiting&&s.props.onExiting(a)},s.onExited=function(a){var i=s.resolveArguments(a),n=i[0];s.removeClasses(n,"exit"),s.addClass(n,"exit","done"),s.props.onExited&&s.props.onExited(a)},s.resolveArguments=function(a,i){return s.props.nodeRef?[s.props.nodeRef.current,a]:[a,i]},s.getClassNames=function(a){var i=s.props.classNames,n=typeof i=="string",h=n&&i?i+"-":"",v=n?""+h+a:i[a],x=n?v+"-active":i[a+"Active"],g=n?v+"-done":i[a+"Done"];return{baseClassName:v,activeClassName:x,doneClassName:g}},s}var d=t.prototype;return d.addClass=function(o,c,u){var a=this.getClassNames(c)[u+"ClassName"],i=this.getClassNames("enter"),n=i.doneClassName;c==="appear"&&u==="done"&&n&&(a+=" "+n),u==="active"&&o&&he(o),a&&(this.appliedClasses[c][u]=a,Ae(o,a))},d.removeClasses=function(o,c){var u=this.appliedClasses[c],a=u.base,i=u.active,n=u.done;this.appliedClasses[c]={},a&&V(o,a),i&&V(o,i),n&&V(o,n)},d.render=function(){var o=this.props;o.classNames;var c=ve(o,["classNames"]);return C.createElement(Ce,k({},c,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(C.Component);q.defaultProps={classNames:""};q.propTypes={};var G=l.forwardRef(function(e,t){var d=e.children,s=e.className,o=e.horizontal,c=e.onHide,u=e.onShow,a=e.visible,i=P(e,["children","className","horizontal","onHide","onShow","visible"]),n=l.useRef(null),h=xe(t,n),v=l.useState(),x=v[0],g=v[1],j=l.useState(),N=j[0],y=j[1],S=function(){if(u&&u(),o){n.current&&y(n.current.scrollWidth);return}n.current&&g(n.current.scrollHeight)},$=function(){if(o){y(0);return}g(0)},T=function(){if(o){n.current&&y(n.current.scrollWidth);return}n.current&&g(n.current.scrollHeight)},X=function(){if(c&&c(),o){y(0);return}g(0)},D=function(){if(o){y(0);return}g(0)};return C.createElement(q,{in:a,nodeRef:n,onEntering:S,onEntered:$,onExit:T,onExiting:X,onExited:D,timeout:350},function(A){var B=x===0?null:{height:x},L=N===0?null:{width:N};return C.createElement("div",b({className:R(s,{"collapse-horizontal":o,collapsing:A==="entering"||A==="exiting","collapse show":A==="entered",collapse:A==="exited"}),style:b(b({},B),L)},i,{ref:h}),d)})});G.propTypes={children:m.node,className:m.string,horizontal:m.bool,onHide:m.func,onShow:m.func,visible:m.bool};G.displayName="CCollapse";var J=l.forwardRef(function(e,t){var d=e.children,s=e.className,o=P(e,["children","className"]),c=l.useContext(F),u=c.id,a=c.visible;return C.createElement(G,{className:"accordion-collapse",id:u,visible:a},C.createElement("div",b({className:R("accordion-body",s)},o,{ref:t}),d))});J.propTypes={children:m.node,className:m.string};J.displayName="CAccordionBody";var Q=l.forwardRef(function(e,t){var d=e.children,s=e.className,o=P(e,["children","className"]),c=l.useContext(F),u=c.id,a=c.visible,i=c.setVisible;return C.createElement("button",b({type:"button",className:R("accordion-button",{collapsed:!a},s),"aria-controls":u,"aria-expanded":a,onClick:function(){return i(!a)}},o,{ref:t}),d)});Q.propTypes={children:m.node,className:m.string};Q.displayName="CAccordionButton";var U=l.forwardRef(function(e,t){var d=e.children,s=e.className,o=P(e,["children","className"]);return C.createElement("div",b({className:R("accordion-header",s)},o,{ref:t}),C.createElement(Q,null,d))});U.propTypes={children:m.node,className:m.string};U.displayName="CAccordionHeader";const He=()=>{const[e,t]=l.useState([]),[d,s]=l.useState([]),[o,c]=l.useState(""),[u,a]=l.useState(""),[i,n]=l.useState(""),[h,v]=l.useState(""),[x,g]=l.useState({title:"",description:"",file:null}),[j,N]=l.useState(null),[y,S]=l.useState(!1),[$,T]=l.useState(!1),[X,D]=l.useState(!1),[A,B]=l.useState([]);l.useEffect(()=>{(async()=>{try{const f=await K.get("/api/programs");t(f.data.data)}catch(f){console.error("Error fetching programs:",f)}})()},[]),l.useEffect(()=>{(async()=>{try{const f=await K.get("/api/courses");s(f.data.data)}catch(f){console.error("Error fetching courses:",f)}})()},[]),l.useEffect(()=>{j&&(async()=>{try{const f=await K.get("/api/modules");B(f.data.data)}catch(f){console.error("Error fetching modules:",f)}})()},[j]);const L=async()=>{try{const p=await K.post("/api/programs",{title:o,description:u});t(f=>[...f,p.data.data]),c(""),a(""),S(!1)}catch(p){console.error("Error adding program:",p)}},ce=async()=>{try{const p=await K.post("/api/courses",{title:i,description:h,program_id:j});s([...d,p.data]),T(!1)}catch(p){console.error("Error saving course:",p)}},de=p=>{N(p),D(!0)};return r.jsxs(_,{children:[r.jsx(I,{xs:12,children:r.jsxs(ue,{className:"mb-4",children:[r.jsxs(me,{children:[r.jsx("strong",{children:"List of Programs"}),r.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:r.jsx(w,{color:"primary",onClick:()=>S(!0),children:"Add Program"})})]}),r.jsx(pe,{children:r.jsx(z,{alwaysOpen:!0,children:e.map(p=>r.jsxs(W,{children:[r.jsx(U,{onClick:()=>{N(p.id)},children:p.title}),r.jsxs(J,{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Description:"})," ",p.description]}),r.jsx(w,{color:"primary",onClick:()=>{N(p.id),T(!0)},children:"Add Course"}),r.jsxs(ge,{striped:!0,className:"mt-3",children:[r.jsx(je,{children:r.jsxs(Z,{children:[r.jsx(O,{children:"Course Title"}),r.jsx(O,{children:"Description"}),r.jsx(O,{children:"Modules"}),r.jsx(O,{children:"Actions"})]})}),r.jsx(Ee,{children:d.filter(f=>f.program_id===p.id).map(f=>r.jsxs(Z,{children:[r.jsx(H,{children:f.title}),r.jsx(H,{children:f.description}),r.jsx(H,{children:r.jsxs("ul",{className:"mb-0",children:[A.filter(E=>E.course_id===f.id).map(E=>r.jsxs("li",{children:[r.jsx("strong",{children:E.title})," ","- ",E.description," ",E.file_url&&r.jsxs(r.Fragment,{children:["[",r.jsx("a",{href:E.file_url,target:"_blank",rel:"noopener noreferrer",children:E.file_name||"Download"}),"]"]})]},E.id)),A.filter(E=>E.course_id===f.id).length===0&&r.jsx("li",{children:"No modules available"})]})}),r.jsx(H,{children:r.jsx(w,{color:"success",size:"sm",onClick:()=>de(f.id),children:"Add Module"})})]},f.id))})]})]})]},p.id))})})]})}),r.jsxs(ee,{size:"xl",visible:y,onClose:()=>S(!1),children:[r.jsx(se,{children:r.jsx(re,{children:"Add Program"})}),r.jsx(ae,{children:r.jsxs(te,{children:[r.jsx(_,{className:"mb-3",children:r.jsxs(I,{md:12,children:[r.jsx(M,{children:"Program Title"}),r.jsx(Y,{value:o,onChange:p=>c(p.target.value)})]})}),r.jsx(_,{className:"mb-3",children:r.jsxs(I,{md:12,children:[r.jsx(M,{children:"Program Description"}),r.jsx(ie,{value:u,onChange:p=>a(p.target.value)})]})})]})}),r.jsxs(ne,{children:[r.jsx(w,{color:"secondary",onClick:()=>S(!1),children:"Close"}),r.jsx(w,{color:"primary",onClick:L,children:"Save Program"})]})]}),r.jsxs(ee,{size:"xl",visible:$,onClose:()=>T(!1),children:[r.jsx(se,{children:r.jsx(re,{children:"Add Course"})}),r.jsx(ae,{children:r.jsxs(te,{children:[r.jsx(_,{className:"mb-3",children:r.jsxs(I,{md:12,children:[r.jsx(M,{children:"Course Title"}),r.jsx(Y,{value:i,onChange:p=>n(p.target.value)})]})}),r.jsx(_,{className:"mb-3",children:r.jsxs(I,{md:12,children:[r.jsx(M,{children:"Course Description"}),r.jsx(ie,{value:h,onChange:p=>v(p.target.value)})]})})]})}),r.jsxs(ne,{children:[r.jsx(w,{color:"secondary",onClick:()=>T(!1),children:"Close"}),r.jsx(w,{color:"primary",onClick:ce,disabled:!i||!h,children:"Save Course"})]})]})]})};export{He as default};
