import{r as a,v as L,j as e,L as k}from"./index-DuD-OOiq.js";import{b as I,c as h,a as t}from"./index.esm-yZGlwvod.js";import{a as E}from"./axios-upsvKRUO.js";import{a as P}from"./js.cookie-Cz0CWeBA.js";import{C as u,a as o}from"./CRow-CKa_Ahj9.js";import{C as q}from"./CCardGroup-BjXzZGWI.js";import{C as j,a as g}from"./CCardBody-DWgCZHkF.js";import{C as F}from"./CForm-DteMFFYq.js";import{C,a as f}from"./CInputGroupText-Da9lndoE.js";import{c as G}from"./cil-user-Ddrdy7PS.js";import{C as y}from"./CFormInput-BU8Mrb6H.js";import{c as R}from"./cil-lock-locked-DmxpJbVL.js";const Q=()=>{const[i,N]=a.useState(""),[n,v]=a.useState(""),[c,l]=a.useState(""),[d,m]=a.useState(!1),b=L(),w=async r=>{var p,x;r.preventDefault(),l(""),m(!0);try{const s=await E.post("http://localhost:8000/api/login",{email:i,password:n});P.set("session_token",s.data.session_token,{expires:1,secure:!0,sameSite:"Strict"}),localStorage.setItem("user",JSON.stringify(s.data.user)),b("/dashboard")}catch(s){m(!1);const S=((x=(p=s.response)==null?void 0:p.data)==null?void 0:x.message)||(s.request?"No response from server. Please try again later.":s.message)||"Login failed! Please check your credentials.";l(S)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(I,{children:e.jsx(u,{className:"justify-content-center",children:e.jsx(o,{md:8,children:e.jsxs(q,{children:[e.jsx(j,{className:"p-4",children:e.jsx(g,{children:e.jsxs(F,{onSubmit:w,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign in to your account"}),c&&e.jsx("div",{className:"text-danger",children:c}),e.jsxs(C,{className:"mb-3",children:[e.jsx(f,{children:e.jsx(h,{icon:G})}),e.jsx(y,{placeholder:"Email",autoComplete:"email",value:i,onChange:r=>N(r.target.value),required:!0})]}),e.jsxs(C,{className:"mb-4",children:[e.jsx(f,{children:e.jsx(h,{icon:R})}),e.jsx(y,{type:"password",placeholder:"Password",autoComplete:"current-password",value:n,onChange:r=>v(r.target.value),required:!0})]}),e.jsxs(u,{children:[e.jsx(o,{xs:6,children:e.jsx(t,{color:"primary",className:"px-4",type:"submit",disabled:d,children:d?"Logging in...":"Login"})}),e.jsx(o,{xs:6,className:"text-right",children:e.jsx(t,{color:"link",className:"px-0",children:"Forgot password?"})})]})]})})}),e.jsx(j,{className:"text-white bg-primary py-5",style:{width:"44%"},children:e.jsx(g,{className:"text-center",children:e.jsxs("div",{children:[e.jsx("h2",{children:"Sign up"}),e.jsx("p",{children:"Create an account to get started"}),e.jsx(k,{to:"/register",children:e.jsx(t,{color:"primary",className:"mt-3",active:!0,tabIndex:-1,children:"Register Now!"})})]})})})]})})})})})};export{Q as default};
