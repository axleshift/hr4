import{r as d,j as e,P as s,h as g}from"./index-2D8FeL9F.js";import{c as n,a as f,d as F}from"./index.esm-CwNLudvQ.js";import{a as v,b as O,c as N,d as T}from"./DefaultLayout-D7qSd7NS.js";import{C as E}from"./CModalTitle-8JKq97tJ.js";import{C as S}from"./CForm-Dn3-mb5Y.js";import{C as l}from"./CFormInput-BeWDrBy3.js";import{C as w}from"./CFormSelect-p8y2jCIf.js";import{C as R,a as U}from"./CRow-DkmP3GPu.js";import{C as A,a as M}from"./CCardBody-BvEiaSFn.js";import{C as P}from"./CCardHeader-C2b9ouQH.js";import{C as V,a as q,b as y,c as p,d as D,e as h}from"./CTable-Bg0Km9cf.js";import{c as H}from"./cil-options-sHCm5Gxk.js";import"./CCloseButton-kX9bSgae.js";import"./cil-user-Ddrdy7PS.js";const C=({modalVisible:c,setModalVisible:i,user:r,departments:u})=>{const[a,x]=d.useState({name:"",email:"",department:"",employee_type:"",employment_status:"",date_of_hire:"",gender:"",phone_number:"",address:""});return d.useEffect(()=>{r&&x({name:r.name||"",email:r.email||"",department:r.department||"",employee_type:r.employee_type||"",employment_status:r.employment_status||"",date_of_hire:r.date_of_hire||"",gender:r.gender||"",phone_number:r.phone_number||"",address:r.address||""})},[r]),e.jsxs(v,{visible:c,onClose:()=>i(!1),size:"lg",children:[e.jsx(O,{children:e.jsx(E,{children:"View Profile"})}),e.jsx(N,{children:e.jsxs(S,{children:[e.jsx(n,{htmlFor:"name",children:"Full Name"}),e.jsx(l,{id:"name",name:"name",value:a.name,readOnly:!0}),e.jsx(n,{htmlFor:"email",children:"Email"}),e.jsx(l,{id:"email",name:"email",value:a.email,readOnly:!0}),e.jsx(n,{htmlFor:"department",children:"Department"}),e.jsxs(w,{id:"department",name:"department",value:a.department,readOnly:!0,children:[e.jsx("option",{value:"",children:"--"}),u.map(m=>e.jsx("option",{value:m.id,children:m.name},m.id))]}),e.jsx(n,{htmlFor:"employee_type",children:"Employee Type"}),e.jsx(l,{id:"employee_type",name:"employee_type",value:a.employee_type,readOnly:!0}),e.jsx(n,{htmlFor:"employment_status",children:"Employment Status"}),e.jsx(l,{id:"employment_status",name:"employment_status",value:a.employment_status,readOnly:!0}),e.jsx(n,{htmlFor:"date_of_hire",children:"Date of Hire"}),e.jsx(l,{id:"date_of_hire",name:"date_of_hire",type:"date",value:a.date_of_hire,readOnly:!0}),e.jsx(n,{htmlFor:"gender",children:"Gender"}),e.jsx(l,{id:"gender",name:"gender",value:a.gender,readOnly:!0}),e.jsx(n,{htmlFor:"phone_number",children:"Phone Number"}),e.jsx(l,{id:"phone_number",name:"phone_number",value:a.phone_number,readOnly:!0}),e.jsx(n,{htmlFor:"address",children:"Address"}),e.jsx(l,{id:"address",name:"address",value:a.address,readOnly:!0})]})}),e.jsx(T,{children:e.jsx(f,{color:"secondary",onClick:()=>i(!1),children:"Close"})})]})};C.propTypes={modalVisible:s.bool.isRequired,setModalVisible:s.func.isRequired,user:s.shape({id:s.number.isRequired,name:s.string,email:s.string,department:s.oneOfType([s.number,s.string]),employee_type:s.string,employment_status:s.string,date_of_hire:s.string,gender:s.string,phone_number:s.string,address:s.string}).isRequired,departments:s.arrayOf(s.shape({id:s.number,name:s.string})).isRequired};const ee=()=>{const[c,i]=d.useState([]),[r,u]=d.useState(!0),[a,x]=d.useState(null),[m,j]=d.useState(!1);d.useEffect(()=>{(async()=>{try{const t=await g.get("/api/auth");console.log("Users response:",t.data),t.data&&Array.isArray(t.data)?i(t.data):(console.error("Users data is not an array:",t.data),i([]))}catch(t){console.error("Error fetching users:",t),i([])}finally{u(!1)}})()},[]);const _=o=>{const t=c.find(b=>b.id===o);x(t),j(!0)};return e.jsxs(R,{children:[e.jsx(U,{xs:12,children:e.jsxs(A,{className:"mb-4",children:[e.jsx(P,{className:"d-flex justify-content-between align-items-center",children:e.jsx("strong",{children:"Access Control"})}),e.jsx(M,{children:r?e.jsx("p",{children:"Loading users..."}):e.jsxs(V,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[e.jsx(q,{children:e.jsxs(y,{children:[e.jsx(p,{className:"text-center",children:"#"}),e.jsx(p,{children:"Name"}),e.jsx(p,{children:"Email"}),e.jsx(p,{className:"text-center",children:"Actions"})]})}),e.jsx(D,{children:c.map((o,t)=>e.jsxs(y,{children:[e.jsx(h,{className:"text-center",children:t+1}),e.jsx(h,{children:o.name}),e.jsx(h,{children:o.email}),e.jsx(h,{className:"text-center",children:e.jsxs(f,{color:"secondary",size:"sm",onClick:()=>_(o.id),children:[e.jsx(F,{icon:H,className:"me-1"}),"View"]})})]},o.id))})]})})]})}),a&&e.jsx(C,{modalVisible:m,setModalVisible:j,user:a,roles:[],departments:[]})]})};export{ee as default};
