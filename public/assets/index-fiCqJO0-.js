import{r as d,q as f,j as e}from"./index-CRTnaubu.js";import{C as M,a as D}from"./CRow-BZadPtpU.js";import{C as q,a as E}from"./CCardBody-CvEhZX08.js";import{C as I}from"./CCardHeader-C-ukDWz0.js";import{a as o,c,d as m}from"./index.esm-BlCmWVN3.js";import{a as $,b as k,c as B,d as N,e as P,C as A}from"./DefaultLayout-ZBGOecQ5.js";import{C as H}from"./cil-user-FNuvXb9m.js";import{C as L,a as R,b as y,c as r,d as O}from"./CTable-Dx8-mqMW.js";import"./CCloseButton-ZV-Kt9uN.js";const Z=()=>{const[T,h]=d.useState(!1),[x,g]=d.useState([]),[n,u]=d.useState({event_title:"",delivery_method:"",event_location:"",schedule:"",start_time:"",end_time:""});d.useEffect(()=>{_()},[]);const _=async()=>{try{const t=await f.get("/training");g(t.data.data)}catch(t){console.error("Error fetching trainings:",t)}},a=t=>{const{name:s,value:i}=t.target;u({...n,[s]:i})},b=async t=>{t.preventDefault();try{await f.post("/training",n),h(!1),_(),u({event_title:"",delivery_method:"",event_location:"",schedule:"",start_time:"",end_time:""})}catch(s){console.error("Error adding training:",s)}},S=x.filter((t,s,i)=>s===i.findIndex(l=>l.event_title===t.event_title)),w=x.filter((t,s,i)=>s===i.findIndex(l=>l.delivery_method===t.delivery_method)),j=(t,s,i)=>{const l=new Date,v=new Date(`${t}T${s}`),p=new Date(`${t}T${i}`);return l<v?"Pending":l<=p?"Ongoing":"Complete"},C=t=>{const[s,i]=t.split(":"),l=parseInt(s,10),v=l>=12?"PM":"AM";return`${l%12||12}:${i} ${v}`},[V,F]=d.useState(new Date);return d.useEffect(()=>{const t=setInterval(()=>{F(new Date)},1e3);return()=>clearInterval(t)},[]),e.jsx(M,{children:e.jsx(D,{xs:12,children:e.jsxs(q,{className:"mb-4",children:[e.jsxs(I,{children:[e.jsx("strong",{children:"Training Schedule"}),e.jsxs("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:[e.jsx(o,{color:"primary",onClick:()=>h(!0),children:"Add Stuff"}),e.jsxs($,{alignment:"center",backdrop:"static",size:"lg",visible:T,onClose:()=>h(!1),children:[e.jsx(k,{children:e.jsx(B,{children:"Add Stuff"})}),e.jsx(N,{children:e.jsxs(H,{onSubmit:b,children:[e.jsx(c,{htmlFor:"event_title",children:"Training Class"}),e.jsx(m,{type:"text",id:"event_title",name:"event_title",value:n.event_title,onChange:a,required:!0}),e.jsx("div",{children:S.map(t=>e.jsx(o,{color:"secondary",variant:"outline",className:"me-2",onClick:()=>u({...n,event_title:t.event_title}),children:t.event_title},t.id))}),e.jsx(c,{htmlFor:"delivery_method",children:"Type of Delivery Method"}),e.jsx(m,{type:"text",id:"delivery_method",name:"delivery_method",value:n.delivery_method,onChange:a,required:!0}),e.jsx("div",{children:w.map(t=>e.jsx(o,{color:"secondary",variant:"outline",className:"me-2",onClick:()=>u({...n,delivery_method:t.delivery_method}),children:t.delivery_method},t.id))}),e.jsx(c,{htmlFor:"event_location",children:"event_location / Mode"}),e.jsx(m,{type:"text",id:"event_location",name:"event_location",value:n.event_location,onChange:a,required:!0}),e.jsx(c,{htmlFor:"schedule",children:"Schedule"}),e.jsx(m,{type:"date",id:"schedule",name:"schedule",value:n.schedule,onChange:a,required:!0}),e.jsx(c,{htmlFor:"start_time",children:"Start Time"}),e.jsx(m,{type:"time",id:"start_time",name:"start_time",value:n.start_time,onChange:a,required:!0}),e.jsx(c,{htmlFor:"end_time",children:"End Time"}),e.jsx(m,{type:"time",id:"end_time",name:"end_time",value:n.end_time,onChange:a,required:!0}),e.jsxs(P,{children:[e.jsx(o,{color:"secondary",onClick:()=>h(!1),children:"Cancel"}),e.jsx(o,{color:"primary",type:"submit",children:"Add Module"})]})]})})]})]})]}),e.jsx(E,{children:e.jsxs(L,{children:[e.jsx(R,{children:e.jsxs(y,{children:[e.jsx(r,{children:"Training Class"}),e.jsx(r,{children:"Delivery Method"}),e.jsx(r,{children:"Event Location"}),e.jsx(r,{children:"Schedule"}),e.jsx(r,{children:"Start Time"}),e.jsx(r,{children:"End Time"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Participants"})]})}),e.jsx(O,{children:x.map(t=>e.jsxs(y,{children:[e.jsx(r,{children:t.event_title}),e.jsx(r,{children:t.delivery_method}),e.jsx(r,{children:t.event_location}),e.jsx(r,{children:t.schedule}),e.jsx(r,{children:C(t.start_time)}),e.jsx(r,{children:C(t.end_time)}),e.jsx(r,{children:e.jsx(A,{color:j(t.schedule,t.start_time,t.end_time)==="Pending"?"warning":j(t.schedule,t.start_time,t.end_time)==="Ongoing"?"info":"success",className:"ms-2",children:j(t.schedule,t.start_time,t.end_time)})}),e.jsx(r,{children:e.jsx(o,{color:"primary",variant:"outline",children:"View Participants"})})]},t.id))})]})})]})})})};export{Z as default};
