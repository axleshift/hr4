import{r as l,_ as R,R as g,a as E,c as D,P as h,j as r,q as F}from"./index-CRTnaubu.js";import{C as w,a as A}from"./CRow-BZadPtpU.js";import{C as de,a as ue}from"./CCardBody-CvEhZX08.js";import{C as pe}from"./CCardHeader-C-ukDWz0.js";import{a as S,c as P,d as _}from"./index.esm-BlCmWVN3.js";import{_ as me,f as he,a as fe,T as ve,u as Ce}from"./CCloseButton-ZV-Kt9uN.js";import{C as xe,a as ge,b as Z,c as V,d as je,e as H}from"./CTable-Dx8-mqMW.js";import{a as ee,b as se,c as re,d as ae,e as ne}from"./DefaultLayout-ZBGOecQ5.js";import{C as te}from"./cil-user-FNuvXb9m.js";import{C as ie}from"./CFormTextarea-c6df-Lt8.js";var le=l.createContext({}),W=l.forwardRef(function(s,t){var u=s.children,e=s.activeItemKey,o=s.alwaysOpen,c=o===void 0?!1:o,p=s.className,a=s.flush,i=R(s,["children","activeItemKey","alwaysOpen","className","flush"]),n=l.useState(e),f=n[0],v=n[1];return g.createElement("div",E({className:D("accordion",{"accordion-flush":a},p)},i,{ref:t}),g.createElement(le.Provider,{value:{_activeItemKey:f,alwaysOpen:c,setActiveKey:v}},u))});W.propTypes={alwaysOpen:h.bool,activeItemKey:h.oneOfType([h.number,h.string]),children:h.node,className:h.string,flush:h.bool};W.displayName="CAccordion";var q=l.createContext({}),U=l.forwardRef(function(s,t){var u=s.children,e=s.className,o=s.id,c=s.itemKey,p=R(s,["children","className","id","itemKey"]),a=o??l.useId(),i=l.useRef(c??a),n=l.useContext(le),f=n._activeItemKey,v=n.alwaysOpen,C=n.setActiveKey,x=l.useState(f===i.current),j=x[0],y=x[1];return l.useEffect(function(){!v&&j&&C(i.current)},[j]),l.useEffect(function(){y(f===i.current)},[f]),g.createElement("div",E({className:D("accordion-item",e)},p,{ref:t}),g.createElement(q.Provider,{value:{id:a,setVisible:y,visible:j}},u))});U.propTypes={children:h.node,className:h.string,itemKey:h.oneOfType([h.number,h.string])};U.displayName="CAccordionItem";function z(){return z=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var u=arguments[t];for(var e in u)({}).hasOwnProperty.call(u,e)&&(s[e]=u[e])}return s},z.apply(null,arguments)}function Ne(s,t){return s.classList?!!t&&s.classList.contains(t):(" "+(s.className.baseVal||s.className)+" ").indexOf(" "+t+" ")!==-1}function Ee(s,t){s.classList?s.classList.add(t):Ne(s,t)||(typeof s.className=="string"?s.className=s.className+" "+t:s.setAttribute("class",(s.className&&s.className.baseVal||"")+" "+t))}function oe(s,t){return s.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function ye(s,t){s.classList?s.classList.remove(t):typeof s.className=="string"?s.className=oe(s.className,t):s.setAttribute("class",oe(s.className&&s.className.baseVal||"",t))}var be=function(t,u){return t&&u&&u.split(" ").forEach(function(e){return Ee(t,e)})},k=function(t,u){return t&&u&&u.split(" ").forEach(function(e){return ye(t,e)})},G=function(s){me(t,s);function t(){for(var e,o=arguments.length,c=new Array(o),p=0;p<o;p++)c[p]=arguments[p];return e=s.call.apply(s,[this].concat(c))||this,e.appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(a,i){var n=e.resolveArguments(a,i),f=n[0],v=n[1];e.removeClasses(f,"exit"),e.addClass(f,v?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(a,i)},e.onEntering=function(a,i){var n=e.resolveArguments(a,i),f=n[0],v=n[1],C=v?"appear":"enter";e.addClass(f,C,"active"),e.props.onEntering&&e.props.onEntering(a,i)},e.onEntered=function(a,i){var n=e.resolveArguments(a,i),f=n[0],v=n[1],C=v?"appear":"enter";e.removeClasses(f,C),e.addClass(f,C,"done"),e.props.onEntered&&e.props.onEntered(a,i)},e.onExit=function(a){var i=e.resolveArguments(a),n=i[0];e.removeClasses(n,"appear"),e.removeClasses(n,"enter"),e.addClass(n,"exit","base"),e.props.onExit&&e.props.onExit(a)},e.onExiting=function(a){var i=e.resolveArguments(a),n=i[0];e.addClass(n,"exit","active"),e.props.onExiting&&e.props.onExiting(a)},e.onExited=function(a){var i=e.resolveArguments(a),n=i[0];e.removeClasses(n,"exit"),e.addClass(n,"exit","done"),e.props.onExited&&e.props.onExited(a)},e.resolveArguments=function(a,i){return e.props.nodeRef?[e.props.nodeRef.current,a]:[a,i]},e.getClassNames=function(a){var i=e.props.classNames,n=typeof i=="string",f=n&&i?i+"-":"",v=n?""+f+a:i[a],C=n?v+"-active":i[a+"Active"],x=n?v+"-done":i[a+"Done"];return{baseClassName:v,activeClassName:C,doneClassName:x}},e}var u=t.prototype;return u.addClass=function(o,c,p){var a=this.getClassNames(c)[p+"ClassName"],i=this.getClassNames("enter"),n=i.doneClassName;c==="appear"&&p==="done"&&n&&(a+=" "+n),p==="active"&&o&&he(o),a&&(this.appliedClasses[c][p]=a,be(o,a))},u.removeClasses=function(o,c){var p=this.appliedClasses[c],a=p.base,i=p.active,n=p.done;this.appliedClasses[c]={},a&&k(o,a),i&&k(o,i),n&&k(o,n)},u.render=function(){var o=this.props;o.classNames;var c=fe(o,["classNames"]);return g.createElement(ve,z({},c,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(g.Component);G.defaultProps={classNames:""};G.propTypes={};var J=l.forwardRef(function(s,t){var u=s.children,e=s.className,o=s.horizontal,c=s.onHide,p=s.onShow,a=s.visible,i=R(s,["children","className","horizontal","onHide","onShow","visible"]),n=l.useRef(null),f=Ce(t,n),v=l.useState(),C=v[0],x=v[1],j=l.useState(),y=j[0],N=j[1],O=function(){if(p&&p(),o){n.current&&N(n.current.scrollWidth);return}n.current&&x(n.current.scrollHeight)},K=function(){if(o){N(0);return}x(0)},$=function(){if(o){n.current&&N(n.current.scrollWidth);return}n.current&&x(n.current.scrollHeight)},I=function(){if(c&&c(),o){N(0);return}x(0)},B=function(){if(o){N(0);return}x(0)};return g.createElement(G,{in:a,nodeRef:n,onEntering:O,onEntered:K,onExit:$,onExiting:I,onExited:B,timeout:350},function(T){var L=C===0?null:{height:C},M=y===0?null:{width:y};return g.createElement("div",E({className:D(e,{"collapse-horizontal":o,collapsing:T==="entering"||T==="exiting","collapse show":T==="entered",collapse:T==="exited"}),style:E(E({},L),M)},i,{ref:f}),u)})});J.propTypes={children:h.node,className:h.string,horizontal:h.bool,onHide:h.func,onShow:h.func,visible:h.bool};J.displayName="CCollapse";var Q=l.forwardRef(function(s,t){var u=s.children,e=s.className,o=R(s,["children","className"]),c=l.useContext(q),p=c.id,a=c.visible;return g.createElement(J,{className:"accordion-collapse",id:p,visible:a},g.createElement("div",E({className:D("accordion-body",e)},o,{ref:t}),u))});Q.propTypes={children:h.node,className:h.string};Q.displayName="CAccordionBody";var X=l.forwardRef(function(s,t){var u=s.children,e=s.className,o=R(s,["children","className"]),c=l.useContext(q),p=c.id,a=c.visible,i=c.setVisible;return g.createElement("button",E({type:"button",className:D("accordion-button",{collapsed:!a},e),"aria-controls":p,"aria-expanded":a,onClick:function(){return i(!a)}},o,{ref:t}),u)});X.propTypes={children:h.node,className:h.string};X.displayName="CAccordionButton";var Y=l.forwardRef(function(s,t){var u=s.children,e=s.className,o=R(s,["children","className"]);return g.createElement("div",E({className:D("accordion-header",e)},o,{ref:t}),g.createElement(X,null,u))});Y.propTypes={children:h.node,className:h.string};Y.displayName="CAccordionHeader";const _e=()=>{const[s,t]=l.useState(!1),[u,e]=l.useState(!1),[o,c]=l.useState([]),[p,a]=l.useState([]),[i,n]=l.useState(null),[f,v]=l.useState(""),[C,x]=l.useState(""),[j,y]=l.useState(""),[N,O]=l.useState(""),[K,$]=l.useState(""),[I,B]=l.useState(null);l.useEffect(()=>{(async()=>{try{const m=await F.get("/api/programs");c(m.data.data)}catch(m){console.error("Error fetching programs:",m)}})()},[]),l.useEffect(()=>{(async()=>{try{const m=await F.get("/api/courses");console.log("Courses fetched:",m.data),a(m.data.data)}catch(m){console.error("Error fetching courses:",m)}})()},[]);const T=async()=>{try{const m=(await F.get("/api/programs",{title:f,description:C})).data.data;c(b=>[...b,m]),v(""),x(""),t(!1)}catch(d){console.error("Error adding program:",d)}},L=async()=>{const d=new FormData;d.append("title",j),d.append("description",N),d.append("duration",K),d.append("program_id",i),I&&d.append("file",I);try{const m=await F.post("/api/courses",d,{headers:{"Content-Type":"multipart/form-data"}}),b=new FormData;b.append("title","Module 1"),b.append("description","This is the first module for the course."),b.append("course_id",m.data.id),newModuleFile&&b.append("file",newModuleFile);const ce=await F.post("/api/modules",b,{headers:{"Content-Type":"multipart/form-data"}});a([...p,m.data]),e(!1),console.log("Course and Module saved successfully!",m,ce)}catch(m){console.error("Error saving course and module:",m)}},M=d=>{B(d.target.files[0])};return r.jsxs(w,{children:[r.jsx(A,{xs:12,children:r.jsxs(de,{className:"mb-4",children:[r.jsxs(pe,{children:[r.jsx("strong",{children:"List of Programs"}),r.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:r.jsx(S,{color:"primary",onClick:()=>t(!0),children:"Add Program"})})]}),r.jsx(ue,{children:r.jsx(W,{alwaysOpen:!0,children:o.map(d=>r.jsxs(U,{children:[r.jsx(Y,{onClick:()=>{n(d.id)},children:d.title}),r.jsxs(Q,{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Description:"})," ",d.description]}),r.jsx(S,{color:"primary",onClick:()=>{n(d.id),e(!0)},children:"Add Course"}),r.jsxs(xe,{striped:!0,className:"mt-3",children:[r.jsx(ge,{children:r.jsxs(Z,{children:[r.jsx(V,{children:"Title"}),r.jsx(V,{children:"Description"}),r.jsx(V,{children:"Duration"})]})}),r.jsx(je,{children:p.filter(m=>m.program_id===d.id).map(m=>r.jsxs(Z,{children:[r.jsx(H,{children:m.title}),r.jsx(H,{children:m.description}),r.jsx(H,{children:m.duration}),r.jsx(H,{children:m.file_path?r.jsx("a",{href:m.file_path,target:"_blank",rel:"noopener noreferrer",children:m.file_name||"Download"}):r.jsx("span",{children:"No File"})})]},m.id))})]})]})]},d.id))})})]})}),r.jsxs(ee,{size:"xl",visible:s,onClose:()=>t(!1),children:[r.jsx(se,{children:r.jsx(re,{children:"Add Program"})}),r.jsx(ae,{children:r.jsxs(te,{children:[r.jsx(w,{className:"mb-3",children:r.jsxs(A,{md:12,children:[r.jsx(P,{children:"Program Title"}),r.jsx(_,{value:f,onChange:d=>v(d.target.value)})]})}),r.jsx(w,{className:"mb-3",children:r.jsxs(A,{md:12,children:[r.jsx(P,{children:"Program Description"}),r.jsx(ie,{value:C,onChange:d=>x(d.target.value)})]})})]})}),r.jsxs(ne,{children:[r.jsx(S,{color:"secondary",onClick:()=>t(!1),children:"Close"}),r.jsx(S,{color:"primary",onClick:T,children:"Save Program"})]})]}),r.jsxs(ee,{size:"xl",visible:u,onClose:()=>e(!1),children:[r.jsx(se,{children:r.jsx(re,{children:"Add Course"})}),r.jsx(ae,{children:r.jsxs(te,{children:[r.jsx(w,{className:"mb-3",children:r.jsxs(A,{md:12,children:[r.jsx(P,{children:"Course Title"}),r.jsx(_,{value:j,onChange:d=>y(d.target.value)})]})}),r.jsx(w,{className:"mb-3",children:r.jsxs(A,{md:12,children:[r.jsx(P,{children:"Course Description"}),r.jsx(ie,{value:N,onChange:d=>O(d.target.value)})]})}),r.jsx(w,{className:"mb-3",children:r.jsxs(A,{md:12,children:[r.jsx(P,{children:"Course Duration"}),r.jsx(_,{value:K,onChange:d=>$(d.target.value)})]})}),r.jsx(w,{className:"mb-3",children:r.jsxs(A,{md:12,children:[r.jsx(P,{htmlFor:"courseFile",children:"Upload Course File"}),r.jsx(_,{type:"file",id:"courseFile",onChange:M})]})})]})}),r.jsxs(ne,{children:[r.jsx(S,{color:"secondary",onClick:()=>e(!1),children:"Close"}),r.jsx(S,{color:"primary",onClick:L,children:"Save Course"})]})]})]})};export{_e as default};
