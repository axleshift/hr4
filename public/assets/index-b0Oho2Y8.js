import{a as d,j as s}from"./index-D0ykVIBh.js";import{C as i,a as _,b as B}from"./index.esm-BMHK7krE.js";import{a as S}from"./index-t--hEgTQ.js";import{C as m,a as c}from"./CRow-C7kEkgmS.js";import{C as n,a as h}from"./CCardBody-Bvtd8o25.js";import{C as x}from"./CCardHeader-DzCRFb7L.js";import{C as v,a as w}from"./CInputGroupText-BWZEON4G.js";import{C as A}from"./CFormInput-BEWTXsMD.js";import{C as R,a as y,b as C,c as l,d as L,e as o}from"./CTable-fJWtcUeL.js";import{C as F,a as I}from"./CProgress-B9Qr6ELo.js";import{C as N}from"./DefaultLayout-CimxNCuU.js";import"./index.esm-CEZIJNA6.js";import"./cil-user-Ddrdy7PS.js";const J=()=>{const[t,j]=d.useState([]),[g,u]=d.useState([]),[p,b]=d.useState("");d.useEffect(()=>{f()},[]);const f=async()=>{try{const a=(await S.get("http://localhost:8000/api/training")).data.data.filter(r=>new Date>new Date(`${r.schedule}T${r.end_time}`)).map(r=>({...r,cost_per_session:r.cost_per_session||Math.floor(Math.random()*500)+100,actual_cost:r.actual_cost||Math.floor(Math.random()*700)+200,budget:r.budget||1e3,roi:(r.budget-r.actual_cost)/r.budget*100}));j(a),u(a)}catch(e){console.error("Error fetching trainings:",e)}},T=e=>{const a=e.target.value.toLowerCase();b(a),u(t.filter(r=>r.training_class.toLowerCase().includes(a)||r.agenda.toLowerCase().includes(a)))};return s.jsxs(m,{children:[s.jsx(c,{xs:12,md:6,lg:3,children:s.jsx(i,{className:"mb-4",color:"primary",value:`₱${t.reduce((e,a)=>e+a.budget,0).toLocaleString()}`,title:"Total Training Budget"})}),s.jsx(c,{xs:12,md:6,lg:3,children:s.jsx(i,{className:"mb-4",color:"danger",value:`₱${t.reduce((e,a)=>e+a.actual_cost,0).toLocaleString()}`,title:"Total Actual Cost"})}),s.jsx(c,{xs:12,md:6,lg:3,children:s.jsx(i,{className:"mb-4",color:"success",value:`${(t.reduce((e,a)=>e+a.roi,0)/t.length).toFixed(2)}%`,title:"Average Training ROI"})}),s.jsx(c,{xs:12,children:s.jsxs(n,{children:[s.jsx(x,{children:s.jsx("strong",{children:"Completed Training Budget Reports"})}),s.jsxs(h,{children:[s.jsxs(v,{className:"mb-3",children:[s.jsx(w,{children:"Search"}),s.jsx(A,{placeholder:"Filter by Training Class or Agenda",value:p,onChange:T})]}),s.jsxs(R,{striped:!0,hover:!0,children:[s.jsx(y,{children:s.jsxs(C,{children:[s.jsx(l,{children:"#"}),s.jsx(l,{children:"Training Class"}),s.jsx(l,{children:"Agenda"}),s.jsx(l,{children:"Budget"}),s.jsx(l,{children:"Actual Cost"}),s.jsx(l,{children:"Budget Utilization"}),s.jsx(l,{children:"ROI"})]})}),s.jsx(L,{children:g.map((e,a)=>s.jsxs(C,{children:[s.jsx(o,{children:a+1}),s.jsx(o,{children:e.training_class}),s.jsx(o,{children:e.agenda}),s.jsxs(o,{children:["₱",e.budget.toLocaleString()]}),s.jsxs(o,{children:["₱",e.actual_cost.toLocaleString()]}),s.jsx(o,{children:s.jsx(F,{className:"mt-2",children:s.jsxs(I,{value:e.actual_cost/e.budget*100,color:"info",children:[(e.actual_cost/e.budget*100).toFixed(2),"%"]})})}),s.jsx(o,{children:s.jsxs(N,{color:e.roi>=0?"success":"danger",children:[e.roi.toFixed(2),"%"]})})]},e.id))})]}),s.jsxs(m,{className:"mt-4",children:[s.jsx(c,{md:6,children:s.jsxs(n,{children:[s.jsx(x,{children:"Budget vs Actual Cost"}),s.jsx(h,{children:s.jsx(_,{data:{labels:t.map(e=>e.training_class),datasets:[{label:"Budget",backgroundColor:"#007bff",data:t.map(e=>e.budget)},{label:"Actual Cost",backgroundColor:"#dc3545",data:t.map(e=>e.actual_cost)}]}})})]})}),s.jsx(c,{md:6,children:s.jsxs(n,{children:[s.jsx(x,{children:"Training ROI by Program"}),s.jsx(h,{children:s.jsx(B,{data:{labels:t.map(e=>e.training_class),datasets:[{data:t.map(e=>Math.abs(e.roi)),backgroundColor:["#28a745","#dc3545","#ffc107","#17a2b8"]}]}})})]})})]})]})]})})]})};export{J as default};
