import{r as p,_ as f,R as j,b as N,c as y,P as d,v as B,j as e}from"./index-DuD-OOiq.js";import{a as g}from"./axios-upsvKRUO.js";import{R as O}from"./react-DOh6XfOk.js";import{C as E,a as I}from"./CRow-CKa_Ahj9.js";import{C as w,a as D}from"./CCardBody-DWgCZHkF.js";import{C as $}from"./CCardHeader-DKN5mD2A.js";import{a as h}from"./index.esm-yZGlwvod.js";import{C as H,a as P,b as X,c as q,d as z}from"./CModalTitle-DJ0T4zoJ.js";import{C as A}from"./CForm-DteMFFYq.js";import{a as x,C as F}from"./CFormInput-BU8Mrb6H.js";import{C as U}from"./CFormTextarea-nBuEIAyE.js";import"./DefaultLayout-CVTAE6H7.js";import"./js.cookie-Cz0CWeBA.js";import"./cil-user-Ddrdy7PS.js";var v=p.forwardRef(function(s,m){var l=s.children,r=s.as,c=r===void 0?"img":r,i=s.className,n=s.orientation,u=f(s,["children","as","className","orientation"]);return j.createElement(c,N({className:y(n?"card-img-".concat(n):"card-img",i)},u,{ref:m}),l)});v.propTypes={as:d.elementType,children:d.node,className:d.string,orientation:d.oneOf(["top","bottom"])};v.displayName="CCardImage";var M=p.forwardRef(function(s,m){var l=s.children,r=s.as,c=r===void 0?"p":r,i=s.className,n=f(s,["children","as","className"]);return j.createElement(c,N({className:y("card-text",i)},n,{ref:m}),l)});M.propTypes={as:d.elementType,children:d.node,className:d.string};M.displayName="CCardText";var T=p.forwardRef(function(s,m){var l=s.children,r=s.as,c=r===void 0?"h5":r,i=s.className,n=f(s,["children","as","className"]);return j.createElement(c,N({className:y("card-title",i)},n,{ref:m}),l)});T.propTypes={as:d.elementType,children:d.node,className:d.string};T.displayName="CCardTitle";const ie=()=>{const s=B(),[m,l]=p.useState(!1),[r,c]=p.useState([]),[i,n]=p.useState({title:"",description:"",image:null});p.useEffect(()=>{(async()=>{try{const t=await g.get("http://localhost:8000/api/modules");c(t.data.data)}catch(t){console.error("Error fetching modules:",t)}})()},[]);const u=async a=>{a.preventDefault();const t=new FormData;t.append("title",i.title),t.append("description",i.description),i.image&&t.append("image",i.image);try{const o=await g.post("http://localhost:8000/api/modules",t,{headers:{"Content-Type":"multipart/form-data"}});c([...r,o.data.data]),l(!1),n({title:"",description:"",image:null}),document.getElementById("image").value=null}catch(o){console.error("Error adding module:",o)}},b=a=>{const{id:t,value:o}=a.target;n(C=>({...C,[t]:o}))},R=a=>{const{id:t,files:o}=a.target;n(C=>({...C,[t]:o[0]}))},k=a=>{s(`/ui/LearningManagement/Modules/${a.id}`,{state:{title:a.title,moduleId:a.id}})},L=async a=>{const t=r[a];try{await g.delete(`http://localhost:8000/api/modules/${t.id}`);const o=r.filter((C,S)=>S!==a);c(o)}catch(o){console.error("Error deleting module:",o)}};return e.jsx(E,{children:e.jsx(I,{xs:12,children:e.jsxs(w,{className:"mb-4",children:[e.jsxs($,{children:[e.jsx("strong",{children:"MODULES"}),e.jsxs("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:[e.jsx(h,{color:"primary",onClick:()=>l(!m),children:"Create Module"}),e.jsxs(H,{alignment:"center",backdrop:"static",size:"lg",visible:m,onClose:()=>l(!1),children:[e.jsx(P,{children:e.jsx(X,{children:"Create Module"})}),e.jsx(q,{children:e.jsxs(A,{validated:!0,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"image",children:"Input Image (Optional)"}),e.jsx(F,{type:"file",id:"image",onChange:R})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"title",children:"Module Title"}),e.jsx(F,{required:!0,type:"text",id:"title",value:i.title,onChange:b,placeholder:"Input title"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"description",children:"Description"}),e.jsx(U,{id:"description",rows:3,value:i.description,onChange:b})]})]})}),e.jsxs(z,{children:[e.jsx(h,{color:"secondary",onClick:()=>l(!1),children:"Cancel"}),e.jsx(h,{color:"primary",onClick:u,children:"Add Module"})]})]})]})]}),e.jsx(D,{children:e.jsx(E,{children:r.map((a,t)=>e.jsx(I,{xs:12,md:4,className:"mb-4",children:e.jsxs(w,{children:[e.jsx(v,{orientation:"top",src:a.image?`data:image/jpeg;base64,${a.image}`:O}),e.jsxs(D,{children:[e.jsx(T,{style:{cursor:"pointer"},onClick:()=>k(a),children:a.title}),e.jsx(M,{children:a.description}),e.jsxs("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:[e.jsx(h,{color:"primary",className:"me-md-2",children:"EDIT"}),e.jsx(h,{color:"danger",className:"me-md-2",onClick:()=>L(t),children:"DELETE"})]})]})]})},t))})})]})})})};export{ie as default};
