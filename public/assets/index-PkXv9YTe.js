import{r as d,h as m,j as e}from"./index-Dm7TF75t.js";import{C as T,a as w}from"./CRow-DPCsoXRr.js";import{C as D,a as N}from"./CCardBody-CsoUnxm8.js";import{C as E}from"./CCardHeader-HVpRkNZq.js";import{a as c,c as x}from"./index.esm-BonZN-rB.js";import{a as S,b as k,c as L,d as B}from"./DefaultLayout-Bt4BwPXo.js";import{C as H}from"./CModalTitle-k9tpGMZ1.js";import{C as _}from"./CForm-NLlb8KwM.js";import{C as g}from"./CFormInput-CnQqJFpu.js";import{C as I}from"./CFormTextarea-BNFHPsO7.js";import{C as R,a as z,b as C,c as t,d as A,e as o}from"./CTable-1PSmenS1.js";import"./CCloseButton-CzhvL4Rd.js";import"./cil-user-Ddrdy7PS.js";const Z=()=>{const[j,n]=d.useState(!1),[f,h]=d.useState([]),[i,p]=d.useState({title:"",description:"",file:null});d.useEffect(()=>{b()},[]);const b=async()=>{try{const r=await m.get("/api/modules");h(r.data.data)}catch(r){console.error("Error fetching modules:",r)}},y=async r=>{var l;r.preventDefault();const s=new FormData;s.append("title",i.title),s.append("description",i.description),i.file&&s.append("file",i.file);try{const a=await m.post("/api/modules",s,{headers:{"Content-Type":"multipart/form-data"}});h(v=>[...v,a.data.data]),n(!1),p({title:"",description:"",file:null})}catch(a){console.error("Error adding module:",((l=a.response)==null?void 0:l.data)||a.message)}},u=r=>{const{id:s,value:l}=r.target;p(a=>({...a,[s]:l}))},M=r=>{p(s=>({...s,file:r.target.files[0]}))},F=async r=>{var s;try{await m.delete(`/api/modules/${r}`),h(l=>l.filter(a=>a.id!==r))}catch(l){console.error("Error deleting module:",((s=l.response)==null?void 0:s.data)||l.message)}};return e.jsx(T,{children:e.jsx(w,{xs:12,children:e.jsxs(D,{className:"mb-4",children:[e.jsxs(E,{children:[e.jsx("strong",{children:"MODULES"}),e.jsxs("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:[e.jsx(c,{color:"primary",onClick:()=>n(!j),children:"Create Module"}),e.jsxs(S,{alignment:"center",backdrop:"static",size:"lg",visible:j,onClose:()=>n(!1),children:[e.jsx(k,{children:e.jsx(H,{children:"Create Module"})}),e.jsx(L,{children:e.jsxs(_,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"file",children:"Upload File"}),e.jsx(g,{type:"file",id:"file",onChange:M})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"title",children:"Module Title"}),e.jsx(g,{required:!0,type:"text",id:"title",value:i.title,onChange:u,placeholder:"Input title"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"description",children:"Description"}),e.jsx(I,{id:"description",rows:3,value:i.description,onChange:u})]})]})}),e.jsxs(B,{children:[e.jsx(c,{color:"secondary",onClick:()=>n(!1),children:"Cancel"}),e.jsx(c,{color:"primary",onClick:y,children:"Add Module"})]})]})]})]}),e.jsx(N,{children:e.jsxs(R,{striped:!0,hover:!0,children:[e.jsx(z,{children:e.jsxs(C,{children:[e.jsx(t,{children:"#"}),e.jsx(t,{children:"Title"}),e.jsx(t,{children:"Description"}),e.jsx(t,{children:"File"}),e.jsx(t,{children:"Actions"})]})}),e.jsx(A,{children:f.length>0?f.map((r,s)=>e.jsxs(C,{children:[e.jsx(t,{children:s+1}),e.jsx(o,{children:r.title}),e.jsx(o,{children:r.description}),e.jsx(o,{children:r.file_url?e.jsx("a",{href:r.file_url,target:"_blank",rel:"noopener noreferrer",children:r.file_name||"Download"}):e.jsx("span",{children:"No File"})}),e.jsx(o,{children:e.jsx(c,{color:"danger",size:"sm",onClick:()=>F(r.id),children:"Delete"})})]},r.id)):e.jsx(C,{children:e.jsx(o,{colSpan:5,className:"text-center",children:"No modules available."})})})]})})]})})})};export{Z as default};
