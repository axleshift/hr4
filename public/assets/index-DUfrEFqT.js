import{r as a,q as d,j as e}from"./index-CDwsfsau.js";import{C as V,a as m}from"./CRow-B96tLahF.js";import{C as f,a as C}from"./CCardBody-oDmoBo2b.js";import{C as u}from"./CCardHeader-ikssE2T7.js";import{C as b,a as w,b as l,c as r,d as y,e as c}from"./CTable-CEQGKzX3.js";import{a as h}from"./index.esm-DtJpT5hI.js";import{a as W,b as k,d as A,e as P}from"./DefaultLayout-DjHmmB2A.js";import"./CCloseButton-JXsC3Mmb.js";import"./cil-user-CbjqWmDf.js";const J=()=>{const[g,v]=a.useState([]),[M,T]=a.useState([]),[x,S]=a.useState(""),[D,E]=a.useState(""),[N,_]=a.useState(""),[B,n]=a.useState(!1);a.useEffect(()=>{H(),R()},[]);const H=async()=>{try{const s=await d.get("/api/modules");v(s.data.data)}catch(s){console.error("Error fetching modules:",s)}},R=async()=>{try{const s=await d.get("/api/courses");T(s.data.data)}catch(s){console.error("Error fetching courses:",s)}},p=async(s,o="module")=>{try{const i=o==="course"?`/api/courses/${s}/preview`:`/api/modules/${s}/preview`,t=await d.get(i);S(t.data.base64),E(t.data.mime_type),_(t.data.file_name),n(!0)}catch(i){console.error("Error fetching document preview:",i)}};return e.jsxs(V,{children:[e.jsx(m,{xs:12,children:e.jsxs(f,{className:"mb-4",children:[e.jsx(u,{children:e.jsx("strong",{children:"MODULES"})}),e.jsx(C,{children:e.jsxs(b,{striped:!0,hover:!0,children:[e.jsx(w,{children:e.jsxs(l,{children:[e.jsx(r,{children:"#"}),e.jsx(r,{children:"Title"}),e.jsx(r,{children:"Description"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(y,{children:g.map((s,o)=>{var i,t;return e.jsxs(l,{children:[e.jsx(r,{children:o+1}),e.jsx(c,{children:s.title}),e.jsx(c,{children:s.description}),e.jsx(c,{children:(((i=s.file_name)==null?void 0:i.endsWith(".pdf"))||((t=s.file_name)==null?void 0:t.endsWith(".docx")))&&e.jsx(h,{color:"info",onClick:()=>p(s.id,"module"),children:"View"})})]},o)})})]})})]})}),e.jsx(m,{xs:12,children:e.jsxs(f,{className:"mb-4",children:[e.jsx(u,{children:e.jsx("strong",{children:"COURSES"})}),e.jsx(C,{children:e.jsxs(b,{striped:!0,hover:!0,children:[e.jsx(w,{children:e.jsxs(l,{children:[e.jsx(r,{children:"#"}),e.jsx(r,{children:"Title"}),e.jsx(r,{children:"Description"}),e.jsx(r,{children:"Program"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(y,{children:M.map((s,o)=>{var i,t,j;return e.jsxs(l,{children:[e.jsx(r,{children:o+1}),e.jsx(c,{children:s.title}),e.jsx(c,{children:s.description}),e.jsx(c,{children:((i=s.program)==null?void 0:i.title)||"N/A"}),e.jsx(c,{children:(((t=s.file_name)==null?void 0:t.endsWith(".pdf"))||((j=s.file_name)==null?void 0:j.endsWith(".docx")))&&e.jsx(h,{color:"info",onClick:()=>p(s.id,"course"),children:"View"})})]},o)})})]})})]})}),e.jsxs(W,{visible:B,onClose:()=>n(!1),children:[e.jsx(k,{children:"Document Preview"}),e.jsx(A,{children:x?D==="application/pdf"?e.jsx("iframe",{src:x,style:{width:"100%",height:"500px",border:"none"}}):e.jsx("iframe",{src:`https://view.officeapps.live.com/op/embed.aspx?src=https://hr4.axleshift.com/uploads/${N}`,style:{width:"100%",height:"500px",border:"none"}}):e.jsx("p",{children:"No preview available."})}),e.jsx(P,{children:e.jsx(h,{color:"secondary",onClick:()=>n(!1),children:"Close"})})]})]})};export{J as default};
