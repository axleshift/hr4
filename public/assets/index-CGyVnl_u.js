import{r as d,j as e}from"./index-BYbowjwR.js";import{a as _}from"./axios-CCb-kr4I.js";import{C as M,a as q}from"./CRow-wLY68JCV.js";import{C as D,a as A}from"./CCardBody-DXLfTEI_.js";import{C as E}from"./CCardHeader-DkQ0upOL.js";import{a as m}from"./index.esm-CzwThiwX.js";import{C as I,a as $,b as k,c as B,d as L}from"./CModalTitle-C4hISM48.js";import{C as N}from"./CForm-BxdyN4O8.js";import{C as l}from"./CFormLabel-BiVGQPK8.js";import{C as c}from"./CFormInput-BAZphurG.js";import{C as H,a as P,b as y,c as i,d as R}from"./CTable-CEFGjTE_.js";import{a as O}from"./DefaultLayout-CFmovriz.js";import"./CFormControlWrapper-Bq2dx5A0.js";import"./CFormControlValidation-Bgf7a4rJ.js";import"./cil-user-Dlmw-Gem.js";const ne=()=>{const[T,h]=d.useState(!1),[x,v]=d.useState([]),[a,u]=d.useState({training_class:"",agenda:"",location:"",schedule:"",start_time:"",end_time:""});d.useEffect(()=>{g()},[]);const g=async()=>{try{const s=await _.get("http://localhost:8000/api/training");v(s.data.data)}catch(s){console.error("Error fetching trainings:",s)}},o=s=>{const{name:t,value:n}=s.target;u({...a,[t]:n})},b=async s=>{s.preventDefault();try{await _.post("http://localhost:8000/api/training",a),h(!1),g(),u({training_class:"",agenda:"",location:"",schedule:"",start_time:"",end_time:""})}catch(t){console.error("Error adding training:",t)}},S=x.filter((s,t,n)=>t===n.findIndex(r=>r.training_class===s.training_class)),w=x.filter((s,t,n)=>t===n.findIndex(r=>r.agenda===s.agenda)),j=(s,t,n)=>{const r=new Date,C=new Date(`${s}T${t}`),f=new Date(`${s}T${n}`);return r<C?"Pending":r<=f?"Ongoing":"Complete"},p=s=>{const[t,n]=s.split(":"),r=parseInt(t,10),C=r>=12?"PM":"AM";return`${r%12||12}:${n} ${C}`},[F]=d.useState(new Date);return d.useEffect(()=>{const s=setInterval(()=>{F(new Date)},1e3);return()=>clearInterval(s)},[]),e.jsx(M,{children:e.jsx(q,{xs:12,children:e.jsxs(D,{className:"mb-4",children:[e.jsxs(E,{children:[e.jsx("strong",{children:"Training Schedule"}),e.jsxs("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:[e.jsx(m,{color:"primary",onClick:()=>h(!0),children:"Add Stuff"}),e.jsxs(I,{alignment:"center",backdrop:"static",size:"lg",visible:T,onClose:()=>h(!1),children:[e.jsx($,{children:e.jsx(k,{children:"Add Stuff"})}),e.jsx(B,{children:e.jsxs(N,{onSubmit:b,children:[e.jsx(l,{htmlFor:"training_class",children:"Training Class"}),e.jsx(c,{type:"text",id:"training_class",name:"training_class",value:a.training_class,onChange:o,required:!0}),e.jsx("div",{children:S.map(s=>e.jsx(m,{color:"secondary",variant:"outline",className:"me-2",onClick:()=>u({...a,training_class:s.training_class}),children:s.training_class},s.id))}),e.jsx(l,{htmlFor:"agenda",children:"Type of Agenda"}),e.jsx(c,{type:"text",id:"agenda",name:"agenda",value:a.agenda,onChange:o,required:!0}),e.jsx("div",{children:w.map(s=>e.jsx(m,{color:"secondary",variant:"outline",className:"me-2",onClick:()=>u({...a,agenda:s.agenda}),children:s.agenda},s.id))}),e.jsx(l,{htmlFor:"location",children:"Location / Mode"}),e.jsx(c,{type:"text",id:"location",name:"location",value:a.location,onChange:o,required:!0}),e.jsx(l,{htmlFor:"schedule",children:"Schedule"}),e.jsx(c,{type:"date",id:"schedule",name:"schedule",value:a.schedule,onChange:o,required:!0}),e.jsx(l,{htmlFor:"start_time",children:"Start Time"}),e.jsx(c,{type:"time",id:"start_time",name:"start_time",value:a.start_time,onChange:o,required:!0}),e.jsx(l,{htmlFor:"end_time",children:"End Time"}),e.jsx(c,{type:"time",id:"end_time",name:"end_time",value:a.end_time,onChange:o,required:!0}),e.jsxs(L,{children:[e.jsx(m,{color:"secondary",onClick:()=>h(!1),children:"Cancel"}),e.jsx(m,{color:"primary",type:"submit",children:"Add Module"})]})]})})]})]})]}),e.jsx(A,{children:e.jsxs(H,{children:[e.jsx(P,{children:e.jsxs(y,{children:[e.jsx(i,{children:"Training Class"}),e.jsx(i,{children:"Agenda"}),e.jsx(i,{children:"Location"}),e.jsx(i,{children:"Schedule"}),e.jsx(i,{}),e.jsx(i,{}),e.jsx(i,{children:"Status"})]})}),e.jsx(R,{children:x.map(s=>e.jsxs(y,{children:[e.jsx("td",{children:s.training_class}),e.jsx("td",{children:s.agenda}),e.jsx("td",{children:s.location}),e.jsx("td",{children:s.schedule}),e.jsx("td",{children:p(s.start_time)}),e.jsx("td",{children:p(s.end_time)}),e.jsx(O,{color:j(s.schedule,s.start_time,s.end_time)==="Pending"?"warning":j(s.schedule,s.start_time,s.end_time)==="Ongoing"?"info":"success",className:"ms-2",children:j(s.schedule,s.start_time,s.end_time)})]},s.id))})]})})]})})})};export{ne as default};
