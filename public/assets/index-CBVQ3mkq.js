import{r as a,j as e,h as m}from"./index-BUXXBBh4.js";import{C as D,a as L}from"./CRow-CPLsGPAS.js";import{C as A,a as H}from"./CCardBody-zz9evoFN.js";import{C as N}from"./CCardHeader-f7ClLulm.js";import{a as C,c as n}from"./index.esm-Duu94-hx.js";import{C as k,a as I,b as v,c as t,d as R}from"./CTable-B03euccP.js";import{e as O,a as X,b as z,c as V,d as G}from"./DefaultLayout-BTrlQ2sq.js";import{C as J}from"./CModalTitle-xfLH7bON.js";import{C as K}from"./CForm-DNPnKAFD.js";import{C as T}from"./CFormSelect-BNHIhl2w.js";import{C as h}from"./CFormInput-CMHhaUPh.js";import"./CCloseButton-RQYHWyeb.js";import"./cil-user-Ddrdy7PS.js";const de=()=>{const[y,l]=a.useState(!1),[S,b]=a.useState([]),[s,u]=a.useState({event_title:"",event_location:"",schedule:"",start_time:"",end_time:"",program_id:"",course_id:""}),[F,w]=a.useState([]),[E,P]=a.useState([]),[x,M]=a.useState(""),$=async()=>{try{const r=await m.get("/api/programs");w(r.data.data)}catch(r){console.error("Error fetching programs:",r)}},q=async()=>{if(x)try{const r=await m.get(`/api/courses?program_id=${x}`);P(r.data.data)}catch(r){console.error("Error fetching courses:",r)}},g=async()=>{try{const r=await m.get("/training");b(r.data.data||[])}catch(r){console.error("Error fetching trainings:",r)}};a.useEffect(()=>{$(),g()},[]),a.useEffect(()=>{q()},[x]);const i=r=>{const{name:o,value:d}=r.target;u({...s,[o]:d})},B=async r=>{r.preventDefault();try{await m.post("/training",s),l(!1),g(),u({event_title:"",event_location:"",schedule:"",start_time:"",end_time:"",program_id:"",course_id:""})}catch(o){console.error("Error adding training:",o)}},j=(r,o,d)=>{const c=new Date,p=new Date(`${r}T${o}`),f=new Date(`${r}T${d}`);return c<p?"Pending":c<=f?"Ongoing":"Complete"},_=r=>{const[o,d]=r.split(":"),c=parseInt(o,10),p=c>=12?"PM":"AM";return`${c%12||12}:${d} ${p}`};return e.jsxs(D,{children:[e.jsx(L,{xs:12,children:e.jsxs(A,{className:"mb-4",children:[e.jsxs(N,{children:[e.jsx("strong",{children:"Training Schedule"}),e.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:e.jsx(C,{color:"primary",onClick:()=>l(!0),children:"Add Training"})})]}),e.jsx(H,{children:e.jsxs(k,{children:[e.jsx(I,{children:e.jsxs(v,{children:[e.jsx(t,{children:"Program"}),e.jsx(t,{children:"Course"}),e.jsx(t,{children:"Location"}),e.jsx(t,{children:"Schedule"}),e.jsx(t,{children:"Start Time"}),e.jsx(t,{children:"End Time"}),e.jsx(t,{children:"Status"})]})}),e.jsx(R,{children:S.map(r=>e.jsxs(v,{children:[e.jsx(t,{children:r.program_name}),e.jsx(t,{children:r.course_name}),e.jsx(t,{children:r.event_location}),e.jsx(t,{children:r.schedule}),e.jsx(t,{children:_(r.start_time)}),e.jsx(t,{children:_(r.end_time)}),e.jsx(t,{children:e.jsx(O,{color:j(r.schedule,r.start_time,r.end_time)==="Pending"?"warning":j(r.schedule,r.start_time,r.end_time)==="Ongoing"?"info":"success",className:"ms-2",children:j(r.schedule,r.start_time,r.end_time)})})]},r.id))})]})})]})}),e.jsxs(X,{alignment:"center",backdrop:"static",size:"lg",visible:y,onClose:()=>l(!1),children:[e.jsx(z,{children:e.jsx(J,{children:"Add Training"})}),e.jsx(V,{children:e.jsxs(K,{onSubmit:B,children:[e.jsx(n,{htmlFor:"program_id",children:"Training Program"}),e.jsxs(T,{id:"program_id",name:"program_id",value:s.program_id,onChange:r=>{u({...s,program_id:r.target.value}),M(r.target.value)},required:!0,children:[e.jsx("option",{value:"",children:"Select Program"}),F.map(r=>e.jsx("option",{value:r.id,children:r.title},r.id))]}),e.jsx(n,{htmlFor:"course_id",children:"Course Name"}),e.jsxs(T,{id:"course_id",name:"course_id",value:s.course_id,onChange:i,required:!0,children:[e.jsx("option",{value:"",children:"Select Course"}),E.map(r=>e.jsx("option",{value:r.id,children:r.title},r.id))]}),e.jsx(n,{htmlFor:"event_location",children:"Event Location / Mode"}),e.jsx(h,{type:"text",id:"event_location",name:"event_location",value:s.event_location,onChange:i,required:!0}),e.jsx(n,{htmlFor:"schedule",children:"Schedule"}),e.jsx(h,{type:"date",id:"schedule",name:"schedule",value:s.schedule,onChange:i,required:!0}),e.jsx(n,{htmlFor:"start_time",children:"Start Time"}),e.jsx(h,{type:"time",id:"start_time",name:"start_time",value:s.start_time,onChange:i,required:!0}),e.jsx(n,{htmlFor:"end_time",children:"End Time"}),e.jsx(h,{type:"time",id:"end_time",name:"end_time",value:s.end_time,onChange:i,required:!0}),e.jsxs(G,{children:[e.jsx(C,{color:"secondary",onClick:()=>l(!1),children:"Cancel"}),e.jsx(C,{color:"primary",type:"submit",children:"Add Training"})]})]})})]})]})};export{de as default};
