import{r as o,j as e}from"./index-DuD-OOiq.js";import{a as _}from"./axios-upsvKRUO.js";import{C as M,a as q}from"./CRow-CKa_Ahj9.js";import{C as D,a as E}from"./CCardBody-DWgCZHkF.js";import{C as A}from"./CCardHeader-DKN5mD2A.js";import{a as d}from"./index.esm-yZGlwvod.js";import{C as I,a as $,b as k,c as B,d as L}from"./CModalTitle-DJ0T4zoJ.js";import{C as N}from"./CForm-DteMFFYq.js";import{a as c,C as m}from"./CFormInput-BU8Mrb6H.js";import{C as P,a as H,b as T,c as a,d as R}from"./CTable-B554b4y8.js";import{C as O}from"./DefaultLayout-CVTAE6H7.js";import"./js.cookie-Cz0CWeBA.js";import"./cil-user-Ddrdy7PS.js";const te=()=>{const[y,h]=o.useState(!1),[x,v]=o.useState([]),[n,u]=o.useState({training_class:"",agenda:"",location:"",schedule:"",start_time:"",end_time:""});o.useEffect(()=>{g()},[]);const g=async()=>{try{const s=await _.get("http://localhost:8000/api/training");v(s.data.data)}catch(s){console.error("Error fetching trainings:",s)}},l=s=>{const{name:t,value:r}=s.target;u({...n,[t]:r})},b=async s=>{s.preventDefault();try{await _.post("http://localhost:8000/api/training",n),h(!1),g(),u({training_class:"",agenda:"",location:"",schedule:"",start_time:"",end_time:""})}catch(t){console.error("Error adding training:",t)}},S=x.filter((s,t,r)=>t===r.findIndex(i=>i.training_class===s.training_class)),w=x.filter((s,t,r)=>t===r.findIndex(i=>i.agenda===s.agenda)),j=(s,t,r)=>{const i=new Date,C=new Date(`${s}T${t}`),f=new Date(`${s}T${r}`);return i<C?"Pending":i<=f?"Ongoing":"Complete"},p=s=>{const[t,r]=s.split(":"),i=parseInt(t,10),C=i>=12?"PM":"AM";return`${i%12||12}:${r} ${C}`},[V,F]=o.useState(new Date);return o.useEffect(()=>{const s=setInterval(()=>{F(new Date)},1e3);return()=>clearInterval(s)},[]),e.jsx(M,{children:e.jsx(q,{xs:12,children:e.jsxs(D,{className:"mb-4",children:[e.jsxs(A,{children:[e.jsx("strong",{children:"Training Schedule"}),e.jsxs("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:[e.jsx(d,{color:"primary",onClick:()=>h(!0),children:"Add Stuff"}),e.jsxs(I,{alignment:"center",backdrop:"static",size:"lg",visible:y,onClose:()=>h(!1),children:[e.jsx($,{children:e.jsx(k,{children:"Add Stuff"})}),e.jsx(B,{children:e.jsxs(N,{onSubmit:b,children:[e.jsx(c,{htmlFor:"training_class",children:"Training Class"}),e.jsx(m,{type:"text",id:"training_class",name:"training_class",value:n.training_class,onChange:l,required:!0}),e.jsx("div",{children:S.map(s=>e.jsx(d,{color:"secondary",variant:"outline",className:"me-2",onClick:()=>u({...n,training_class:s.training_class}),children:s.training_class},s.id))}),e.jsx(c,{htmlFor:"agenda",children:"Type of Agenda"}),e.jsx(m,{type:"text",id:"agenda",name:"agenda",value:n.agenda,onChange:l,required:!0}),e.jsx("div",{children:w.map(s=>e.jsx(d,{color:"secondary",variant:"outline",className:"me-2",onClick:()=>u({...n,agenda:s.agenda}),children:s.agenda},s.id))}),e.jsx(c,{htmlFor:"location",children:"Location / Mode"}),e.jsx(m,{type:"text",id:"location",name:"location",value:n.location,onChange:l,required:!0}),e.jsx(c,{htmlFor:"schedule",children:"Schedule"}),e.jsx(m,{type:"date",id:"schedule",name:"schedule",value:n.schedule,onChange:l,required:!0}),e.jsx(c,{htmlFor:"start_time",children:"Start Time"}),e.jsx(m,{type:"time",id:"start_time",name:"start_time",value:n.start_time,onChange:l,required:!0}),e.jsx(c,{htmlFor:"end_time",children:"End Time"}),e.jsx(m,{type:"time",id:"end_time",name:"end_time",value:n.end_time,onChange:l,required:!0}),e.jsxs(L,{children:[e.jsx(d,{color:"secondary",onClick:()=>h(!1),children:"Cancel"}),e.jsx(d,{color:"primary",type:"submit",children:"Add Module"})]})]})})]})]})]}),e.jsx(E,{children:e.jsxs(P,{children:[e.jsx(H,{children:e.jsxs(T,{children:[e.jsx(a,{children:"Training Class"}),e.jsx(a,{children:"Agenda"}),e.jsx(a,{children:"Location"}),e.jsx(a,{children:"Schedule"}),e.jsx(a,{children:"Start Time"}),e.jsx(a,{children:"End Time"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Participants"})]})}),e.jsx(R,{children:x.map(s=>e.jsxs(T,{children:[e.jsx(a,{children:s.training_class}),e.jsx(a,{children:s.agenda}),e.jsx(a,{children:s.location}),e.jsx(a,{children:s.schedule}),e.jsx(a,{children:p(s.start_time)}),e.jsx(a,{children:p(s.end_time)}),e.jsx(a,{children:e.jsx(O,{color:j(s.schedule,s.start_time,s.end_time)==="Pending"?"warning":j(s.schedule,s.start_time,s.end_time)==="Ongoing"?"info":"success",className:"ms-2",children:j(s.schedule,s.start_time,s.end_time)})}),e.jsx(a,{children:e.jsx(d,{color:"primary",variant:"outline",children:"View Participants"})})]},s.id))})]})})]})})})};export{te as default};
