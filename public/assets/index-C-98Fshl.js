import{r as l,_ as R,R as g,a as N,c as K,P as f,j as r,q as _}from"./index-C9RTi7Ip.js";import{C as T,a as S}from"./CRow-aj9SuTEC.js";import{C as le,a as ce}from"./CCardBody-DE1QHA1i.js";import{C as de}from"./CCardHeader-CWLXVibN.js";import{a as P,c as I,d as L}from"./index.esm-zCJJszgA.js";import{_ as ue,f as pe,a as me,T as fe,u as he}from"./CCloseButton-DsUxiXbo.js";import{C as ve,a as Ce,b as X,c as D,d as xe,e as H}from"./CTable-B0KuQD7x.js";import{a as Y,b as Z,c as ee,d as se,e as re}from"./DefaultLayout-DfIumDWm.js";import{C as ae}from"./cil-user-CQHCqWdj.js";import{C as ne}from"./CFormTextarea-C_2kcGf4.js";var ie=l.createContext({}),z=l.forwardRef(function(e,t){var d=e.children,s=e.activeItemKey,o=e.alwaysOpen,c=o===void 0?!1:o,u=e.className,a=e.flush,i=R(e,["children","activeItemKey","alwaysOpen","className","flush"]),n=l.useState(s),h=n[0],v=n[1];return g.createElement("div",N({className:K("accordion",{"accordion-flush":a},u)},i,{ref:t}),g.createElement(ie.Provider,{value:{_activeItemKey:h,alwaysOpen:c,setActiveKey:v}},d))});z.propTypes={alwaysOpen:f.bool,activeItemKey:f.oneOfType([f.number,f.string]),children:f.node,className:f.string,flush:f.bool};z.displayName="CAccordion";var M=l.createContext({}),W=l.forwardRef(function(e,t){var d=e.children,s=e.className,o=e.id,c=e.itemKey,u=R(e,["children","className","id","itemKey"]),a=o??l.useId(),i=l.useRef(c??a),n=l.useContext(ie),h=n._activeItemKey,v=n.alwaysOpen,C=n.setActiveKey,x=l.useState(h===i.current),j=x[0],E=x[1];return l.useEffect(function(){!v&&j&&C(i.current)},[j]),l.useEffect(function(){E(h===i.current)},[h]),g.createElement("div",N({className:K("accordion-item",s)},u,{ref:t}),g.createElement(M.Provider,{value:{id:a,setVisible:E,visible:j}},d))});W.propTypes={children:f.node,className:f.string,itemKey:f.oneOfType([f.number,f.string])};W.displayName="CAccordionItem";function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var d=arguments[t];for(var s in d)({}).hasOwnProperty.call(d,s)&&(e[s]=d[s])}return e},k.apply(null,arguments)}function ge(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function je(e,t){e.classList?e.classList.add(t):ge(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function te(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Ne(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=te(e.className,t):e.setAttribute("class",te(e.className&&e.className.baseVal||"",t))}var Ee=function(t,d){return t&&d&&d.split(" ").forEach(function(s){return je(t,s)})},V=function(t,d){return t&&d&&d.split(" ").forEach(function(s){return Ne(t,s)})},q=function(e){ue(t,e);function t(){for(var s,o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return s=e.call.apply(e,[this].concat(c))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(a,i){var n=s.resolveArguments(a,i),h=n[0],v=n[1];s.removeClasses(h,"exit"),s.addClass(h,v?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(a,i)},s.onEntering=function(a,i){var n=s.resolveArguments(a,i),h=n[0],v=n[1],C=v?"appear":"enter";s.addClass(h,C,"active"),s.props.onEntering&&s.props.onEntering(a,i)},s.onEntered=function(a,i){var n=s.resolveArguments(a,i),h=n[0],v=n[1],C=v?"appear":"enter";s.removeClasses(h,C),s.addClass(h,C,"done"),s.props.onEntered&&s.props.onEntered(a,i)},s.onExit=function(a){var i=s.resolveArguments(a),n=i[0];s.removeClasses(n,"appear"),s.removeClasses(n,"enter"),s.addClass(n,"exit","base"),s.props.onExit&&s.props.onExit(a)},s.onExiting=function(a){var i=s.resolveArguments(a),n=i[0];s.addClass(n,"exit","active"),s.props.onExiting&&s.props.onExiting(a)},s.onExited=function(a){var i=s.resolveArguments(a),n=i[0];s.removeClasses(n,"exit"),s.addClass(n,"exit","done"),s.props.onExited&&s.props.onExited(a)},s.resolveArguments=function(a,i){return s.props.nodeRef?[s.props.nodeRef.current,a]:[a,i]},s.getClassNames=function(a){var i=s.props.classNames,n=typeof i=="string",h=n&&i?i+"-":"",v=n?""+h+a:i[a],C=n?v+"-active":i[a+"Active"],x=n?v+"-done":i[a+"Done"];return{baseClassName:v,activeClassName:C,doneClassName:x}},s}var d=t.prototype;return d.addClass=function(o,c,u){var a=this.getClassNames(c)[u+"ClassName"],i=this.getClassNames("enter"),n=i.doneClassName;c==="appear"&&u==="done"&&n&&(a+=" "+n),u==="active"&&o&&pe(o),a&&(this.appliedClasses[c][u]=a,Ee(o,a))},d.removeClasses=function(o,c){var u=this.appliedClasses[c],a=u.base,i=u.active,n=u.done;this.appliedClasses[c]={},a&&V(o,a),i&&V(o,i),n&&V(o,n)},d.render=function(){var o=this.props;o.classNames;var c=me(o,["classNames"]);return g.createElement(fe,k({},c,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(g.Component);q.defaultProps={classNames:""};q.propTypes={};var U=l.forwardRef(function(e,t){var d=e.children,s=e.className,o=e.horizontal,c=e.onHide,u=e.onShow,a=e.visible,i=R(e,["children","className","horizontal","onHide","onShow","visible"]),n=l.useRef(null),h=he(t,n),v=l.useState(),C=v[0],x=v[1],j=l.useState(),E=j[0],y=j[1],b=function(){if(u&&u(),o){n.current&&y(n.current.scrollWidth);return}n.current&&x(n.current.scrollHeight)},O=function(){if(o){y(0);return}x(0)},A=function(){if(o){n.current&&y(n.current.scrollWidth);return}n.current&&x(n.current.scrollHeight)},$=function(){if(c&&c(),o){y(0);return}x(0)},F=function(){if(o){y(0);return}x(0)};return g.createElement(q,{in:a,nodeRef:n,onEntering:b,onEntered:O,onExit:A,onExiting:$,onExited:F,timeout:350},function(w){var p=C===0?null:{height:C},m=E===0?null:{width:E};return g.createElement("div",N({className:K(s,{"collapse-horizontal":o,collapsing:w==="entering"||w==="exiting","collapse show":w==="entered",collapse:w==="exited"}),style:N(N({},p),m)},i,{ref:h}),d)})});U.propTypes={children:f.node,className:f.string,horizontal:f.bool,onHide:f.func,onShow:f.func,visible:f.bool};U.displayName="CCollapse";var G=l.forwardRef(function(e,t){var d=e.children,s=e.className,o=R(e,["children","className"]),c=l.useContext(M),u=c.id,a=c.visible;return g.createElement(U,{className:"accordion-collapse",id:u,visible:a},g.createElement("div",N({className:K("accordion-body",s)},o,{ref:t}),d))});G.propTypes={children:f.node,className:f.string};G.displayName="CAccordionBody";var J=l.forwardRef(function(e,t){var d=e.children,s=e.className,o=R(e,["children","className"]),c=l.useContext(M),u=c.id,a=c.visible,i=c.setVisible;return g.createElement("button",N({type:"button",className:K("accordion-button",{collapsed:!a},s),"aria-controls":u,"aria-expanded":a,onClick:function(){return i(!a)}},o,{ref:t}),d)});J.propTypes={children:f.node,className:f.string};J.displayName="CAccordionButton";var Q=l.forwardRef(function(e,t){var d=e.children,s=e.className,o=R(e,["children","className"]);return g.createElement("div",N({className:K("accordion-header",s)},o,{ref:t}),g.createElement(J,null,d))});Q.propTypes={children:f.node,className:f.string};Q.displayName="CAccordionHeader";const _e=()=>{const[e,t]=l.useState([]),[d,s]=l.useState([]),[o,c]=l.useState(""),[u,a]=l.useState(""),[i,n]=l.useState(""),[h,v]=l.useState(""),[C,x]=l.useState(null),[j,E]=l.useState(null),[y,b]=l.useState(!1),[O,A]=l.useState(!1);l.useEffect(()=>{(async()=>{try{const m=await _.get("/api/programs");t(m.data.data)}catch(m){console.error("Error fetching programs:",m)}})()},[]);const $=async p=>{try{const m=await _.get(`/api/courses?program_id=${p}`);s(m.data.data)}catch(m){console.error("Error fetching courses:",m)}},F=async()=>{try{const p=await _.post("/api/programs",{title:o,description:u});t(m=>[...m,p.data.data]),c(""),a(""),b(!1)}catch(p){console.error("Error adding program:",p)}},w=async p=>{p.preventDefault();const m=new FormData;m.append("title",i),m.append("description",h),m.append("program_id",j),C&&m.append("file",C);try{const B=await _.post("/api/courses",m,{headers:{"Content-Type":"multipart/form-data"}});s(oe=>[...oe,B.data]),A(!1),n(""),v(""),x(null)}catch(B){console.error("Error saving course:",B)}};return r.jsxs(T,{children:[r.jsx(S,{xs:12,children:r.jsxs(le,{className:"mb-4",children:[r.jsxs(de,{children:[r.jsx("strong",{children:"List of Programs"}),r.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:r.jsx(P,{color:"primary",onClick:()=>b(!0),children:"Add Program"})})]}),r.jsx(ce,{children:r.jsx(z,{alwaysOpen:!0,children:e.map(p=>r.jsxs(W,{children:[r.jsx(Q,{onClick:()=>{$(p.id)},children:p.title}),r.jsxs(G,{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Description:"})," ",p.description]}),r.jsx(P,{color:"primary",onClick:()=>{E(p.id),A(!0)},children:"Add Course"}),r.jsxs(ve,{striped:!0,className:"mt-3",children:[r.jsx(Ce,{children:r.jsxs(X,{children:[r.jsx(D,{children:"Course Title"}),r.jsx(D,{children:"Description"}),r.jsx(D,{children:"File"}),r.jsx(D,{children:"Actions"})]})}),r.jsx(xe,{children:d.filter(m=>m.program_id===p.id).map(m=>r.jsxs(X,{children:[r.jsx(H,{children:m.title}),r.jsx(H,{children:m.description}),r.jsx(H,{children:m.file_path?r.jsx("a",{href:m.file_path,target:"_blank",rel:"noopener noreferrer",children:m.file_name||"Download"}):r.jsx("span",{children:"No File"})}),r.jsx(H,{})]},m.id))})]})]})]},p.id))})})]})}),r.jsxs(Y,{size:"lg",visible:y,onClose:()=>b(!1),children:[r.jsx(Z,{children:r.jsx(ee,{children:"Add Program"})}),r.jsx(se,{children:r.jsxs(ae,{children:[r.jsx(T,{className:"mb-3",children:r.jsxs(S,{md:12,children:[r.jsx(I,{children:"Program Title"}),r.jsx(L,{value:o,onChange:p=>c(p.target.value)})]})}),r.jsx(T,{className:"mb-3",children:r.jsxs(S,{md:12,children:[r.jsx(I,{children:"Program Description"}),r.jsx(ne,{value:u,onChange:p=>a(p.target.value)})]})})]})}),r.jsxs(re,{children:[r.jsx(P,{color:"secondary",onClick:()=>b(!1),children:"Close"}),r.jsx(P,{color:"primary",onClick:F,children:"Save Program"})]})]}),r.jsxs(Y,{size:"lg",visible:O,onClose:()=>A(!1),children:[r.jsx(Z,{children:r.jsx(ee,{children:"Add Course"})}),r.jsx(se,{children:r.jsxs(ae,{children:[r.jsx(T,{className:"mb-3",children:r.jsxs(S,{md:12,children:[r.jsx(I,{children:"Course Title"}),r.jsx(L,{value:i,onChange:p=>n(p.target.value)})]})}),r.jsx(T,{className:"mb-3",children:r.jsxs(S,{md:12,children:[r.jsx(I,{children:"Course Description"}),r.jsx(ne,{value:h,onChange:p=>v(p.target.value)})]})}),r.jsx(T,{className:"mb-3",children:r.jsxs(S,{md:12,children:[r.jsx(I,{children:"Upload File"}),r.jsx(L,{type:"file",onChange:p=>x(p.target.files[0])})]})})]})}),r.jsxs(re,{children:[r.jsx(P,{color:"secondary",onClick:()=>A(!1),children:"Close"}),r.jsx(P,{color:"primary",onClick:w,children:"Save Course"})]})]})]})};export{_e as default};
