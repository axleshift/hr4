import{r as i,q as m,j as e}from"./index-BrRd74aD.js";import{C as q,a as B}from"./CRow-WABe4rcm.js";import{C as D,a as L}from"./CCardBody-DBrydq19.js";import{C as A}from"./CCardHeader-D5wKkXKO.js";import{a as C,c as d,d as h}from"./index.esm-BN_tTaOO.js";import{C as H,a as k,b as v,c as s,d as R}from"./CTable-D9jOL5j5.js";import{C as I,a as N,b as O,c as X,d as z,e as V}from"./DefaultLayout-mbTJGR0H.js";import{C as G}from"./cil-user-Dhb4XOO3.js";import{C as T}from"./CFormSelect-MStjKtaz.js";import"./CCloseButton-C0H3St3b.js";const te=()=>{const[y,l]=i.useState(!1),[b,S]=i.useState([]),[w,F]=i.useState([]),[E,u]=i.useState([]),[a,x]=i.useState({event_title:"",event_location:"",schedule:"",start_time:"",end_time:"",program_id:"",course_id:""});i.useEffect(()=>{M(),_()},[]);const M=async()=>{try{const r=await m.get("/api/programs");F(r.data.data)}catch(r){console.error("Error fetching programs:",r)}},P=async r=>{if(!r){u([]);return}try{const t=await m.get(`/api/courses?program_id=${r}`);u(t.data.data)}catch(t){console.error("Error fetching courses:",t)}},_=async()=>{try{const r=await m.get("/training");S(r.data.data||[])}catch(r){console.error("Error fetching trainings:",r)}},o=r=>{const{name:t,value:n}=r.target;t==="program_id"?(x({...a,program_id:n,course_id:""}),P(n)):x({...a,[t]:n})},$=async r=>{r.preventDefault();try{await m.post("/training",a),l(!1),_(),x({event_title:"",event_location:"",schedule:"",start_time:"",end_time:"",program_id:"",course_id:""}),u([])}catch(t){console.error("Error adding training:",t)}},j=(r,t,n)=>{const c=new Date,p=new Date(`${r}T${t}`),f=new Date(`${r}T${n}`);return c<p?"Pending":c<=f?"Ongoing":"Complete"},g=r=>{const[t,n]=r.split(":"),c=parseInt(t,10),p=c>=12?"PM":"AM";return`${c%12||12}:${n} ${p}`};return e.jsxs(q,{children:[e.jsx(B,{xs:12,children:e.jsxs(D,{className:"mb-4",children:[e.jsxs(A,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Training Schedule"}),e.jsx(C,{color:"primary",onClick:()=>l(!0),children:"Add Training"})]}),e.jsx(L,{children:e.jsxs(H,{children:[e.jsx(k,{children:e.jsxs(v,{children:[e.jsx(s,{children:"Program"}),e.jsx(s,{children:"Course"}),e.jsx(s,{children:"Location"}),e.jsx(s,{children:"Schedule"}),e.jsx(s,{children:"Start Time"}),e.jsx(s,{children:"End Time"}),e.jsx(s,{children:"Status"})]})}),e.jsx(R,{children:b.map(r=>e.jsxs(v,{children:[e.jsx(s,{children:r.program_name}),e.jsx(s,{children:r.course_name}),e.jsx(s,{children:r.event_location}),e.jsx(s,{children:r.schedule}),e.jsx(s,{children:g(r.start_time)}),e.jsx(s,{children:g(r.end_time)}),e.jsx(s,{children:e.jsx(I,{color:j(r.schedule,r.start_time,r.end_time)==="Pending"?"warning":j(r.schedule,r.start_time,r.end_time)==="Ongoing"?"info":"success",children:j(r.schedule,r.start_time,r.end_time)})})]},r.id))})]})})]})}),e.jsxs(N,{alignment:"center",backdrop:"static",size:"lg",visible:y,onClose:()=>l(!1),children:[e.jsx(O,{children:e.jsx(X,{children:"Add Training"})}),e.jsx(z,{children:e.jsxs(G,{onSubmit:$,children:[e.jsx(d,{htmlFor:"program_id",children:"Training Program"}),e.jsxs(T,{id:"program_id",name:"program_id",value:a.program_id,onChange:o,required:!0,children:[e.jsx("option",{value:"",children:"Select Program"}),w.map(r=>e.jsx("option",{value:r.id,children:r.title},r.id))]}),e.jsx(d,{htmlFor:"course_id",children:"Course"}),e.jsxs(T,{id:"course_id",name:"course_id",value:a.course_id,onChange:o,required:!0,disabled:!a.program_id,children:[e.jsx("option",{value:"",children:"Select Course"}),E.map(r=>e.jsx("option",{value:r.id,children:r.title},r.id))]}),e.jsx(d,{htmlFor:"event_location",children:"Event Location / Mode"}),e.jsx(h,{type:"text",id:"event_location",name:"event_location",value:a.event_location,onChange:o,required:!0}),e.jsx(d,{htmlFor:"schedule",children:"Schedule"}),e.jsx(h,{type:"date",id:"schedule",name:"schedule",value:a.schedule,onChange:o,required:!0}),e.jsx(d,{htmlFor:"start_time",children:"Start Time"}),e.jsx(h,{type:"time",id:"start_time",name:"start_time",value:a.start_time,onChange:o,required:!0}),e.jsx(d,{htmlFor:"end_time",children:"End Time"}),e.jsx(h,{type:"time",id:"end_time",name:"end_time",value:a.end_time,onChange:o,required:!0}),e.jsxs(V,{children:[e.jsx(C,{color:"secondary",onClick:()=>l(!1),children:"Cancel"}),e.jsx(C,{color:"primary",type:"submit",children:"Add Training"})]})]})})]})]})};export{te as default};
