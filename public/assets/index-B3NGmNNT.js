import{a as l,_ as T,R as g,b as N,c as S,P as m,j as r}from"./index-D0ykVIBh.js";import{a as K}from"./index-t--hEgTQ.js";import{C as y,a as A}from"./CRow-C7kEkgmS.js";import{C as ie,a as oe}from"./CCardBody-Bvtd8o25.js";import{C as le}from"./CCardHeader-DzCRFb7L.js";import{a as w}from"./index.esm-CEZIJNA6.js";import{_ as ce,f as de,a as ue,T as pe,u as me}from"./DefaultLayout-CimxNCuU.js";import{C as he,a as fe,b as U,c as B,d as ve,e as L}from"./CTable-fJWtcUeL.js";import{C as X,a as Y,b as Z,c as ee}from"./CModalHeader-DDtLaalK.js";import{C as se}from"./CModalTitle-CxTbZa01.js";import{C as re}from"./CForm-Vi-ufwid.js";import{a as P,C as _}from"./CFormInput-BEWTXsMD.js";import{C as ae}from"./CFormTextarea-DNBO9X0f.js";import"./cil-user-Ddrdy7PS.js";var ne=l.createContext({}),z=l.forwardRef(function(s,n){var u=s.children,e=s.activeItemKey,o=s.alwaysOpen,d=o===void 0?!1:o,p=s.className,a=s.flush,i=T(s,["children","activeItemKey","alwaysOpen","className","flush"]),t=l.useState(e),h=t[0],f=t[1];return g.createElement("div",N({className:S("accordion",{"accordion-flush":a},p)},i,{ref:n}),g.createElement(ne.Provider,{value:{_activeItemKey:h,alwaysOpen:d,setActiveKey:f}},u))});z.propTypes={alwaysOpen:m.bool,activeItemKey:m.oneOfType([m.number,m.string]),children:m.node,className:m.string,flush:m.bool};z.displayName="CAccordion";var F=l.createContext({}),M=l.forwardRef(function(s,n){var u=s.children,e=s.className,o=s.id,d=s.itemKey,p=T(s,["children","className","id","itemKey"]),a=o??l.useId(),i=l.useRef(d??a),t=l.useContext(ne),h=t._activeItemKey,f=t.alwaysOpen,C=t.setActiveKey,x=l.useState(h===i.current),j=x[0],b=x[1];return l.useEffect(function(){!f&&j&&C(i.current)},[j]),l.useEffect(function(){b(h===i.current)},[h]),g.createElement("div",N({className:S("accordion-item",e)},p,{ref:n}),g.createElement(F.Provider,{value:{id:a,setVisible:b,visible:j}},u))});M.propTypes={children:m.node,className:m.string,itemKey:m.oneOfType([m.number,m.string])};M.displayName="CAccordionItem";function k(){return k=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var u=arguments[n];for(var e in u)({}).hasOwnProperty.call(u,e)&&(s[e]=u[e])}return s},k.apply(null,arguments)}function Ce(s,n){return s.classList?!!n&&s.classList.contains(n):(" "+(s.className.baseVal||s.className)+" ").indexOf(" "+n+" ")!==-1}function xe(s,n){s.classList?s.classList.add(n):Ce(s,n)||(typeof s.className=="string"?s.className=s.className+" "+n:s.setAttribute("class",(s.className&&s.className.baseVal||"")+" "+n))}function te(s,n){return s.replace(new RegExp("(^|\\s)"+n+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function ge(s,n){s.classList?s.classList.remove(n):typeof s.className=="string"?s.className=te(s.className,n):s.setAttribute("class",te(s.className&&s.className.baseVal||"",n))}var je=function(n,u){return n&&u&&u.split(" ").forEach(function(e){return xe(n,e)})},V=function(n,u){return n&&u&&u.split(" ").forEach(function(e){return ge(n,e)})},W=function(s){ce(n,s);function n(){for(var e,o=arguments.length,d=new Array(o),p=0;p<o;p++)d[p]=arguments[p];return e=s.call.apply(s,[this].concat(d))||this,e.appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(a,i){var t=e.resolveArguments(a,i),h=t[0],f=t[1];e.removeClasses(h,"exit"),e.addClass(h,f?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(a,i)},e.onEntering=function(a,i){var t=e.resolveArguments(a,i),h=t[0],f=t[1],C=f?"appear":"enter";e.addClass(h,C,"active"),e.props.onEntering&&e.props.onEntering(a,i)},e.onEntered=function(a,i){var t=e.resolveArguments(a,i),h=t[0],f=t[1],C=f?"appear":"enter";e.removeClasses(h,C),e.addClass(h,C,"done"),e.props.onEntered&&e.props.onEntered(a,i)},e.onExit=function(a){var i=e.resolveArguments(a),t=i[0];e.removeClasses(t,"appear"),e.removeClasses(t,"enter"),e.addClass(t,"exit","base"),e.props.onExit&&e.props.onExit(a)},e.onExiting=function(a){var i=e.resolveArguments(a),t=i[0];e.addClass(t,"exit","active"),e.props.onExiting&&e.props.onExiting(a)},e.onExited=function(a){var i=e.resolveArguments(a),t=i[0];e.removeClasses(t,"exit"),e.addClass(t,"exit","done"),e.props.onExited&&e.props.onExited(a)},e.resolveArguments=function(a,i){return e.props.nodeRef?[e.props.nodeRef.current,a]:[a,i]},e.getClassNames=function(a){var i=e.props.classNames,t=typeof i=="string",h=t&&i?i+"-":"",f=t?""+h+a:i[a],C=t?f+"-active":i[a+"Active"],x=t?f+"-done":i[a+"Done"];return{baseClassName:f,activeClassName:C,doneClassName:x}},e}var u=n.prototype;return u.addClass=function(o,d,p){var a=this.getClassNames(d)[p+"ClassName"],i=this.getClassNames("enter"),t=i.doneClassName;d==="appear"&&p==="done"&&t&&(a+=" "+t),p==="active"&&o&&de(o),a&&(this.appliedClasses[d][p]=a,je(o,a))},u.removeClasses=function(o,d){var p=this.appliedClasses[d],a=p.base,i=p.active,t=p.done;this.appliedClasses[d]={},a&&V(o,a),i&&V(o,i),t&&V(o,t)},u.render=function(){var o=this.props;o.classNames;var d=ue(o,["classNames"]);return g.createElement(pe,k({},d,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(g.Component);W.defaultProps={classNames:""};W.propTypes={};var q=l.forwardRef(function(s,n){var u=s.children,e=s.className,o=s.horizontal,d=s.onHide,p=s.onShow,a=s.visible,i=T(s,["children","className","horizontal","onHide","onShow","visible"]),t=l.useRef(null),h=me(n,t),f=l.useState(),C=f[0],x=f[1],j=l.useState(),b=j[0],E=j[1],D=function(){if(p&&p(),o){t.current&&E(t.current.scrollWidth);return}t.current&&x(t.current.scrollHeight)},R=function(){if(o){E(0);return}x(0)},I=function(){if(o){t.current&&E(t.current.scrollWidth);return}t.current&&x(t.current.scrollHeight)},H=function(){if(d&&d(),o){E(0);return}x(0)},O=function(){if(o){E(0);return}x(0)};return g.createElement(W,{in:a,nodeRef:t,onEntering:D,onEntered:R,onExit:I,onExiting:H,onExited:O,timeout:350},function(c){var v=C===0?null:{height:C},$=b===0?null:{width:b};return g.createElement("div",N({className:S(e,{"collapse-horizontal":o,collapsing:c==="entering"||c==="exiting","collapse show":c==="entered",collapse:c==="exited"}),style:N(N({},v),$)},i,{ref:h}),u)})});q.propTypes={children:m.node,className:m.string,horizontal:m.bool,onHide:m.func,onShow:m.func,visible:m.bool};q.displayName="CCollapse";var G=l.forwardRef(function(s,n){var u=s.children,e=s.className,o=T(s,["children","className"]),d=l.useContext(F),p=d.id,a=d.visible;return g.createElement(q,{className:"accordion-collapse",id:p,visible:a},g.createElement("div",N({className:S("accordion-body",e)},o,{ref:n}),u))});G.propTypes={children:m.node,className:m.string};G.displayName="CAccordionBody";var J=l.forwardRef(function(s,n){var u=s.children,e=s.className,o=T(s,["children","className"]),d=l.useContext(F),p=d.id,a=d.visible,i=d.setVisible;return g.createElement("button",N({type:"button",className:S("accordion-button",{collapsed:!a},e),"aria-controls":p,"aria-expanded":a,onClick:function(){return i(!a)}},o,{ref:n}),u)});J.propTypes={children:m.node,className:m.string};J.displayName="CAccordionButton";var Q=l.forwardRef(function(s,n){var u=s.children,e=s.className,o=T(s,["children","className"]);return g.createElement("div",N({className:S("accordion-header",e)},o,{ref:n}),g.createElement(J,null,u))});Q.propTypes={children:m.node,className:m.string};Q.displayName="CAccordionHeader";const Oe=()=>{const[s,n]=l.useState(!1),[u,e]=l.useState(!1),[o,d]=l.useState([]),[p,a]=l.useState([]),[i,t]=l.useState(null),[h,f]=l.useState(""),[C,x]=l.useState(""),[j,b]=l.useState(""),[E,D]=l.useState(""),[R,I]=l.useState("");l.useEffect(()=>{(async()=>{try{const v=await K.get("http://localhost:8000/api/programs");d(v.data.data)}catch(v){console.error("Error fetching programs:",v)}})()},[]),l.useEffect(()=>{(async()=>{try{const v=await K.get("http://localhost:8000/api/courses");console.log("Courses fetched:",v.data),a(v.data.data)}catch(v){console.error("Error fetching courses:",v)}})()},[]);const H=async()=>{try{const v=(await K.post("http://localhost:8000/api/programs",{title:h,description:C})).data.data;d($=>[...$,v]),f(""),x(""),n(!1)}catch(c){console.error("Error adding program:",c)}},O=async()=>{try{const c=await K.post("http://localhost:8000/api/courses",{title:j,description:E,duration:R,program_id:i});console.log("Course saved:",c.data),a([...p,c.data]),e(!1)}catch(c){console.error("Error saving course:",c)}};return r.jsxs(y,{children:[r.jsx(A,{xs:12,children:r.jsxs(ie,{className:"mb-4",children:[r.jsxs(le,{children:[r.jsx("strong",{children:"List of Programs"}),r.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:r.jsx(w,{color:"primary",onClick:()=>n(!0),children:"Add Program"})})]}),r.jsx(oe,{children:r.jsx(z,{alwaysOpen:!0,children:o.map(c=>r.jsxs(M,{children:[r.jsx(Q,{onClick:()=>{t(c.id)},children:c.title}),r.jsxs(G,{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Description:"})," ",c.description]}),r.jsx(w,{color:"primary",onClick:()=>{t(c.id),e(!0)},children:"Add Course"}),r.jsxs(he,{striped:!0,className:"mt-3",children:[r.jsx(fe,{children:r.jsxs(U,{children:[r.jsx(B,{children:"Title"}),r.jsx(B,{children:"Description"}),r.jsx(B,{children:"Duration"})]})}),r.jsx(ve,{children:p.filter(v=>v.program_id===c.id).map(v=>r.jsxs(U,{children:[r.jsx(L,{children:v.title}),r.jsx(L,{children:v.description}),r.jsx(L,{children:v.duration})]},v.id))})]})]})]},c.id))})})]})}),r.jsxs(X,{size:"xl",visible:s,onClose:()=>n(!1),children:[r.jsx(Y,{children:r.jsx(se,{children:"Add Program"})}),r.jsx(Z,{children:r.jsxs(re,{children:[r.jsx(y,{className:"mb-3",children:r.jsxs(A,{md:12,children:[r.jsx(P,{children:"Program Title"}),r.jsx(_,{value:h,onChange:c=>f(c.target.value)})]})}),r.jsx(y,{className:"mb-3",children:r.jsxs(A,{md:12,children:[r.jsx(P,{children:"Program Description"}),r.jsx(ae,{value:C,onChange:c=>x(c.target.value)})]})})]})}),r.jsxs(ee,{children:[r.jsx(w,{color:"secondary",onClick:()=>n(!1),children:"Close"}),r.jsx(w,{color:"primary",onClick:H,children:"Save Program"})]})]}),r.jsxs(X,{size:"xl",visible:u,onClose:()=>e(!1),children:[r.jsx(Y,{children:r.jsx(se,{children:"Add Course"})}),r.jsx(Z,{children:r.jsxs(re,{children:[r.jsx(y,{className:"mb-3",children:r.jsxs(A,{md:12,children:[r.jsx(P,{children:"Course Title"}),r.jsx(_,{value:j,onChange:c=>b(c.target.value)})]})}),r.jsx(y,{className:"mb-3",children:r.jsxs(A,{md:12,children:[r.jsx(P,{children:"Course Description"}),r.jsx(ae,{value:E,onChange:c=>D(c.target.value)})]})}),r.jsx(y,{className:"mb-3",children:r.jsxs(A,{md:12,children:[r.jsx(P,{children:"Course Duration"}),r.jsx(_,{value:R,onChange:c=>I(c.target.value)})]})})]})}),r.jsxs(ee,{children:[r.jsx(w,{color:"secondary",onClick:()=>e(!1),children:"Close"}),r.jsx(w,{color:"primary",onClick:O,children:"Save Course"})]})]})]})};export{Oe as default};
