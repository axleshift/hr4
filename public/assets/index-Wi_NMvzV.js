import{r as a,q as d,j as e}from"./index-CBKqAdzB.js";import{C as M,a as T}from"./CRow-DrXXkY8K.js";import{C as D,a as g}from"./CCardBody-ChrZxv36.js";import{C as E}from"./CCardHeader-DND0A7JS.js";import{C as S,a as B,b as h,c as i,d as _,e as o}from"./CTable-DZ1x_6jv.js";import{a as p}from"./index.esm-D6rlxlJm.js";import{a as k,b as H,d as N,e as P}from"./DefaultLayout-wNnwQ3Iq.js";import"./CCloseButton-CNMzN1aP.js";import"./cil-user-DWY24l7_.js";const U=()=>{const[x,m]=a.useState([]),[l,j]=a.useState(""),[C,f]=a.useState(""),[u,b]=a.useState(""),[w,t]=a.useState(!1);a.useEffect(()=>{y()},[]);const y=async()=>{try{const s=await d.get("/api/modules");m(s.data.data)}catch(s){console.error("Error fetching modules:",s)}},v=async s=>{try{const r=await d.get(`/api/modules/${s}/preview`);j(r.data.base64),f(r.data.mime_type),b(r.data.file_name),t(!0)}catch(r){console.error("Error fetching document preview:",r)}};return e.jsxs(M,{children:[e.jsx(T,{xs:12,children:e.jsxs(D,{className:"mb-4",children:[e.jsx(E,{children:e.jsx("strong",{children:"MODULES"})}),e.jsx(g,{children:e.jsxs(S,{striped:!0,hover:!0,children:[e.jsx(B,{children:e.jsxs(h,{children:[e.jsx(i,{children:"#"}),e.jsx(i,{children:"Title"}),e.jsx(i,{children:"Description"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(_,{children:x.map((s,r)=>{var n,c;return e.jsxs(h,{children:[e.jsx(i,{children:r+1}),e.jsx(o,{children:s.title}),e.jsx(o,{children:s.description}),e.jsx(o,{children:(((n=s.file_name)==null?void 0:n.endsWith(".docx"))||((c=s.file_name)==null?void 0:c.endsWith(".pdf")))&&e.jsx(p,{color:"info",onClick:()=>v(s.id),children:"View"})})]},r)})})]})})]})}),e.jsxs(k,{visible:w,onClose:()=>t(!1),children:[e.jsx(H,{children:"Document Preview"}),e.jsx(N,{children:l?C==="application/pdf"?e.jsx("embed",{src:l,type:"application/pdf",width:"100%",height:"500px"}):e.jsxs("p",{children:["DOCX preview is not supported inline. Please"," ",e.jsx("a",{href:`https://hr4.axleshift.com/uploads/${u}`,target:"_blank",rel:"noopener noreferrer",children:"click here to view the file"})," ","in a new tab."]}):e.jsx("p",{children:"No preview available."})}),e.jsx(P,{children:e.jsx(p,{color:"secondary",onClick:()=>t(!1),children:"Close"})})]})]})};export{U as default};
