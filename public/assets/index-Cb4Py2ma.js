import{r as d,_ as R,R as j,a as E,c as S,P as o,j as r,q}from"./index-CKNA1QEa.js";import{a as Y,b as Z,c as ee,d as se,e as re}from"./DefaultLayout-DjfufATx.js";import{C as ae}from"./cil-user-ZxPf1HT2.js";import{C as T,a as w}from"./CRow-CLuY_hva.js";import{c as _,d as L,a as y}from"./index.esm-D9r2noSw.js";import{C as ie}from"./CFormTextarea-Db-N4ckg.js";import{C as de,a as ue}from"./CCardBody-D2Ef3wX-.js";import{C as pe}from"./CCardHeader-PzKi27lK.js";import{_ as me,f as fe,a as he,T as ve,u as Ce}from"./CCloseButton-C6dzYQCc.js";import{C as ge,a as xe,b as ne,c as $,d as je,e as F}from"./CTable-CXG-y4iB.js";var oe=d.createContext({}),z=d.forwardRef(function(s,n){var u=s.children,e=s.activeItemKey,l=s.alwaysOpen,c=l===void 0?!1:l,p=s.className,a=s.flush,t=R(s,["children","activeItemKey","alwaysOpen","className","flush"]),i=d.useState(e),f=i[0],h=i[1];return j.createElement("div",E({className:S("accordion",{"accordion-flush":a},p)},t,{ref:n}),j.createElement(oe.Provider,{value:{_activeItemKey:f,alwaysOpen:c,setActiveKey:h}},u))});z.propTypes={alwaysOpen:o.bool,activeItemKey:o.oneOfType([o.number,o.string]),children:o.node,className:o.string,flush:o.bool};z.displayName="CAccordion";var M=d.createContext({}),W=d.forwardRef(function(s,n){var u=s.children,e=s.className,l=s.id,c=s.itemKey,p=R(s,["children","className","id","itemKey"]),a=l??d.useId(),t=d.useRef(c??a),i=d.useContext(oe),f=i._activeItemKey,h=i.alwaysOpen,g=i.setActiveKey,x=d.useState(f===t.current),N=x[0],C=x[1];return d.useEffect(function(){!h&&N&&g(t.current)},[N]),d.useEffect(function(){C(f===t.current)},[f]),j.createElement("div",E({className:S("accordion-item",e)},p,{ref:n}),j.createElement(M.Provider,{value:{id:a,setVisible:C,visible:N}},u))});W.propTypes={children:o.node,className:o.string,itemKey:o.oneOfType([o.number,o.string])};W.displayName="CAccordionItem";function V(){return V=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var u=arguments[n];for(var e in u)({}).hasOwnProperty.call(u,e)&&(s[e]=u[e])}return s},V.apply(null,arguments)}function Ne(s,n){return s.classList?!!n&&s.classList.contains(n):(" "+(s.className.baseVal||s.className)+" ").indexOf(" "+n+" ")!==-1}function Ee(s,n){s.classList?s.classList.add(n):Ne(s,n)||(typeof s.className=="string"?s.className=s.className+" "+n:s.setAttribute("class",(s.className&&s.className.baseVal||"")+" "+n))}function te(s,n){return s.replace(new RegExp("(^|\\s)"+n+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function be(s,n){s.classList?s.classList.remove(n):typeof s.className=="string"?s.className=te(s.className,n):s.setAttribute("class",te(s.className&&s.className.baseVal||"",n))}var ye=function(n,u){return n&&u&&u.split(" ").forEach(function(e){return Ee(n,e)})},k=function(n,u){return n&&u&&u.split(" ").forEach(function(e){return be(n,e)})},U=function(s){me(n,s);function n(){for(var e,l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];return e=s.call.apply(s,[this].concat(c))||this,e.appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(a,t){var i=e.resolveArguments(a,t),f=i[0],h=i[1];e.removeClasses(f,"exit"),e.addClass(f,h?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(a,t)},e.onEntering=function(a,t){var i=e.resolveArguments(a,t),f=i[0],h=i[1],g=h?"appear":"enter";e.addClass(f,g,"active"),e.props.onEntering&&e.props.onEntering(a,t)},e.onEntered=function(a,t){var i=e.resolveArguments(a,t),f=i[0],h=i[1],g=h?"appear":"enter";e.removeClasses(f,g),e.addClass(f,g,"done"),e.props.onEntered&&e.props.onEntered(a,t)},e.onExit=function(a){var t=e.resolveArguments(a),i=t[0];e.removeClasses(i,"appear"),e.removeClasses(i,"enter"),e.addClass(i,"exit","base"),e.props.onExit&&e.props.onExit(a)},e.onExiting=function(a){var t=e.resolveArguments(a),i=t[0];e.addClass(i,"exit","active"),e.props.onExiting&&e.props.onExiting(a)},e.onExited=function(a){var t=e.resolveArguments(a),i=t[0];e.removeClasses(i,"exit"),e.addClass(i,"exit","done"),e.props.onExited&&e.props.onExited(a)},e.resolveArguments=function(a,t){return e.props.nodeRef?[e.props.nodeRef.current,a]:[a,t]},e.getClassNames=function(a){var t=e.props.classNames,i=typeof t=="string",f=i&&t?t+"-":"",h=i?""+f+a:t[a],g=i?h+"-active":t[a+"Active"],x=i?h+"-done":t[a+"Done"];return{baseClassName:h,activeClassName:g,doneClassName:x}},e}var u=n.prototype;return u.addClass=function(l,c,p){var a=this.getClassNames(c)[p+"ClassName"],t=this.getClassNames("enter"),i=t.doneClassName;c==="appear"&&p==="done"&&i&&(a+=" "+i),p==="active"&&l&&fe(l),a&&(this.appliedClasses[c][p]=a,ye(l,a))},u.removeClasses=function(l,c){var p=this.appliedClasses[c],a=p.base,t=p.active,i=p.done;this.appliedClasses[c]={},a&&k(l,a),t&&k(l,t),i&&k(l,i)},u.render=function(){var l=this.props;l.classNames;var c=he(l,["classNames"]);return j.createElement(ve,V({},c,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(j.Component);U.defaultProps={classNames:""};U.propTypes={};var G=d.forwardRef(function(s,n){var u=s.children,e=s.className,l=s.horizontal,c=s.onHide,p=s.onShow,a=s.visible,t=R(s,["children","className","horizontal","onHide","onShow","visible"]),i=d.useRef(null),f=Ce(n,i),h=d.useState(),g=h[0],x=h[1],N=d.useState(),C=N[0],b=N[1],P=function(){if(p&&p(),l){i.current&&b(i.current.scrollWidth);return}i.current&&x(i.current.scrollHeight)},H=function(){if(l){b(0);return}x(0)},D=function(){if(l){i.current&&b(i.current.scrollWidth);return}i.current&&x(i.current.scrollHeight)},I=function(){if(c&&c(),l){b(0);return}x(0)},O=function(){if(l){b(0);return}x(0)};return j.createElement(U,{in:a,nodeRef:i,onEntering:P,onEntered:H,onExit:D,onExiting:I,onExited:O,timeout:350},function(A){var B=g===0?null:{height:g},v=C===0?null:{width:C};return j.createElement("div",E({className:S(e,{"collapse-horizontal":l,collapsing:A==="entering"||A==="exiting","collapse show":A==="entered",collapse:A==="exited"}),style:E(E({},B),v)},t,{ref:f}),u)})});G.propTypes={children:o.node,className:o.string,horizontal:o.bool,onHide:o.func,onShow:o.func,visible:o.bool};G.displayName="CCollapse";var J=d.forwardRef(function(s,n){var u=s.children,e=s.className,l=R(s,["children","className"]),c=d.useContext(M),p=c.id,a=c.visible;return j.createElement(G,{className:"accordion-collapse",id:p,visible:a},j.createElement("div",E({className:S("accordion-body",e)},l,{ref:n}),u))});J.propTypes={children:o.node,className:o.string};J.displayName="CAccordionBody";var Q=d.forwardRef(function(s,n){var u=s.children,e=s.className,l=R(s,["children","className"]),c=d.useContext(M),p=c.id,a=c.visible,t=c.setVisible;return j.createElement("button",E({type:"button",className:S("accordion-button",{collapsed:!a},e),"aria-controls":p,"aria-expanded":a,onClick:function(){return t(!a)}},l,{ref:n}),u)});Q.propTypes={children:o.node,className:o.string};Q.displayName="CAccordionButton";var X=d.forwardRef(function(s,n){var u=s.children,e=s.className,l=R(s,["children","className"]);return j.createElement("div",E({className:S("accordion-header",e)},l,{ref:n}),j.createElement(Q,null,u))});X.propTypes={children:o.node,className:o.string};X.displayName="CAccordionHeader";const le=({visibleProgram:s,setVisibleProgram:n,programTitle:u,setProgramTitle:e,programDescription:l,setProgramDescription:c,handleSaveProgram:p,visibleCourse:a,setVisibleCourse:t,courseTitle:i,setCourseTitle:f,courseDescription:h,setCourseDescription:g,setCourseFile:x,handleSaveCourse:N})=>r.jsxs(r.Fragment,{children:[r.jsxs(Y,{size:"lg",visible:s,onClose:()=>n(!1),children:[r.jsx(Z,{children:r.jsx(ee,{children:"Add Program"})}),r.jsx(se,{children:r.jsxs(ae,{children:[r.jsx(T,{className:"mb-3",children:r.jsxs(w,{md:12,children:[r.jsx(_,{children:"Program Title"}),r.jsx(L,{value:u,onChange:C=>e(C.target.value)})]})}),r.jsx(T,{className:"mb-3",children:r.jsxs(w,{md:12,children:[r.jsx(_,{children:"Program Description"}),r.jsx(ie,{value:l,onChange:C=>c(C.target.value)})]})})]})}),r.jsxs(re,{children:[r.jsx(y,{color:"secondary",onClick:()=>n(!1),children:"Close"}),r.jsx(y,{color:"primary",onClick:p,children:"Save Program"})]})]}),r.jsxs(Y,{size:"lg",visible:a,onClose:()=>t(!1),children:[r.jsx(Z,{children:r.jsx(ee,{children:"Add Course"})}),r.jsx(se,{children:r.jsxs(ae,{children:[r.jsx(T,{className:"mb-3",children:r.jsxs(w,{md:12,children:[r.jsx(_,{children:"Course Title"}),r.jsx(L,{value:i,onChange:C=>f(C.target.value)})]})}),r.jsx(T,{className:"mb-3",children:r.jsxs(w,{md:12,children:[r.jsx(_,{children:"Course Description"}),r.jsx(ie,{value:h,onChange:C=>g(C.target.value)})]})}),r.jsx(T,{className:"mb-3",children:r.jsxs(w,{md:12,children:[r.jsx(_,{children:"Upload File"}),r.jsx(L,{type:"file",onChange:C=>x(C.target.files[0])})]})})]})}),r.jsxs(re,{children:[r.jsx(y,{color:"secondary",onClick:()=>t(!1),children:"Close"}),r.jsx(y,{color:"primary",onClick:N,children:"Save Course"})]})]})]});le.propTypes={visibleProgram:o.bool.isRequired,setVisibleProgram:o.func.isRequired,programTitle:o.string.isRequired,setProgramTitle:o.func.isRequired,programDescription:o.string.isRequired,setProgramDescription:o.func.isRequired,handleSaveProgram:o.func.isRequired,visibleCourse:o.bool.isRequired,setVisibleCourse:o.func.isRequired,courseTitle:o.string.isRequired,setCourseTitle:o.func.isRequired,courseDescription:o.string.isRequired,setCourseDescription:o.func.isRequired,setCourseFile:o.func.isRequired,handleSaveCourse:o.func.isRequired};const $e=()=>{const[s,n]=d.useState([]),[u,e]=d.useState([]),[l,c]=d.useState(""),[p,a]=d.useState(""),[t,i]=d.useState(""),[f,h]=d.useState(""),[g,x]=d.useState(null),[N,C]=d.useState(null),[b,P]=d.useState(!1),[H,D]=d.useState(!1);d.useEffect(()=>{(async()=>{try{const m=await q.get("/api/programs");n(m.data.data)}catch(m){console.error("Error fetching programs:",m)}})()},[]);const I=async v=>{try{const m=await q.get(`/api/courses?program_id=${v}`);e(m.data.data)}catch(m){console.error("Error fetching courses:",m)}},O=async()=>{try{const v=await q.post("/api/programs",{title:l,description:p});n(m=>[...m,v.data.data]),c(""),a(""),P(!1)}catch(v){console.error("Error adding program:",v)}},A=async v=>{v.preventDefault();const m=new FormData;m.append("title",t),m.append("description",f),m.append("program_id",N),g&&m.append("file",g);try{const K=await q.post("/api/courses",m,{headers:{"Content-Type":"multipart/form-data"}});e(ce=>[...ce,K.data]),D(!1),i(""),h(""),x(null)}catch(K){console.error("Error saving course:",K)}},B=async v=>{try{await q.delete(`/api/courses/${v}`),e(m=>m.filter(K=>K.id!==v))}catch(m){console.error("Error deleting course:",m)}};return r.jsxs(T,{children:[r.jsx(w,{xs:12,children:r.jsxs(de,{className:"mb-4",children:[r.jsxs(pe,{children:[r.jsx("strong",{children:"List of Programs"}),r.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:r.jsx(y,{color:"primary",onClick:()=>P(!0),children:"Add Program"})})]}),r.jsx(ue,{children:r.jsx(z,{alwaysOpen:!0,children:s.map(v=>r.jsxs(W,{children:[r.jsx(X,{onClick:()=>{I(v.id)},children:v.title}),r.jsxs(J,{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Description:"})," ",v.description]}),r.jsx(y,{color:"primary",onClick:()=>{C(v.id),D(!0)},children:"Add Course"}),r.jsxs(ge,{striped:!0,className:"mt-3",children:[r.jsx(xe,{children:r.jsxs(ne,{children:[r.jsx($,{children:"Course Title"}),r.jsx($,{children:"Description"}),r.jsx($,{children:"File"}),r.jsx($,{children:"Actions"})]})}),r.jsx(je,{children:u.filter(m=>m.program_id===v.id).map(m=>r.jsxs(ne,{children:[r.jsx(F,{children:m.title}),r.jsx(F,{children:m.description}),r.jsx(F,{children:m.file_path?r.jsx("a",{href:m.file_path,target:"_blank",rel:"noopener noreferrer",children:m.file_name||"Download"}):r.jsx("span",{children:"No File"})}),r.jsx(F,{children:r.jsx(y,{color:"danger",onClick:()=>B(m.id),children:"Delete"})})]},m.id))})]})]})]},v.id))})})]})}),r.jsx(le,{visibleProgram:b,setVisibleProgram:P,programTitle:l,setProgramTitle:c,programDescription:p,setProgramDescription:a,handleSaveProgram:O,visibleCourse:H,setVisibleCourse:D,courseTitle:t,setCourseTitle:i,courseDescription:f,setCourseDescription:h,setCourseFile:x,handleSaveCourse:A})]})};export{$e as default};
