import{r as c,j as e,q as g,P as a}from"./index-BJTJUVD-.js";import{c as l,d as i,a as u,e as _}from"./index.esm-3a-wYmmU.js";import{a as F,b as v,c as E,d as M,e as R}from"./DefaultLayout-B2T39bsi.js";import{C as T}from"./cil-user-K4D3XDaa.js";import{C as S,a as q}from"./CRow-B0V97ulH.js";import{C as w,a as D}from"./CCardBody-BXA9SgDE.js";import{C as P}from"./CCardHeader-SSQBfJi1.js";import{c as A}from"./cil-user-plus-9sfVD_63.js";import{C as H,a as V,b,c as p,d as B,e as x}from"./CTable-Ddg2sW1C.js";import{c as k}from"./cil-options-sHCm5Gxk.js";import"./CCloseButton-BTXwWrjJ.js";const L=({modalVisible:j,setModalVisible:y,user:r,fetchUsers:C})=>{const n=m=>m||"NULL",[t,h]=c.useState({name:"NULL",email:"NULL",role:"NULL",department:"NULL",employee_type:"NULL",employment_status:"NULL",date_of_hire:"NULL",gender:"NULL",phone_number:"NULL",address:"NULL"});c.useEffect(()=>{r&&h({name:n(r.name),email:n(r.email),role:n(r.role),department:n(r.department),employee_type:n(r.employee_type),employment_status:n(r.employment_status),date_of_hire:n(r.date_of_hire),gender:n(r.gender),phone_number:n(r.phone_number),address:n(r.address)})},[r]);const o=m=>{const{name:f,value:N}=m.target;h(U=>({...U,[f]:N||"NULL"}))},s=()=>{y(!1)},d=async m=>{m.preventDefault();try{await g.put(`/api/users/${r.id}`,t),C(),s()}catch(f){console.error("Error updating user profile:",f)}};return e.jsxs(F,{visible:j,onClose:s,children:[e.jsx(v,{children:e.jsx(E,{children:"Edit Profile"})}),e.jsx(M,{children:e.jsxs(T,{onSubmit:d,children:[e.jsx(l,{htmlFor:"name",children:"Full Name"}),e.jsx(i,{id:"name",name:"name",value:t.name,onChange:o}),e.jsx(l,{htmlFor:"email",children:"Email"}),e.jsx(i,{id:"email",name:"email",value:t.email,readOnly:!0}),e.jsx(l,{htmlFor:"role",children:"Role"}),e.jsx(i,{id:"role",name:"role",value:t.role,onChange:o}),e.jsx(l,{htmlFor:"department",children:"Department"}),e.jsx(i,{id:"department",name:"department",value:t.department,onChange:o}),e.jsx(l,{htmlFor:"employee_type",children:"Employee Type"}),e.jsx(i,{id:"employee_type",name:"employee_type",value:t.employee_type,onChange:o}),e.jsx(l,{htmlFor:"employment_status",children:"Employment Status"}),e.jsx(i,{id:"employment_status",name:"employment_status",value:t.employment_status,onChange:o}),e.jsx(l,{htmlFor:"date_of_hire",children:"Date of Hire"}),e.jsx(i,{id:"date_of_hire",name:"date_of_hire",type:"date",value:t.date_of_hire,onChange:o}),e.jsx(l,{htmlFor:"gender",children:"Gender"}),e.jsx(i,{id:"gender",name:"gender",value:t.gender,onChange:o}),e.jsx(l,{htmlFor:"phone_number",children:"Phone Number"}),e.jsx(i,{id:"phone_number",name:"phone_number",value:t.phone_number,onChange:o}),e.jsx(l,{htmlFor:"address",children:"Address"}),e.jsx(i,{id:"address",name:"address",value:t.address,onChange:o})]})}),e.jsxs(R,{children:[e.jsx(u,{color:"secondary",onClick:s,children:"Close"}),e.jsx(u,{color:"primary",onClick:d,children:"Save Changes"})]})]})};L.propTypes={modalVisible:a.bool.isRequired,setModalVisible:a.func.isRequired,user:a.shape({id:a.number.isRequired,name:a.string,email:a.string,role:a.string,department:a.string,employee_type:a.string,employment_status:a.string,date_of_hire:a.string,gender:a.string,phone_number:a.string,address:a.string}).isRequired,fetchUsers:a.func.isRequired};const Z=()=>{const[j,y]=c.useState([]),[r,C]=c.useState(null),[n,t]=c.useState(!1);c.useEffect(()=>{h()},[]);const h=async()=>{try{const s=await g.get("/api/users");y(s.data.data)}catch(s){console.error("Error fetching users:",s)}},o=async s=>{try{const d=await g.get(`/api/users/${s}`);C(d.data.data),t(!0)}catch(d){console.error("Error fetching user profile:",d)}};return e.jsxs(S,{children:[e.jsx(q,{xs:12,children:e.jsxs(w,{className:"mb-4",children:[e.jsxs(P,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Access Control"}),e.jsxs(u,{color:"primary",children:[e.jsx(_,{icon:A,className:"me-2"})," Add User"]})]}),e.jsx(D,{children:e.jsxs(H,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[e.jsx(V,{children:e.jsxs(b,{children:[e.jsx(p,{className:"bg-body-tertiary",children:"Name"}),e.jsx(p,{className:"bg-body-tertiary",children:"Email"}),e.jsx(p,{className:"bg-body-tertiary text-center",children:"Role"}),e.jsx(p,{className:"bg-body-tertiary text-center",children:"More"})]})}),e.jsx(B,{children:j.map(s=>{var d;return e.jsxs(b,{children:[e.jsx(x,{children:s.name}),e.jsx(x,{children:s.email}),e.jsx(x,{children:((d=s.role)==null?void 0:d.name)||"N/A"}),e.jsx(x,{className:"text-center",children:e.jsxs(u,{color:"secondary",size:"sm",onClick:()=>o(s.id),children:[e.jsx(_,{icon:k})," More"]})})]},s.id)})})]})})]})}),r&&e.jsx(L,{modalVisible:n,setModalVisible:t,user:r,fetchUsers:h})]})};export{Z as default};
