import{r as a,x as u,i as I,j as s}from"./index-DK2ZEybB.js";import{C as T,a as $}from"./CRow-BX9R-C2N.js";import{C as F,a as D}from"./CCardBody-Bk1ZAsRh.js";import{C as B}from"./CCardHeader-CyXVSR0G.js";import{C as L}from"./CFormSelect-RHnUNkYo.js";import{d as R}from"./index.esm-DxiGKX8f.js";import{C as A,a as M,b as f,c as i,d as O,e as o}from"./CTable-Bygo2D98.js";import{f as Q}from"./DefaultLayout-Db26cRde.js";import"./CCloseButton-CjoA-voB.js";import"./cil-user-CUnGfBc2.js";const Y=()=>{const[m,h]=a.useState([]),[x,C]=a.useState([]),[j,g]=a.useState([]),[l,N]=a.useState(""),[t,w]=a.useState({column:"employeeId",direction:"asc"}),[c,y]=a.useState("all");a.useEffect(()=>{E(),b()},[]),a.useEffect(()=>{S()},[m,x,c,t,l]);const E=async()=>{try{const r=await u.get("https://backend-hr1.axleshift.com/api/employees");h(r.data.data||r.data)}catch(r){console.error("Error fetching external employees:",r);try{const e=await I.get("/api/employee");h(e.data.data)}catch(e){console.error("Error fetching local employees:",e)}}},b=async()=>{try{const r=await u.get("https://backend-hr1.axleshift.com/api/newhires");C(r.data.data||r.data)}catch(r){console.error("Error fetching new hires:",r)}},S=()=>{let r=c==="newHires"?x:m;l&&(r=r.filter(e=>`${e.firstName} ${e.middleName||""} ${e.lastName}`.toLowerCase().includes(l.toLowerCase())||e.employeeId.toLowerCase().includes(l.toLowerCase()))),r=r.sort((e,d)=>e[t.column]<d[t.column]?t.direction==="asc"?-1:1:e[t.column]>d[t.column]?t.direction==="asc"?1:-1:0),g(r)},H=r=>{const e=r.middleName?` ${r.middleName}`:"";return`${r.firstName}${e} ${r.lastName}`},p=r=>{let e="secondary";return r==="pending"?e="warning":r==="completed"?e="success":r==="in-progress"&&(e="info"),s.jsx(Q,{color:e,children:r})},n=r=>{const e=t.direction==="asc"?"desc":"asc";w({column:r,direction:e})},k=r=>{N(r.target.value)},v=r=>s.jsxs(F,{className:"mb-4",children:[s.jsxs(B,{className:"d-flex justify-content-between align-items-center",children:[s.jsx("strong",{children:"Employee Management"}),s.jsxs(L,{"aria-label":"Filter by",value:c,onChange:e=>y(e.target.value),style:{width:"200px"},children:[s.jsx("option",{value:"all",children:"All Employees"}),s.jsx("option",{value:"newHires",children:"New Hires"})]})]}),s.jsxs(D,{children:[s.jsx(R,{type:"text",placeholder:"Search by Name or ID",value:l,onChange:k,className:"mb-3"}),s.jsxs(A,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[s.jsx(M,{children:s.jsxs(f,{children:[s.jsx(i,{onClick:()=>n("employeeId"),children:"Employee ID"}),s.jsx(i,{onClick:()=>n("firstName"),children:"Name"}),s.jsx(i,{onClick:()=>n("position"),children:"Position"}),s.jsx(i,{onClick:()=>n("department"),children:"Department"}),s.jsx(i,{onClick:()=>n("dateHired"),children:"Date Hired"}),s.jsx(i,{onClick:()=>n("email"),children:"Email"}),s.jsx(i,{className:"text-center",onClick:()=>n("status"),children:"Status"})]})}),s.jsx(O,{children:r.map(e=>s.jsxs(f,{children:[s.jsx(o,{children:e.employeeId}),s.jsx(o,{children:H(e)}),s.jsx(o,{children:e.position}),s.jsx(o,{children:e.department}),s.jsx(o,{children:e.dateHired}),s.jsx(o,{children:e.email}),s.jsx(o,{className:"text-center",children:e.trainingStatus?p(e.trainingStatus.status):p("pending")})]},e.id))})]})]})]});return s.jsx(T,{children:s.jsx($,{xs:12,children:v(j)})})};export{Y as default};
