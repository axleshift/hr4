import{r as n,i as l,j as e}from"./index-Cyo563lo.js";import{a as d}from"./index.esm-ozBX9U6f.js";import{C as R,a as f}from"./CRow-DdcbVoUg.js";import{C,a as u}from"./CCardBody-BodADAI0.js";import{C as w}from"./CCardHeader-CjXDJoFG.js";import{C as v,a as g,b as o,c as r,d as y,e as a}from"./CTable-KWWwOj2U.js";const F=()=>{const[b,T]=n.useState([]),[D,S]=n.useState([]),[h,E]=n.useState(""),[P,N]=n.useState(""),[x,_]=n.useState(""),[B,p]=n.useState(!1);n.useEffect(()=>{M(),k()},[]);const M=async()=>{try{const s=await l.get("/api/modules");T(s.data.data)}catch(s){console.error("Error fetching modules:",s)}},k=async()=>{try{const s=await l.get("/api/courses");S(s.data.data)}catch(s){console.error("Error fetching courses:",s)}},j=async(s,c="module")=>{try{const i=c==="course"?`/api/courses/${s}/preview`:`/api/modules/${s}/preview`,t=await l.get(i);E(t.data.base64),N(t.data.mime_type),_(t.data.file_name),p(!0)}catch(i){console.error("Error fetching document preview:",i)}};return B?e.jsxs("div",{style:{padding:"20px"},children:[e.jsx(d,{color:"secondary",onClick:()=>p(!1),children:"← Back to List"}),e.jsx("h2",{style:{marginTop:"1rem"},children:"Document Preview"}),h||x?P==="application/pdf"?e.jsx("iframe",{src:h,style:{width:"100%",height:"90vh",border:"none"},title:"PDF Preview"}):e.jsx("iframe",{src:`https://view.officeapps.live.com/op/embed.aspx?src=https://hr4.axleshift.com/uploads/${x}`,style:{width:"100%",height:"90vh",border:"none"},title:"DOCX Preview"}):e.jsx("p",{children:"No preview available."})]}):e.jsxs(R,{children:[e.jsx(f,{xs:12,children:e.jsxs(C,{className:"mb-4",children:[e.jsx(w,{children:e.jsx("strong",{children:"MODULES"})}),e.jsx(u,{children:e.jsxs(v,{striped:!0,hover:!0,children:[e.jsx(g,{children:e.jsxs(o,{children:[e.jsx(r,{children:"#"}),e.jsx(r,{children:"Title"}),e.jsx(r,{children:"Description"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(y,{children:b.map((s,c)=>{var i,t;return e.jsxs(o,{children:[e.jsx(r,{children:c+1}),e.jsx(a,{children:s.title}),e.jsx(a,{children:s.description}),e.jsx(a,{children:(((i=s.file_name)==null?void 0:i.endsWith(".pdf"))||((t=s.file_name)==null?void 0:t.endsWith(".docx")))&&e.jsx(d,{color:"info",onClick:()=>j(s.id,"module"),children:"View"})})]},c)})})]})})]})}),e.jsx(f,{xs:12,children:e.jsxs(C,{className:"mb-4",children:[e.jsx(w,{children:e.jsx("strong",{children:"COURSES"})}),e.jsx(u,{children:e.jsxs(v,{striped:!0,hover:!0,children:[e.jsx(g,{children:e.jsxs(o,{children:[e.jsx(r,{children:"#"}),e.jsx(r,{children:"Title"}),e.jsx(r,{children:"Description"}),e.jsx(r,{children:"Program"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(y,{children:D.map((s,c)=>{var i,t,m;return e.jsxs(o,{children:[e.jsx(r,{children:c+1}),e.jsx(a,{children:s.title}),e.jsx(a,{children:s.description}),e.jsx(a,{children:((i=s.program)==null?void 0:i.title)||"N/A"}),e.jsx(a,{children:(((t=s.file_name)==null?void 0:t.endsWith(".pdf"))||((m=s.file_name)==null?void 0:m.endsWith(".docx")))&&e.jsx(d,{color:"info",onClick:()=>j(s.id,"course"),children:"View"})})]},c)})})]})})]})})]})};export{F as default};
