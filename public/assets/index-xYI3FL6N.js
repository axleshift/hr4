import{r as h,j as e,q as N,P as t}from"./index-CXOPJnw3.js";import{c as d,d as c,a as U,e as R}from"./index.esm-CBJuQZoR.js";import{a as T,b as w,c as q,d as D,e as A}from"./DefaultLayout-Bflq-yFC.js";import{C as B}from"./cil-user-BwSb8996.js";import{C as H,a as P}from"./CRow-B9S4I7Qn.js";import{C as V,a as I}from"./CCardBody-CW151ogU.js";import{C as O}from"./CCardHeader-B-EYl-v5.js";import{C as $,a as z,b as k,c as y,d as G,e as C}from"./CTable-Cp2q8fmd.js";import{c as J}from"./cil-options-sHCm5Gxk.js";import"./CCloseButton-DG7UqT90.js";const M=({modalVisible:_,setModalVisible:b,user:s,fetchUsers:L})=>{const n=i=>i||"NULL",[a,l]=h.useState({name:"NULL",email:"NULL",role:"NULL",department:"NULL",employee_type:"NULL",employment_status:"NULL",date_of_hire:"NULL",gender:"NULL",phone_number:"NULL",address:"NULL"});h.useEffect(()=>{s&&l({name:n(s.name),email:n(s.email),role:n(s.role),department:n(s.department),employee_type:n(s.employee_type),employment_status:n(s.employment_status),date_of_hire:n(s.date_of_hire),gender:n(s.gender),phone_number:n(s.phone_number),address:n(s.address)})},[s]);const o=i=>{const{name:u,value:x}=i.target;l(r=>({...r,[u]:x||"NULL"}))},p=()=>{b(!1)},j=async i=>{i.preventDefault();try{await N.put(`/api/users/${s.id}`,a),L(),p()}catch(u){console.error("Error updating user profile:",u)}};return e.jsxs(T,{visible:_,onClose:p,children:[e.jsx(w,{children:e.jsx(q,{children:"Edit Profile"})}),e.jsx(D,{children:e.jsxs(B,{onSubmit:j,children:[e.jsx(d,{htmlFor:"name",children:"Full Name"}),e.jsx(c,{id:"name",name:"name",value:a.name,onChange:o}),e.jsx(d,{htmlFor:"email",children:"Email"}),e.jsx(c,{id:"email",name:"email",value:a.email,readOnly:!0}),e.jsx(d,{htmlFor:"role",children:"Role"}),e.jsx(c,{id:"role",name:"role",value:a.role,onChange:o}),e.jsx(d,{htmlFor:"department",children:"Department"}),e.jsx(c,{id:"department",name:"department",value:a.department,onChange:o}),e.jsx(d,{htmlFor:"employee_type",children:"Employee Type"}),e.jsx(c,{id:"employee_type",name:"employee_type",value:a.employee_type,onChange:o}),e.jsx(d,{htmlFor:"employment_status",children:"Employment Status"}),e.jsx(c,{id:"employment_status",name:"employment_status",value:a.employment_status,onChange:o}),e.jsx(d,{htmlFor:"date_of_hire",children:"Date of Hire"}),e.jsx(c,{id:"date_of_hire",name:"date_of_hire",type:"date",value:a.date_of_hire,onChange:o}),e.jsx(d,{htmlFor:"gender",children:"Gender"}),e.jsx(c,{id:"gender",name:"gender",value:a.gender,onChange:o}),e.jsx(d,{htmlFor:"phone_number",children:"Phone Number"}),e.jsx(c,{id:"phone_number",name:"phone_number",value:a.phone_number,onChange:o}),e.jsx(d,{htmlFor:"address",children:"Address"}),e.jsx(c,{id:"address",name:"address",value:a.address,onChange:o})]})}),e.jsxs(A,{children:[e.jsx(U,{color:"secondary",onClick:p,children:"Close"}),e.jsx(U,{color:"primary",onClick:j,children:"Save Changes"})]})]})};M.propTypes={modalVisible:t.bool.isRequired,setModalVisible:t.func.isRequired,user:t.shape({id:t.number.isRequired,name:t.string,email:t.string,role:t.string,department:t.string,employee_type:t.string,employment_status:t.string,date_of_hire:t.string,gender:t.string,phone_number:t.string,address:t.string}).isRequired,fetchUsers:t.func.isRequired};const ae=()=>{const[_,b]=h.useState([]),[s,L]=h.useState(null),[n,a]=h.useState(!1),[l,o]=h.useState({key:null,direction:"asc"});h.useEffect(()=>{p()},[]);const p=async()=>{try{const r=await N.get("/api/users");b(r.data.data)}catch(r){console.error("Error fetching users:",r)}},j=async r=>{try{const m=await N.get(`/api/users/${r}`);L(m.data.data),a(!0)}catch(m){console.error("Error fetching user profile:",m)}},i=r=>{o(m=>m.key===r?{key:r,direction:m.direction==="asc"?"desc":"asc"}:{key:r,direction:"asc"})},u=[..._].sort((r,m)=>{var f,v,g,F;if(l.key){const E=((v=(f=r[l.key])==null?void 0:f.toLowerCase)==null?void 0:v.call(f))??"",S=((F=(g=m[l.key])==null?void 0:g.toLowerCase)==null?void 0:F.call(g))??"";if(E<S)return l.direction==="asc"?-1:1;if(E>S)return l.direction==="asc"?1:-1}return 0}),x=r=>l.key!==r?"":l.direction==="asc"?" ↑":" ↓";return e.jsxs(H,{children:[e.jsx(P,{xs:12,children:e.jsxs(V,{className:"mb-4",children:[e.jsx(O,{className:"d-flex justify-content-between align-items-center",children:e.jsx("strong",{children:"Access Control"})}),e.jsx(I,{children:e.jsxs($,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[e.jsx(z,{children:e.jsxs(k,{children:[e.jsx(y,{children:"#"}),e.jsxs(y,{className:"bg-body-tertiary",onClick:()=>i("name"),style:{cursor:"pointer"},children:["Name",x("name")]}),e.jsxs(y,{className:"bg-body-tertiary",onClick:()=>i("email"),style:{cursor:"pointer"},children:["Email",x("email")]}),e.jsxs(y,{className:"bg-body-tertiary text-center",onClick:()=>i("role"),style:{cursor:"pointer"},children:["Role",x("role")]}),e.jsx(y,{className:"bg-body-tertiary text-center",children:"More"})]})}),e.jsx(G,{children:u.map(r=>e.jsxs(k,{children:[e.jsx(C,{children:r.id}),e.jsx(C,{children:r.name}),e.jsx(C,{children:r.email}),e.jsx(C,{className:"text-center",children:r.role}),e.jsx(C,{className:"text-center",children:e.jsxs(U,{color:"secondary",size:"sm",onClick:()=>j(r.id),children:[e.jsx(R,{icon:J})," More"]})})]},r.id))})]})})]})}),s&&e.jsx(M,{modalVisible:n,setModalVisible:a,user:s,fetchUsers:p})]})};export{ae as default};
