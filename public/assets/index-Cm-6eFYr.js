import{r as l,x,i as b,j as r}from"./index-Cyo563lo.js";import{C as p,a as o}from"./CRow-DdcbVoUg.js";import{C as T,a as v}from"./CCardBody-BodADAI0.js";import{C as H}from"./CCardHeader-CjXDJoFG.js";import{d as S}from"./index.esm-ozBX9U6f.js";import{C as B}from"./CFormSelect-Cz0nHBCK.js";import{C as F,a as I,b as i,c as t,d as D,e as s}from"./CTable-KWWwOj2U.js";import{f as c}from"./DefaultLayout-DwJiF1GZ.js";import"./CCloseButton-BfpjhObT.js";import"./cil-user-DjKd8-z_.js";const J=()=>{const[u,d]=l.useState([]),[j,f]=l.useState([]),[m,g]=l.useState(""),[n,C]=l.useState("all");l.useEffect(()=>{w(),y()},[]);const w=async()=>{try{const e=await x.get("https://backend-hr1.axleshift.com/api/employees");d(e.data.data||e.data)}catch(e){console.error("Error fetching external employees:",e);try{const a=await b.get("/api/employee");d(a.data.data)}catch(a){console.error("Error fetching local employees:",a)}}},y=async()=>{try{const e=await x.get("https://backend-hr1.axleshift.com/api/newhires");f(e.data.data||e.data)}catch(e){console.error("Error fetching new hires:",e)}},N=e=>{const a=e.middleName?` ${e.middleName}`:"";return`${e.firstName}${a} ${e.lastName}`},E=e=>{switch(e){case"completed":return r.jsx(c,{color:"success",children:"Completed"});case"in progress":return r.jsx(c,{color:"warning",children:"In Progress"});case"pending":default:return r.jsx(c,{color:"secondary",children:"Pending"})}},h=[...u.map(e=>({...e,source:"regular"})),...j.map(e=>({...e,source:"new"}))].filter(e=>n==="new"?e.source==="new":n==="regular"?e.source==="regular":!0).filter(e=>[e.employeeId,e.firstName,e.middleName,e.lastName,e.position,e.department,e.email,e.dateHired].filter(Boolean).some(a=>a.toLowerCase().includes(m.toLowerCase())));return r.jsx(p,{children:r.jsx(o,{xs:12,children:r.jsxs(T,{className:"mb-4",children:[r.jsx(H,{className:"d-flex justify-content-between align-items-center",children:r.jsx("strong",{children:"Employee Management"})}),r.jsxs(v,{children:[r.jsxs(p,{className:"mb-3",children:[r.jsx(o,{md:6,children:r.jsx(S,{placeholder:"Search by ID, name, position, department, etc...",value:m,onChange:e=>g(e.target.value)})}),r.jsx(o,{md:3,children:r.jsxs(B,{value:n,onChange:e=>C(e.target.value),children:[r.jsx("option",{value:"all",children:"All Employees"}),r.jsx("option",{value:"new",children:"New Hires Only"}),r.jsx("option",{value:"regular",children:"Regular Employees Only"})]})})]}),r.jsx("div",{style:{maxHeight:"500px",overflowY:"auto"},children:r.jsxs(F,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[r.jsx(I,{children:r.jsxs(i,{children:[r.jsx(t,{children:"Employee ID"}),r.jsx(t,{children:"Name"}),r.jsx(t,{children:"Position"}),r.jsx(t,{children:"Department"}),r.jsx(t,{children:"Date Hired"}),r.jsx(t,{children:"Email"}),r.jsx(t,{className:"text-center",children:"Status"})]})}),r.jsx(D,{children:h.length>0?h.map(e=>r.jsxs(i,{children:[r.jsx(s,{children:e.employeeId}),r.jsx(s,{children:N(e)}),r.jsx(s,{children:e.position}),r.jsx(s,{children:e.department}),r.jsx(s,{children:e.dateHired}),r.jsx(s,{children:e.email}),r.jsx(s,{className:"text-center",children:E(e.status)})]},e.id)):r.jsx(i,{children:r.jsx(s,{colSpan:7,className:"text-center",children:"No employees found."})})})]})})]})]})})})};export{J as default};
