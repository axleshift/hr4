import{r as n,q as m,j as e}from"./index-DmS8JYc0.js";import{C as $,a as N}from"./CRow-CPtpQygk.js";import{C as H,a as B}from"./CCardBody-CWfSlhLx.js";import{C as L}from"./CCardHeader-DTmkvr5B.js";import{a as C,c as o,d as h}from"./index.esm-aQqIBZXy.js";import{a as R,b as A,c as k,d as I,e as O,C as X}from"./DefaultLayout-CJ7YKP2t.js";import{C as z}from"./cil-user-DYp5o7L4.js";import{C as u}from"./CFormSelect-B-M0qH2z.js";import{C as V,a as G,b as S,c as t,d as J}from"./CTable-BjfLganb.js";import"./CCloseButton-B5DHfL9d.js";const ne=()=>{const[y,d]=n.useState(!1),[T,b]=n.useState([]),[a,g]=n.useState({program_name:"",course_name:"",department:"",participant:"",event_location:"",schedule:"",start_time:"",end_time:""}),[E,F]=n.useState([]),[P,w]=n.useState([]),[p,K]=n.useState("");n.useEffect(()=>{_(),q()},[]);const _=async()=>{try{const r=await m.get("/training");b(r.data.data||[])}catch(r){console.error("Error fetching trainings:",r)}},q=async()=>{try{const r=await m.get("/api/programs");F(r.data.data)}catch(r){console.error("Error fetching programs:",r)}},D=async()=>{if(p)try{const r=await m.get(`/api/courses?program_id=${p}`);w(r.data.data)}catch(r){console.error("Error fetching courses:",r)}};n.useEffect(()=>{D()},[p]);const s=r=>{const{name:i,value:c}=r.target;g({...a,[i]:c})},M=async r=>{r.preventDefault();try{await m.post("/training",a),d(!1),_(),g({program_name:"",course_name:"",department:"",participant:"",event_location:"",schedule:"",start_time:"",end_time:""})}catch(i){console.error("Error adding training:",i)}},x=(r,i,c)=>{const l=new Date,j=new Date(`${r}T${i}`),v=new Date(`${r}T${c}`);return l<j?"Pending":l<=v?"Ongoing":"Complete"},f=r=>{const[i,c]=r.split(":"),l=parseInt(i,10),j=l>=12?"PM":"AM";return`${l%12||12}:${c} ${j}`};return e.jsx($,{children:e.jsx(N,{xs:12,children:e.jsxs(H,{className:"mb-4",children:[e.jsxs(L,{children:[e.jsx("strong",{children:"Training Schedule"}),e.jsxs("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:[e.jsx(C,{color:"primary",onClick:()=>d(!0),children:"Add Stuff"}),e.jsxs(R,{alignment:"center",backdrop:"static",size:"lg",visible:y,onClose:()=>d(!1),children:[e.jsx(A,{children:e.jsx(k,{children:"Add Stuff"})}),e.jsx(I,{children:e.jsxs(z,{onSubmit:M,children:[e.jsx(o,{htmlFor:"program_name",children:"Training Program Name"}),e.jsxs(u,{id:"program_name",name:"program_name",value:a.program_name,onChange:s,required:!0,children:[e.jsx("option",{value:"",children:"Select Program"}),E.map(r=>e.jsx("option",{value:r.title,children:r.title},r.id))]}),e.jsx(o,{htmlFor:"course_name",children:"Course Name"}),e.jsxs(u,{id:"course_name",name:"course_name",value:a.course_name,onChange:s,required:!0,children:[e.jsx("option",{value:"",children:"Select Course"}),P.map(r=>e.jsx("option",{value:r.title,children:r.title},r.id))]}),e.jsx(o,{htmlFor:"department",children:"Select Department"}),e.jsxs(u,{id:"department",name:"department",value:a.department,onChange:s,required:!0,children:[e.jsx("option",{value:"",children:"Select Department"}),e.jsx("option",{value:"HR",children:"HR"}),e.jsx("option",{value:"Finance",children:"Finance"})]}),e.jsx(o,{htmlFor:"participant",children:"Select Participant"}),e.jsxs(u,{id:"participant",name:"participant",value:a.participant,onChange:s,required:!0,children:[e.jsx("option",{value:"",children:"Select Participant"}),e.jsx("option",{value:"Employee 1",children:"Employee 1"}),e.jsx("option",{value:"Employee 2",children:"Employee 2"})]}),e.jsx(o,{htmlFor:"event_location",children:"Event Location / Mode"}),e.jsx(h,{type:"text",id:"event_location",name:"event_location",value:a.event_location,onChange:s,required:!0}),e.jsx(o,{htmlFor:"schedule",children:"Schedule"}),e.jsx(h,{type:"date",id:"schedule",name:"schedule",value:a.schedule,onChange:s,required:!0}),e.jsx(o,{htmlFor:"start_time",children:"Start Time"}),e.jsx(h,{type:"time",id:"start_time",name:"start_time",value:a.start_time,onChange:s,required:!0}),e.jsx(o,{htmlFor:"end_time",children:"End Time"}),e.jsx(h,{type:"time",id:"end_time",name:"end_time",value:a.end_time,onChange:s,required:!0}),e.jsxs(O,{children:[e.jsx(C,{color:"secondary",onClick:()=>d(!1),children:"Cancel"}),e.jsx(C,{color:"primary",type:"submit",children:"Add Training"})]})]})})]})]})]}),e.jsx(B,{children:e.jsxs(V,{children:[e.jsx(G,{children:e.jsxs(S,{children:[e.jsx(t,{children:"Training Program Name"}),e.jsx(t,{children:"Course Name"}),e.jsx(t,{children:"Department"}),e.jsx(t,{children:"Participant"}),e.jsx(t,{children:"Event Location"}),e.jsx(t,{children:"Schedule"}),e.jsx(t,{children:"Start Time"}),e.jsx(t,{children:"End Time"}),e.jsx(t,{children:"Status"})]})}),e.jsx(J,{children:T.map(r=>e.jsxs(S,{children:[e.jsx(t,{children:r.program_name}),e.jsx(t,{children:r.course_name}),e.jsx(t,{children:r.department}),e.jsx(t,{children:r.participant}),e.jsx(t,{children:r.event_location}),e.jsx(t,{children:r.schedule}),e.jsx(t,{children:f(r.start_time)}),e.jsx(t,{children:f(r.end_time)}),e.jsx(t,{children:e.jsx(X,{color:x(r.schedule,r.start_time,r.end_time)==="Pending"?"warning":x(r.schedule,r.start_time,r.end_time)==="Ongoing"?"info":"success",className:"ms-2",children:x(r.schedule,r.start_time,r.end_time)})})]},r.id))})]})})]})})})};export{ne as default};
