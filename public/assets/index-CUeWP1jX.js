import{r as o,_ as P,R as g,a as y,c as R,P as p,j as e,q as I}from"./index-DYUdVFYv.js";import{C as S,a as w}from"./CRow-BGoXF5dd.js";import{C as fe,a as ve}from"./CCardBody-CnrTRUXD.js";import{C as Ce}from"./CCardHeader-DeeHKPHb.js";import{a as E,c as T,d as k}from"./index.esm-CpH_IvX-.js";import{_ as xe,f as ge,a as je,T as Ee,u as Ne}from"./CCloseButton-Bz__oBW7.js";import{C as be,a as ye,b as te,c as B,d as Ae,e as L}from"./CTable-B0AZ9eu9.js";import{a as V,b as z,c as F,d as W,e as q}from"./DefaultLayout-C8vNvExz.js";import{C as G}from"./cil-user-DdQDYgtq.js";import{C as J}from"./CFormTextarea-Cy5WjtzS.js";var oe=o.createContext({}),X=o.forwardRef(function(r,t){var u=r.children,s=r.activeItemKey,l=r.alwaysOpen,d=l===void 0?!1:l,m=r.className,a=r.flush,i=P(r,["children","activeItemKey","alwaysOpen","className","flush"]),n=o.useState(s),h=n[0],f=n[1];return g.createElement("div",y({className:R("accordion",{"accordion-flush":a},m)},i,{ref:t}),g.createElement(oe.Provider,{value:{_activeItemKey:h,alwaysOpen:d,setActiveKey:f}},u))});X.propTypes={alwaysOpen:p.bool,activeItemKey:p.oneOfType([p.number,p.string]),children:p.node,className:p.string,flush:p.bool};X.displayName="CAccordion";var Y=o.createContext({}),Z=o.forwardRef(function(r,t){var u=r.children,s=r.className,l=r.id,d=r.itemKey,m=P(r,["children","className","id","itemKey"]),a=l??o.useId(),i=o.useRef(d??a),n=o.useContext(oe),h=n._activeItemKey,f=n.alwaysOpen,C=n.setActiveKey,x=o.useState(h===i.current),j=x[0],N=x[1];return o.useEffect(function(){!f&&j&&C(i.current)},[j]),o.useEffect(function(){N(h===i.current)},[h]),g.createElement("div",y({className:R("accordion-item",s)},m,{ref:t}),g.createElement(Y.Provider,{value:{id:a,setVisible:N,visible:j}},u))});Z.propTypes={children:p.node,className:p.string,itemKey:p.oneOfType([p.number,p.string])};Z.displayName="CAccordionItem";function U(){return U=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var u=arguments[t];for(var s in u)({}).hasOwnProperty.call(u,s)&&(r[s]=u[s])}return r},U.apply(null,arguments)}function Se(r,t){return r.classList?!!t&&r.classList.contains(t):(" "+(r.className.baseVal||r.className)+" ").indexOf(" "+t+" ")!==-1}function we(r,t){r.classList?r.classList.add(t):Se(r,t)||(typeof r.className=="string"?r.className=r.className+" "+t:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+t))}function ie(r,t){return r.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Te(r,t){r.classList?r.classList.remove(t):typeof r.className=="string"?r.className=ie(r.className,t):r.setAttribute("class",ie(r.className&&r.className.baseVal||"",t))}var Pe=function(t,u){return t&&u&&u.split(" ").forEach(function(s){return we(t,s)})},Q=function(t,u){return t&&u&&u.split(" ").forEach(function(s){return Te(t,s)})},ee=function(r){xe(t,r);function t(){for(var s,l=arguments.length,d=new Array(l),m=0;m<l;m++)d[m]=arguments[m];return s=r.call.apply(r,[this].concat(d))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(a,i){var n=s.resolveArguments(a,i),h=n[0],f=n[1];s.removeClasses(h,"exit"),s.addClass(h,f?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(a,i)},s.onEntering=function(a,i){var n=s.resolveArguments(a,i),h=n[0],f=n[1],C=f?"appear":"enter";s.addClass(h,C,"active"),s.props.onEntering&&s.props.onEntering(a,i)},s.onEntered=function(a,i){var n=s.resolveArguments(a,i),h=n[0],f=n[1],C=f?"appear":"enter";s.removeClasses(h,C),s.addClass(h,C,"done"),s.props.onEntered&&s.props.onEntered(a,i)},s.onExit=function(a){var i=s.resolveArguments(a),n=i[0];s.removeClasses(n,"appear"),s.removeClasses(n,"enter"),s.addClass(n,"exit","base"),s.props.onExit&&s.props.onExit(a)},s.onExiting=function(a){var i=s.resolveArguments(a),n=i[0];s.addClass(n,"exit","active"),s.props.onExiting&&s.props.onExiting(a)},s.onExited=function(a){var i=s.resolveArguments(a),n=i[0];s.removeClasses(n,"exit"),s.addClass(n,"exit","done"),s.props.onExited&&s.props.onExited(a)},s.resolveArguments=function(a,i){return s.props.nodeRef?[s.props.nodeRef.current,a]:[a,i]},s.getClassNames=function(a){var i=s.props.classNames,n=typeof i=="string",h=n&&i?i+"-":"",f=n?""+h+a:i[a],C=n?f+"-active":i[a+"Active"],x=n?f+"-done":i[a+"Done"];return{baseClassName:f,activeClassName:C,doneClassName:x}},s}var u=t.prototype;return u.addClass=function(l,d,m){var a=this.getClassNames(d)[m+"ClassName"],i=this.getClassNames("enter"),n=i.doneClassName;d==="appear"&&m==="done"&&n&&(a+=" "+n),m==="active"&&l&&ge(l),a&&(this.appliedClasses[d][m]=a,Pe(l,a))},u.removeClasses=function(l,d){var m=this.appliedClasses[d],a=m.base,i=m.active,n=m.done;this.appliedClasses[d]={},a&&Q(l,a),i&&Q(l,i),n&&Q(l,n)},u.render=function(){var l=this.props;l.classNames;var d=je(l,["classNames"]);return g.createElement(Ee,U({},d,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(g.Component);ee.defaultProps={classNames:""};ee.propTypes={};var se=o.forwardRef(function(r,t){var u=r.children,s=r.className,l=r.horizontal,d=r.onHide,m=r.onShow,a=r.visible,i=P(r,["children","className","horizontal","onHide","onShow","visible"]),n=o.useRef(null),h=Ne(t,n),f=o.useState(),C=f[0],x=f[1],j=o.useState(),N=j[0],b=j[1],K=function(){if(m&&m(),l){n.current&&b(n.current.scrollWidth);return}n.current&&x(n.current.scrollHeight)},M=function(){if(l){b(0);return}x(0)},D=function(){if(l){n.current&&b(n.current.scrollWidth);return}n.current&&x(n.current.scrollHeight)},H=function(){if(d&&d(),l){b(0);return}x(0)},$=function(){if(l){b(0);return}x(0)};return g.createElement(ee,{in:a,nodeRef:n,onEntering:K,onEntered:M,onExit:D,onExiting:H,onExited:$,timeout:350},function(A){var _=C===0?null:{height:C},O=N===0?null:{width:N};return g.createElement("div",y({className:R(s,{"collapse-horizontal":l,collapsing:A==="entering"||A==="exiting","collapse show":A==="entered",collapse:A==="exited"}),style:y(y({},_),O)},i,{ref:h}),u)})});se.propTypes={children:p.node,className:p.string,horizontal:p.bool,onHide:p.func,onShow:p.func,visible:p.bool};se.displayName="CCollapse";var re=o.forwardRef(function(r,t){var u=r.children,s=r.className,l=P(r,["children","className"]),d=o.useContext(Y),m=d.id,a=d.visible;return g.createElement(se,{className:"accordion-collapse",id:m,visible:a},g.createElement("div",y({className:R("accordion-body",s)},l,{ref:t}),u))});re.propTypes={children:p.node,className:p.string};re.displayName="CAccordionBody";var ae=o.forwardRef(function(r,t){var u=r.children,s=r.className,l=P(r,["children","className"]),d=o.useContext(Y),m=d.id,a=d.visible,i=d.setVisible;return g.createElement("button",y({type:"button",className:R("accordion-button",{collapsed:!a},s),"aria-controls":m,"aria-expanded":a,onClick:function(){return i(!a)}},l,{ref:t}),u)});ae.propTypes={children:p.node,className:p.string};ae.displayName="CAccordionButton";var ne=o.forwardRef(function(r,t){var u=r.children,s=r.className,l=P(r,["children","className"]);return g.createElement("div",y({className:R("accordion-header",s)},l,{ref:t}),g.createElement(ae,null,u))});ne.propTypes={children:p.node,className:p.string};ne.displayName="CAccordionHeader";const Be=()=>{const[r,t]=o.useState(!1),[u,s]=o.useState(!1),[l,d]=o.useState(!1),[m,a]=o.useState([]),[i,n]=o.useState([]),[h,f]=o.useState([]),[C,x]=o.useState(null),[j,N]=o.useState(""),[b,K]=o.useState(""),[M,D]=o.useState(""),[H,$]=o.useState(""),[A,_]=o.useState(""),[O,le]=o.useState(""),[ce,de]=o.useState(null);o.useEffect(()=>{(async()=>{try{const v=await I.get("/api/programs");a(v.data.data)}catch(v){console.error("Error fetching programs:",v)}})()},[]),o.useEffect(()=>{(async()=>{try{const v=await I.get("/api/courses");n(v.data.data)}catch(v){console.error("Error fetching courses:",v)}})()},[]);const ue=async()=>{try{const v=(await I.post("/api/programs",{title:j,description:b})).data.data;a(he=>[...he,v]),N(""),K(""),t(!1)}catch(c){console.error("Error adding program:",c)}},me=async()=>{try{const c=await I.post("/api/courses",{title:M,description:H,program_id:C});console.log("Course saved:",c.data),n([...i,c.data]),s(!1)}catch(c){console.error("Error saving course:",c)}},pe=async()=>{try{const c=await I.post("/api/modules",{title:A,description:O,course_id:ce});console.log("Module saved:",c.data),f([...h,c.data]),d(!1)}catch(c){console.error("Error saving module:",c)}};return e.jsxs(S,{children:[e.jsx(w,{xs:12,children:e.jsxs(fe,{className:"mb-4",children:[e.jsxs(Ce,{children:[e.jsx("strong",{children:"List of Programs"}),e.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:e.jsx(E,{color:"primary",onClick:()=>t(!0),children:"Add Program"})})]}),e.jsx(ve,{children:e.jsx(X,{alwaysOpen:!0,children:m.map(c=>e.jsxs(Z,{children:[e.jsx(ne,{onClick:()=>{x(c.id)},children:c.title}),e.jsxs(re,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",c.description]}),e.jsx(E,{color:"primary",onClick:()=>{x(c.id),s(!0)},children:"Add Course"}),e.jsxs(be,{striped:!0,className:"mt-3",children:[e.jsx(ye,{children:e.jsxs(te,{children:[e.jsx(B,{children:"Title"}),e.jsx(B,{children:"Description"}),e.jsx(B,{children:"Actions"})]})}),e.jsx(Ae,{children:i.filter(v=>v.program_id===c.id).map(v=>e.jsxs(te,{children:[e.jsx(L,{children:v.title}),e.jsx(L,{children:v.description}),e.jsx(L,{children:e.jsx(E,{color:"success",onClick:()=>{de(v.id),d(!0)},children:"Add Module"})})]},v.id))})]})]})]},c.id))})})]})}),e.jsxs(V,{size:"xl",visible:r,onClose:()=>t(!1),children:[e.jsx(z,{children:e.jsx(F,{children:"Add Program"})}),e.jsx(W,{children:e.jsxs(G,{children:[e.jsx(S,{className:"mb-3",children:e.jsxs(w,{md:12,children:[e.jsx(T,{children:"Program Title"}),e.jsx(k,{value:j,onChange:c=>N(c.target.value)})]})}),e.jsx(S,{className:"mb-3",children:e.jsxs(w,{md:12,children:[e.jsx(T,{children:"Program Description"}),e.jsx(J,{value:b,onChange:c=>K(c.target.value)})]})})]})}),e.jsxs(q,{children:[e.jsx(E,{color:"secondary",onClick:()=>t(!1),children:"Close"}),e.jsx(E,{color:"primary",onClick:ue,children:"Save Program"})]})]}),e.jsxs(V,{size:"xl",visible:u,onClose:()=>s(!1),children:[e.jsx(z,{children:e.jsx(F,{children:"Add Course"})}),e.jsx(W,{children:e.jsxs(G,{children:[e.jsx(S,{className:"mb-3",children:e.jsxs(w,{md:12,children:[e.jsx(T,{children:"Course Title"}),e.jsx(k,{value:M,onChange:c=>D(c.target.value)})]})}),e.jsx(S,{className:"mb-3",children:e.jsxs(w,{md:12,children:[e.jsx(T,{children:"Course Description"}),e.jsx(J,{value:H,onChange:c=>$(c.target.value)})]})})]})}),e.jsxs(q,{children:[e.jsx(E,{color:"secondary",onClick:()=>s(!1),children:"Close"}),e.jsx(E,{color:"primary",onClick:me,children:"Save Course"})]})]}),e.jsxs(V,{size:"xl",visible:l,onClose:()=>d(!1),children:[e.jsx(z,{children:e.jsx(F,{children:"Add Module to Course"})}),e.jsx(W,{children:e.jsxs(G,{children:[e.jsx(S,{className:"mb-3",children:e.jsxs(w,{md:12,children:[e.jsx(T,{children:"Module Title"}),e.jsx(k,{value:A,onChange:c=>_(c.target.value)})]})}),e.jsx(S,{className:"mb-3",children:e.jsxs(w,{md:12,children:[e.jsx(T,{children:"Module Description"}),e.jsx(J,{value:O,onChange:c=>le(c.target.value)})]})})]})}),e.jsxs(q,{children:[e.jsx(E,{color:"secondary",onClick:()=>d(!1),children:"Close"}),e.jsx(E,{color:"primary",onClick:pe,children:"Save Module"})]})]})]})};export{Be as default};
