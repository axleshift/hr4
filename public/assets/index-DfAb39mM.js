import{r as d,j as e,q as g,P as s}from"./index-CBN3NsPO.js";import{c as o,d as l,a as x,e as f}from"./index.esm-CcuRlmdM.js";import{a as E,b as N,c as R,d as M,e as T}from"./DefaultLayout-DIe9kNa2.js";import{C as q}from"./cil-user-CRP5HkOC.js";import{C as S,a as U}from"./CRow-CYDUnoMS.js";import{C as w,a as D}from"./CCardBody-wrEJJag6.js";import{C as P}from"./CCardHeader-DB_pdnbW.js";import{c as H}from"./cil-user-plus-9sfVD_63.js";import{C as A,a as B,b as _,c as h,d as V,e as p}from"./CTable-hRhl3TVu.js";import{c as k}from"./cil-options-sHCm5Gxk.js";import"./CCloseButton-SGXnnTS-.js";const b=({modalVisible:u,setModalVisible:j,user:r,fetchUsers:y})=>{const[t,m]=d.useState({name:"",email:"",role:"",department:"",employee_type:"",employment_status:"",date_of_hire:"",gender:"",phone_number:"",address:""});d.useEffect(()=>{r&&m({name:r.name||"",email:r.email||"",role:r.role||"",department:r.department||"",employee_type:r.employee_type||"",employment_status:r.employment_status||"",date_of_hire:r.date_of_hire||"",gender:r.gender||"",phone_number:r.phone_number||"",address:r.address||""})},[r]);const n=i=>{const{name:C,value:v}=i.target;m(F=>({...F,[C]:v}))},c=()=>{j(!1)},a=async i=>{i.preventDefault();try{await g.put(`/api/users/${r.id}`,t),y(),c()}catch(C){console.error("Error updating user profile:",C)}};return e.jsxs(E,{visible:u,onClose:c,children:[e.jsx(N,{children:e.jsx(R,{children:"Edit Profile"})}),e.jsx(M,{children:e.jsxs(q,{onSubmit:a,children:[e.jsx(o,{htmlFor:"name",children:"Full Name"}),e.jsx(l,{id:"name",name:"name",value:t.name,onChange:n}),e.jsx(o,{htmlFor:"email",children:"Email"}),e.jsx(l,{id:"email",name:"email",value:t.email,readOnly:!0}),e.jsx(o,{htmlFor:"role",children:"Role"}),e.jsx(l,{id:"role",name:"role",value:t.role,onChange:n}),e.jsx(o,{htmlFor:"department",children:"Department"}),e.jsx(l,{id:"department",name:"department",value:t.department,onChange:n}),e.jsx(o,{htmlFor:"employee_type",children:"Employee Type"}),e.jsx(l,{id:"employee_type",name:"employee_type",value:t.employee_type,onChange:n}),e.jsx(o,{htmlFor:"employment_status",children:"Employment Status"}),e.jsx(l,{id:"employment_status",name:"employment_status",value:t.employment_status,onChange:n}),e.jsx(o,{htmlFor:"date_of_hire",children:"Date of Hire"}),e.jsx(l,{id:"date_of_hire",name:"date_of_hire",type:"date",value:t.date_of_hire,onChange:n}),e.jsx(o,{htmlFor:"gender",children:"Gender"}),e.jsx(l,{id:"gender",name:"gender",value:t.gender,onChange:n}),e.jsx(o,{htmlFor:"phone_number",children:"Phone Number"}),e.jsx(l,{id:"phone_number",name:"phone_number",value:t.phone_number,onChange:n}),e.jsx(o,{htmlFor:"address",children:"Address"}),e.jsx(l,{id:"address",name:"address",value:t.address,onChange:n})]})}),e.jsxs(T,{children:[e.jsx(x,{color:"secondary",onClick:c,children:"Close"}),e.jsx(x,{color:"primary",onClick:a,children:"Save Changes"})]})]})};b.propTypes={modalVisible:s.bool.isRequired,setModalVisible:s.func.isRequired,user:s.shape({id:s.number.isRequired,name:s.string.isRequired,email:s.string.isRequired,role:s.string.isRequired,department:s.string,employee_type:s.string,employment_status:s.string,date_of_hire:s.string,gender:s.string,phone_number:s.string,address:s.string}).isRequired,fetchUsers:s.func.isRequired};const Y=()=>{const[u,j]=d.useState([]),[r,y]=d.useState(null),[t,m]=d.useState(!1);d.useEffect(()=>{n()},[]);const n=async()=>{try{const a=await g.get("/api/users");j(a.data.data)}catch(a){console.error("Error fetching users:",a)}},c=async a=>{try{const i=await g.get(`/api/users/${a}`);y(i.data.data),m(!0)}catch(i){console.error("Error fetching user profile:",i)}};return e.jsxs(S,{children:[e.jsx(U,{xs:12,children:e.jsxs(w,{className:"mb-4",children:[e.jsxs(P,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Access Control"}),e.jsxs(x,{color:"primary",children:[e.jsx(f,{icon:H,className:"me-2"})," Add User"]})]}),e.jsx(D,{children:e.jsxs(A,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[e.jsx(B,{children:e.jsxs(_,{children:[e.jsx(h,{className:"bg-body-tertiary",children:"Name"}),e.jsx(h,{className:"bg-body-tertiary",children:"Email"}),e.jsx(h,{className:"bg-body-tertiary text-center",children:"Role"}),e.jsx(h,{className:"bg-body-tertiary text-center",children:"More"})]})}),e.jsx(V,{children:u.map(a=>e.jsxs(_,{children:[e.jsx(p,{children:a.name}),e.jsx(p,{children:a.email}),e.jsx(p,{className:"text-center",children:a.role}),e.jsx(p,{className:"text-center",children:e.jsxs(x,{color:"secondary",size:"sm",onClick:()=>c(a.id),children:[e.jsx(f,{icon:k})," More"]})})]},a.id))})]})})]})}),r&&e.jsx(b,{modalVisible:t,setModalVisible:m,user:r,fetchUsers:n})]})};export{Y as default};
