import{r as a,j as e,q as d}from"./index-D8v5a4WY.js";import{C as o,a as i}from"./CRow-DgiK8Q1q.js";import{C as O,a as G}from"./CCardBody-DDeIMS0X.js";import{C as J}from"./CCardHeader-D0jkfmei.js";import{a as t,c,d as m}from"./index.esm-BP2aQwF0.js";import{C as K,a as Q,b as U,c as W}from"./CAccordionHeader-BEDNLEG5.js";import{C as X,a as Y,b as S,c as h,d as Z,e as x}from"./CTable-Chm37jKH.js";import{a as D,b as w,c as A,d as E,e as N}from"./DefaultLayout-CGsPu-Y1.js";import{C as k}from"./cil-user-8dJGLO2g.js";import{C as B}from"./CFormTextarea-Cf4wvK4F.js";import"./CCloseButton-C4qnBP5P.js";const de=()=>{const[F,l]=a.useState(!1),[H,n]=a.useState(!1),[M,C]=a.useState([]),[j,u]=a.useState([]),[I,p]=a.useState(null),[g,f]=a.useState(""),[b,v]=a.useState(""),[y,R]=a.useState(""),[P,z]=a.useState(""),[T,L]=a.useState("");a.useEffect(()=>{(async()=>{try{const r=await d.get("/api/programs");C(r.data.data)}catch(r){console.error("Error fetching programs:",r)}})()},[]),a.useEffect(()=>{(async()=>{try{const r=await d.get("/api/courses");console.log("Courses fetched:",r.data),u(r.data.data)}catch(r){console.error("Error fetching courses:",r)}})()},[]);const V=async()=>{try{const r=(await d.get("/api/programs",{title:g,description:b})).data.data;C(q=>[...q,r]),f(""),v(""),l(!1)}catch(s){console.error("Error adding program:",s)}},_=async()=>{try{const s=await d.post("/api/courses",{title:y,description:P,duration:T,program_id:I});console.log("Course saved:",s.data),u([...j,s.data]),n(!1)}catch(s){console.error("Error saving course:",s)}};return e.jsxs(o,{children:[e.jsx(i,{xs:12,children:e.jsxs(O,{className:"mb-4",children:[e.jsxs(J,{children:[e.jsx("strong",{children:"List of Programs"}),e.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:e.jsx(t,{color:"primary",onClick:()=>l(!0),children:"Add Program"})})]}),e.jsx(G,{children:e.jsx(K,{alwaysOpen:!0,children:M.map(s=>e.jsxs(Q,{children:[e.jsx(U,{onClick:()=>{p(s.id)},children:s.title}),e.jsxs(W,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",s.description]}),e.jsx(t,{color:"primary",onClick:()=>{p(s.id),n(!0)},children:"Add Course"}),e.jsxs(X,{striped:!0,className:"mt-3",children:[e.jsx(Y,{children:e.jsxs(S,{children:[e.jsx(h,{children:"Title"}),e.jsx(h,{children:"Description"}),e.jsx(h,{children:"Duration"})]})}),e.jsx(Z,{children:j.filter(r=>r.program_id===s.id).map(r=>e.jsxs(S,{children:[e.jsx(x,{children:r.title}),e.jsx(x,{children:r.description}),e.jsx(x,{children:r.duration})]},r.id))})]})]})]},s.id))})})]})}),e.jsxs(D,{size:"xl",visible:F,onClose:()=>l(!1),children:[e.jsx(w,{children:e.jsx(A,{children:"Add Program"})}),e.jsx(E,{children:e.jsxs(k,{children:[e.jsx(o,{className:"mb-3",children:e.jsxs(i,{md:12,children:[e.jsx(c,{children:"Program Title"}),e.jsx(m,{value:g,onChange:s=>f(s.target.value)})]})}),e.jsx(o,{className:"mb-3",children:e.jsxs(i,{md:12,children:[e.jsx(c,{children:"Program Description"}),e.jsx(B,{value:b,onChange:s=>v(s.target.value)})]})})]})}),e.jsxs(N,{children:[e.jsx(t,{color:"secondary",onClick:()=>l(!1),children:"Close"}),e.jsx(t,{color:"primary",onClick:V,children:"Save Program"})]})]}),e.jsxs(D,{size:"xl",visible:H,onClose:()=>n(!1),children:[e.jsx(w,{children:e.jsx(A,{children:"Add Course"})}),e.jsx(E,{children:e.jsxs(k,{children:[e.jsx(o,{className:"mb-3",children:e.jsxs(i,{md:12,children:[e.jsx(c,{children:"Course Title"}),e.jsx(m,{value:y,onChange:s=>R(s.target.value)})]})}),e.jsx(o,{className:"mb-3",children:e.jsxs(i,{md:12,children:[e.jsx(c,{children:"Course Description"}),e.jsx(B,{value:P,onChange:s=>z(s.target.value)})]})}),e.jsx(o,{className:"mb-3",children:e.jsxs(i,{md:12,children:[e.jsx(c,{children:"Course Duration"}),e.jsx(m,{value:T,onChange:s=>L(s.target.value)})]})})]})}),e.jsxs(N,{children:[e.jsx(t,{color:"secondary",onClick:()=>n(!1),children:"Close"}),e.jsx(t,{color:"primary",onClick:_,children:"Save Course"})]})]})]})};export{de as default};
