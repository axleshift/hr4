import{r as o,_ as T,R as g,a as b,c as P,P as m,j as e,q as R}from"./index-CnbRMKf9.js";import{C as I,a as K}from"./CRow-f164GlrX.js";import{C as je,a as Ee}from"./CCardBody-v6sSssAr.js";import{C as Ne}from"./CCardHeader-BZd59gld.js";import{a as E,c as A,d as O}from"./index.esm-8sZMN08-.js";import{_ as ye,f as be,a as Ae,T as we,u as Se}from"./CCloseButton-CmE1doi7.js";import{C as Te,a as Pe,b as de,c as $,d as Me,e as _}from"./CTable-CqmzYhcU.js";import{a as z,b as F,c as W,d as U,e as q}from"./DefaultLayout-C95iilSr.js";import{C as G}from"./cil-user-C47JJCD0.js";import{C as J}from"./CFormTextarea-4dxvPXiL.js";var pe=o.createContext({}),Y=o.forwardRef(function(r,t){var u=r.children,s=r.activeItemKey,l=r.alwaysOpen,d=l===void 0?!1:l,p=r.className,a=r.flush,i=T(r,["children","activeItemKey","alwaysOpen","className","flush"]),n=o.useState(s),f=n[0],v=n[1];return g.createElement("div",b({className:P("accordion",{"accordion-flush":a},p)},i,{ref:t}),g.createElement(pe.Provider,{value:{_activeItemKey:f,alwaysOpen:d,setActiveKey:v}},u))});Y.propTypes={alwaysOpen:m.bool,activeItemKey:m.oneOfType([m.number,m.string]),children:m.node,className:m.string,flush:m.bool};Y.displayName="CAccordion";var Z=o.createContext({}),ee=o.forwardRef(function(r,t){var u=r.children,s=r.className,l=r.id,d=r.itemKey,p=T(r,["children","className","id","itemKey"]),a=l??o.useId(),i=o.useRef(d??a),n=o.useContext(pe),f=n._activeItemKey,v=n.alwaysOpen,C=n.setActiveKey,x=o.useState(f===i.current),j=x[0],N=x[1];return o.useEffect(function(){!v&&j&&C(i.current)},[j]),o.useEffect(function(){N(f===i.current)},[f]),g.createElement("div",b({className:P("accordion-item",s)},p,{ref:t}),g.createElement(Z.Provider,{value:{id:a,setVisible:N,visible:j}},u))});ee.propTypes={children:m.node,className:m.string,itemKey:m.oneOfType([m.number,m.string])};ee.displayName="CAccordionItem";function X(){return X=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var u=arguments[t];for(var s in u)({}).hasOwnProperty.call(u,s)&&(r[s]=u[s])}return r},X.apply(null,arguments)}function Re(r,t){return r.classList?!!t&&r.classList.contains(t):(" "+(r.className.baseVal||r.className)+" ").indexOf(" "+t+" ")!==-1}function Ie(r,t){r.classList?r.classList.add(t):Re(r,t)||(typeof r.className=="string"?r.className=r.className+" "+t:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+t))}function ue(r,t){return r.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Ke(r,t){r.classList?r.classList.remove(t):typeof r.className=="string"?r.className=ue(r.className,t):r.setAttribute("class",ue(r.className&&r.className.baseVal||"",t))}var De=function(t,u){return t&&u&&u.split(" ").forEach(function(s){return Ie(t,s)})},Q=function(t,u){return t&&u&&u.split(" ").forEach(function(s){return Ke(t,s)})},se=function(r){ye(t,r);function t(){for(var s,l=arguments.length,d=new Array(l),p=0;p<l;p++)d[p]=arguments[p];return s=r.call.apply(r,[this].concat(d))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(a,i){var n=s.resolveArguments(a,i),f=n[0],v=n[1];s.removeClasses(f,"exit"),s.addClass(f,v?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(a,i)},s.onEntering=function(a,i){var n=s.resolveArguments(a,i),f=n[0],v=n[1],C=v?"appear":"enter";s.addClass(f,C,"active"),s.props.onEntering&&s.props.onEntering(a,i)},s.onEntered=function(a,i){var n=s.resolveArguments(a,i),f=n[0],v=n[1],C=v?"appear":"enter";s.removeClasses(f,C),s.addClass(f,C,"done"),s.props.onEntered&&s.props.onEntered(a,i)},s.onExit=function(a){var i=s.resolveArguments(a),n=i[0];s.removeClasses(n,"appear"),s.removeClasses(n,"enter"),s.addClass(n,"exit","base"),s.props.onExit&&s.props.onExit(a)},s.onExiting=function(a){var i=s.resolveArguments(a),n=i[0];s.addClass(n,"exit","active"),s.props.onExiting&&s.props.onExiting(a)},s.onExited=function(a){var i=s.resolveArguments(a),n=i[0];s.removeClasses(n,"exit"),s.addClass(n,"exit","done"),s.props.onExited&&s.props.onExited(a)},s.resolveArguments=function(a,i){return s.props.nodeRef?[s.props.nodeRef.current,a]:[a,i]},s.getClassNames=function(a){var i=s.props.classNames,n=typeof i=="string",f=n&&i?i+"-":"",v=n?""+f+a:i[a],C=n?v+"-active":i[a+"Active"],x=n?v+"-done":i[a+"Done"];return{baseClassName:v,activeClassName:C,doneClassName:x}},s}var u=t.prototype;return u.addClass=function(l,d,p){var a=this.getClassNames(d)[p+"ClassName"],i=this.getClassNames("enter"),n=i.doneClassName;d==="appear"&&p==="done"&&n&&(a+=" "+n),p==="active"&&l&&be(l),a&&(this.appliedClasses[d][p]=a,De(l,a))},u.removeClasses=function(l,d){var p=this.appliedClasses[d],a=p.base,i=p.active,n=p.done;this.appliedClasses[d]={},a&&Q(l,a),i&&Q(l,i),n&&Q(l,n)},u.render=function(){var l=this.props;l.classNames;var d=Ae(l,["classNames"]);return g.createElement(we,X({},d,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(g.Component);se.defaultProps={classNames:""};se.propTypes={};var re=o.forwardRef(function(r,t){var u=r.children,s=r.className,l=r.horizontal,d=r.onHide,p=r.onShow,a=r.visible,i=T(r,["children","className","horizontal","onHide","onShow","visible"]),n=o.useRef(null),f=Se(t,n),v=o.useState(),C=v[0],x=v[1],j=o.useState(),N=j[0],y=j[1],k=function(){if(p&&p(),l){n.current&&y(n.current.scrollWidth);return}n.current&&x(n.current.scrollHeight)},D=function(){if(l){y(0);return}x(0)},B=function(){if(l){n.current&&y(n.current.scrollWidth);return}n.current&&x(n.current.scrollHeight)},ie=function(){if(d&&d(),l){y(0);return}x(0)},oe=function(){if(l){y(0);return}x(0)};return g.createElement(se,{in:a,nodeRef:n,onEntering:k,onEntered:D,onExit:B,onExiting:ie,onExited:oe,timeout:350},function(M){var le=C===0?null:{height:C},L=N===0?null:{width:N};return g.createElement("div",b({className:P(s,{"collapse-horizontal":l,collapsing:M==="entering"||M==="exiting","collapse show":M==="entered",collapse:M==="exited"}),style:b(b({},le),L)},i,{ref:f}),u)})});re.propTypes={children:m.node,className:m.string,horizontal:m.bool,onHide:m.func,onShow:m.func,visible:m.bool};re.displayName="CCollapse";var ae=o.forwardRef(function(r,t){var u=r.children,s=r.className,l=T(r,["children","className"]),d=o.useContext(Z),p=d.id,a=d.visible;return g.createElement(re,{className:"accordion-collapse",id:p,visible:a},g.createElement("div",b({className:P("accordion-body",s)},l,{ref:t}),u))});ae.propTypes={children:m.node,className:m.string};ae.displayName="CAccordionBody";var ne=o.forwardRef(function(r,t){var u=r.children,s=r.className,l=T(r,["children","className"]),d=o.useContext(Z),p=d.id,a=d.visible,i=d.setVisible;return g.createElement("button",b({type:"button",className:P("accordion-button",{collapsed:!a},s),"aria-controls":p,"aria-expanded":a,onClick:function(){return i(!a)}},l,{ref:t}),u)});ne.propTypes={children:m.node,className:m.string};ne.displayName="CAccordionButton";var te=o.forwardRef(function(r,t){var u=r.children,s=r.className,l=T(r,["children","className"]);return g.createElement("div",b({className:P("accordion-header",s)},l,{ref:t}),g.createElement(ne,null,u))});te.propTypes={children:m.node,className:m.string};te.displayName="CAccordionHeader";const We=()=>{const[r,t]=o.useState(!1),[u,s]=o.useState(!1),[l,d]=o.useState([]),[p,a]=o.useState([]),[i,n]=o.useState([]),[f,v]=o.useState(null),[C,x]=o.useState(""),[j,N]=o.useState(""),[y,k]=o.useState(""),[D,B]=o.useState(""),[ie,oe]=o.useState(""),[M,le]=o.useState(""),[L,H]=o.useState(!1),[me,he]=o.useState(null),[w,V]=o.useState({title:"",description:"",file:null});o.useEffect(()=>{(async()=>{try{const h=await R.get("/api/programs");d(h.data.data)}catch(h){console.error("Error fetching programs:",h)}})()},[]),o.useEffect(()=>{(async()=>{try{const h=await R.get("/api/courses");a(h.data.data)}catch(h){console.error("Error fetching courses:",h)}})()},[]);const fe=async()=>{try{const h=(await R.post("/api/programs",{title:C,description:j})).data.data;d(S=>[...S,h]),x(""),N(""),t(!1)}catch(c){console.error("Error adding program:",c)}},ve=async()=>{try{const c=await R.post("/api/courses",{title:y,description:D,program_id:f});console.log("Course saved:",c.data),a([...p,c.data]),s(!1)}catch(c){console.error("Error saving course:",c)}},ce=c=>{const{id:h,value:S}=c.target;V(ge=>({...ge,[h]:S}))},Ce=c=>{V(h=>({...h,file:c.target.files[0]}))},xe=async()=>{var h;const c=new FormData;c.append("title",w.title),c.append("description",w.description),c.append("course_id",me),w.file&&c.append("file",w.file);try{await R.post("/api/modules",c,{headers:{"Content-Type":"multipart/form-data"}}),V({title:"",description:"",file:null}),H(!1)}catch(S){console.error("Error uploading module:",((h=S.response)==null?void 0:h.data)||S.message)}};return e.jsxs(I,{children:[e.jsx(K,{xs:12,children:e.jsxs(je,{className:"mb-4",children:[e.jsxs(Ne,{children:[e.jsx("strong",{children:"List of Programs"}),e.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:e.jsx(E,{color:"primary",onClick:()=>t(!0),children:"Add Program"})})]}),e.jsx(Ee,{children:e.jsx(Y,{alwaysOpen:!0,children:l.map(c=>e.jsxs(ee,{children:[e.jsx(te,{onClick:()=>{v(c.id)},children:c.title}),e.jsxs(ae,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",c.description]}),e.jsx(E,{color:"primary",onClick:()=>{v(c.id),s(!0)},children:"Add Course"}),e.jsxs(Te,{striped:!0,className:"mt-3",children:[e.jsx(Pe,{children:e.jsxs(de,{children:[e.jsx($,{children:"Title"}),e.jsx($,{children:"Description"}),e.jsx($,{children:"Module"}),e.jsx($,{children:"Actions"})]})}),e.jsx(Me,{children:p.filter(h=>h.program_id===c.id).map(h=>e.jsxs(de,{children:[e.jsx(_,{children:h.title}),e.jsx(_,{children:h.description}),e.jsx(_,{children:"â€”"})," ",e.jsx(_,{children:e.jsx(E,{size:"sm",color:"success",onClick:()=>{he(h.id),H(!0)},children:"Add Module"})})]},h.id))})]})]})]},c.id))})})]})}),e.jsxs(z,{size:"xl",visible:r,onClose:()=>t(!1),children:[e.jsx(F,{children:e.jsx(W,{children:"Add Program"})}),e.jsx(U,{children:e.jsxs(G,{children:[e.jsx(I,{className:"mb-3",children:e.jsxs(K,{md:12,children:[e.jsx(A,{children:"Program Title"}),e.jsx(O,{value:C,onChange:c=>x(c.target.value)})]})}),e.jsx(I,{className:"mb-3",children:e.jsxs(K,{md:12,children:[e.jsx(A,{children:"Program Description"}),e.jsx(J,{value:j,onChange:c=>N(c.target.value)})]})})]})}),e.jsxs(q,{children:[e.jsx(E,{color:"secondary",onClick:()=>t(!1),children:"Close"}),e.jsx(E,{color:"primary",onClick:fe,children:"Save Program"})]})]}),e.jsxs(z,{size:"xl",visible:u,onClose:()=>s(!1),children:[e.jsx(F,{children:e.jsx(W,{children:"Add Course"})}),e.jsx(U,{children:e.jsxs(G,{children:[e.jsx(I,{className:"mb-3",children:e.jsxs(K,{md:12,children:[e.jsx(A,{children:"Course Title"}),e.jsx(O,{value:y,onChange:c=>k(c.target.value)})]})}),e.jsx(I,{className:"mb-3",children:e.jsxs(K,{md:12,children:[e.jsx(A,{children:"Course Description"}),e.jsx(J,{value:D,onChange:c=>B(c.target.value)})]})})]})}),e.jsxs(q,{children:[e.jsx(E,{color:"secondary",onClick:()=>s(!1),children:"Close"}),e.jsx(E,{color:"primary",onClick:ve,children:"Save Course"})]})]}),e.jsxs(z,{size:"xl",visible:L,onClose:()=>H(!1),children:[e.jsx(F,{children:e.jsx(W,{children:"Add Module"})}),e.jsx(U,{children:e.jsxs(G,{children:[e.jsx(A,{children:"Module Title"}),e.jsx(O,{id:"title",value:w.title,onChange:ce}),e.jsx(A,{className:"mt-3",children:"Module Description"}),e.jsx(J,{id:"description",value:w.description,onChange:ce}),e.jsx(A,{className:"mt-3",children:"Upload File"}),e.jsx(O,{type:"file",onChange:Ce})]})}),e.jsxs(q,{children:[e.jsx(E,{color:"secondary",onClick:()=>H(!1),children:"Cancel"}),e.jsx(E,{color:"primary",onClick:xe,children:"Upload Module"})]})]})]})};export{We as default};
