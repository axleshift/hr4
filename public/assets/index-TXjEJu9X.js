import{a as n,j as e}from"./index-D0ykVIBh.js";import{a as m}from"./index-t--hEgTQ.js";import{C as v,a as T}from"./CRow-C7kEkgmS.js";import{C as w,a as D}from"./CCardBody-Bvtd8o25.js";import{C as N}from"./CCardHeader-DzCRFb7L.js";import{a as d}from"./index.esm-CEZIJNA6.js";import{C as E,a as S,b as k,c as L}from"./CModalHeader-DDtLaalK.js";import{C as B}from"./CModalTitle-CxTbZa01.js";import{C as H}from"./CForm-Vi-ufwid.js";import{a as x,C as b}from"./CFormInput-BEWTXsMD.js";import{C as _}from"./CFormTextarea-DNBO9X0f.js";import{C as I,a as R,b as C,c as a,d as z,e as i}from"./CTable-fJWtcUeL.js";import"./DefaultLayout-CimxNCuU.js";import"./cil-user-Ddrdy7PS.js";const Z=()=>{const[j,o]=n.useState(!1),[f,c]=n.useState([]),[t,h]=n.useState({title:"",description:"",file:null});n.useEffect(()=>{g()},[]);const g=async()=>{try{const r=await m.get("http://localhost:8000/api/modules");c(r.data.data)}catch(r){console.error("Error fetching modules:",r)}},y=async r=>{r.preventDefault();const s=new FormData;s.append("title",t.title),s.append("description",t.description),t.file&&s.append("file",t.file);try{const l=await m.post("http://localhost:8000/api/modules",s,{headers:{"Content-Type":"multipart/form-data"}});c(p=>[...p,l.data.data]),o(!1),h({title:"",description:"",file:null})}catch(l){console.error("Error adding module:",l)}},u=r=>{const{id:s,value:l}=r.target;h(p=>({...p,[s]:l}))},M=r=>{h(s=>({...s,file:r.target.files[0]}))},F=async r=>{try{await m.delete(`http://localhost:8000/api/modules/${r}`),c(s=>s.filter(l=>l.id!==r))}catch(s){console.error("Error deleting module:",s)}};return e.jsx(v,{children:e.jsx(T,{xs:12,children:e.jsxs(w,{className:"mb-4",children:[e.jsxs(N,{children:[e.jsx("strong",{children:"MODULES"}),e.jsxs("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:[e.jsx(d,{color:"primary",onClick:()=>o(!j),children:"Create Module"}),e.jsxs(E,{alignment:"center",backdrop:"static",size:"lg",visible:j,onClose:()=>o(!1),children:[e.jsx(S,{children:e.jsx(B,{children:"Create Module"})}),e.jsx(k,{children:e.jsxs(H,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"file",children:"Upload File"}),e.jsx(b,{type:"file",id:"file",onChange:M})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"title",children:"Module Title"}),e.jsx(b,{required:!0,type:"text",id:"title",value:t.title,onChange:u,placeholder:"Input title"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{htmlFor:"description",children:"Description"}),e.jsx(_,{id:"description",rows:3,value:t.description,onChange:u})]})]})}),e.jsxs(L,{children:[e.jsx(d,{color:"secondary",onClick:()=>o(!1),children:"Cancel"}),e.jsx(d,{color:"primary",onClick:y,children:"Add Module"})]})]})]})]}),e.jsx(D,{children:e.jsxs(I,{striped:!0,hover:!0,children:[e.jsx(R,{children:e.jsxs(C,{children:[e.jsx(a,{children:"#"}),e.jsx(a,{children:"Title"}),e.jsx(a,{children:"Description"}),e.jsx(a,{children:"File"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(z,{children:f.length>0?f.map((r,s)=>e.jsxs(C,{children:[e.jsx(a,{children:s+1}),e.jsx(i,{children:r.title}),e.jsx(i,{children:r.description}),e.jsx(i,{children:r.file_url?e.jsx("a",{href:r.file_url,target:"_blank",rel:"noopener noreferrer",children:r.file_name||"Download"}):e.jsx("span",{children:"No File"})}),e.jsx(i,{children:e.jsx(d,{color:"danger",size:"sm",onClick:()=>F(r.id),children:"Delete"})})]},r.id)):e.jsx(C,{children:e.jsx(i,{colSpan:5,className:"text-center",children:"No modules available."})})})]})})]})})})};export{Z as default};
