import{r as n,x as p,i as S,j as e}from"./index-DpF4t0eM.js";import{C as k,a as v}from"./CRow-CA2AhQXq.js";import{C as T,a as F}from"./CCardBody-DKNYuplE.js";import{C as B}from"./CCardHeader-g1VIpYgH.js";import{C as D}from"./CFormSelect-BuWBOOgu.js";import{C as I,a as R,b as f,c as i,d as $,e as l}from"./CTable-DjG690bP.js";import{f as A}from"./DefaultLayout-BTrirISZ.js";import"./index.esm-BiMjLsl3.js";import"./CCloseButton-D6bW1LqT.js";import"./cil-user-B-6jNmJL.js";const Q=()=>{const[c,d]=n.useState([]),[m,j]=n.useState([]),[u,C]=n.useState([]),[t,g]=n.useState({column:"employeeId",direction:"asc"}),[o,y]=n.useState("all");n.useEffect(()=>{E(),w()},[]),n.useEffect(()=>{b()},[c,m,o,t]);const E=async()=>{try{const r=await p.get("https://backend-hr1.axleshift.com/api/employees");d(r.data.data||r.data)}catch(r){console.error("Error fetching external employees:",r);try{const s=await S.get("/api/employee");d(s.data.data)}catch(s){console.error("Error fetching local employees:",s)}}},w=async()=>{try{const r=await p.get("https://backend-hr1.axleshift.com/api/newhires");j(r.data.data||r.data)}catch(r){console.error("Error fetching new hires:",r)}},b=()=>{let r=o==="newHires"?m:c;r=r.sort((s,x)=>s[t.column]<x[t.column]?t.direction==="asc"?-1:1:s[t.column]>x[t.column]?t.direction==="asc"?1:-1:0),C(r)},N=r=>{const s=r.middleName?` ${r.middleName}`:"";return`${r.firstName}${s} ${r.lastName}`},h=r=>{let s="secondary";return r==="pending"?s="warning":r==="completed"?s="success":r==="in-progress"&&(s="info"),e.jsx(A,{color:s,children:r})},a=r=>{const s=t.direction==="asc"?"desc":"asc";g({column:r,direction:s})},H=r=>e.jsxs(T,{className:"mb-4",children:[e.jsxs(B,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Employee Management"}),e.jsxs(D,{"aria-label":"Filter by",value:o,onChange:s=>y(s.target.value),style:{width:"200px"},children:[e.jsx("option",{value:"all",children:"All Employees"}),e.jsx("option",{value:"newHires",children:"New Hires"})]})]}),e.jsx(F,{children:e.jsxs(I,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[e.jsx(R,{children:e.jsxs(f,{children:[e.jsx(i,{onClick:()=>a("employeeId"),children:"Employee ID"}),e.jsx(i,{onClick:()=>a("firstName"),children:"Name"}),e.jsx(i,{onClick:()=>a("position"),children:"Position"}),e.jsx(i,{onClick:()=>a("department"),children:"Department"}),e.jsx(i,{onClick:()=>a("dateHired"),children:"Date Hired"}),e.jsx(i,{onClick:()=>a("email"),children:"Email"}),e.jsx(i,{className:"text-center",onClick:()=>a("status"),children:"Status"})]})}),e.jsx($,{style:{maxHeight:"400px",overflowY:"scroll"},children:r.slice(0,5).map(s=>e.jsxs(f,{children:[e.jsx(l,{children:s.employeeId}),e.jsx(l,{children:N(s)}),e.jsx(l,{children:s.position}),e.jsx(l,{children:s.department}),e.jsx(l,{children:s.dateHired}),e.jsx(l,{children:s.email}),e.jsx(l,{className:"text-center",children:s.trainingStatus?h(s.trainingStatus.status):h("pending")})]},s.id))})]})})]});return e.jsx(k,{children:e.jsx(v,{xs:12,children:H(u)})})};export{Q as default};
