import{r as o,j as e,P as s,q as g}from"./index-C7u1zMr0.js";import{c as j,d as b,a as u,e as _}from"./index.esm-B5yZlMBc.js";import{a as N,b as S,c as F,d as T,e as U}from"./DefaultLayout-DOoKyGwC.js";import{C as q}from"./cil-user-CmeYQlzE.js";import{C as R}from"./CFormSelect-DxkMr_Sc.js";import{C as w,a as A}from"./CRow-CmRTAgDA.js";import{C as D,a as M}from"./CCardBody-DP_e_7tN.js";import{C as P}from"./CCardHeader-VpDc0NYc.js";import{c as B}from"./cil-user-plus-9sfVD_63.js";import{C as H,a as k,b as v,c as C,d as $,e as h}from"./CTable-BgStCAxn.js";import{c as z}from"./cil-options-sHCm5Gxk.js";import"./CCloseButton-BtMePCbA.js";const E=({modalVisible:f,setModalVisible:i,user:a,fetchUsers:y,roles:c})=>{const[n,x]=o.useState({name:"",email:"",role:"",department:"",employee_type:"",employment_status:"",date_of_hire:"",gender:"",phone_number:"",address:""});o.useEffect(()=>{a&&x({name:a.name||"",email:a.email||"",role:a.role||"",department:a.department||"",employee_type:a.employee_type||"",employment_status:a.employment_status||"",date_of_hire:a.date_of_hire||"",gender:a.gender||"",phone_number:a.phone_number||"",address:a.address||""})},[a]);const l=t=>{const{name:m,value:r}=t.target;x(p=>({...p,[m]:r}))},d=async t=>{t.preventDefault();try{await api.put(`/api/users/${a.id}`,n),y(),i(!1)}catch(m){console.error("Error updating user profile:",m)}};return e.jsxs(N,{visible:f,onClose:()=>i(!1),size:"lg",children:[e.jsx(S,{children:e.jsx(F,{children:"Edit Profile"})}),e.jsx(T,{children:e.jsxs(q,{onSubmit:d,children:[e.jsx(j,{htmlFor:"name",children:"Full Name"}),e.jsx(b,{id:"name",name:"name",value:n.name,onChange:l}),e.jsx(j,{htmlFor:"email",children:"Email"}),e.jsx(b,{id:"email",name:"email",value:n.email,readOnly:!0}),e.jsx(j,{htmlFor:"role",children:"Role"}),e.jsxs(R,{id:"role",name:"role",value:n.role,onChange:l,children:[e.jsx("option",{value:"",children:"Select Role"}),Array.isArray(c)&&c.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx(j,{htmlFor:"department",children:"Department"}),e.jsx(R,{id:"department",name:"department",value:n.department,onChange:l,children:e.jsx("option",{value:"",children:"Select Department"})})]})}),e.jsxs(U,{children:[e.jsx(u,{color:"secondary",onClick:()=>i(!1),children:"Close"}),e.jsx(u,{color:"primary",onClick:d,children:"Save Changes"})]})]})};E.propTypes={modalVisible:s.bool.isRequired,setModalVisible:s.func.isRequired,user:s.shape({id:s.number.isRequired,name:s.string,email:s.string,role:s.string,department:s.string,employee_type:s.string,employment_status:s.string,date_of_hire:s.string,gender:s.string,phone_number:s.string,address:s.string}).isRequired,fetchUsers:s.func.isRequired,roles:s.array.isRequired};const ee=()=>{const[f,i]=o.useState([]),[a,y]=o.useState([]),[c,n]=o.useState(null),[x,l]=o.useState(!1);o.useEffect(()=>{d(),t()},[]);const d=async()=>{try{const r=await g.get("/api/users");i(r.data.data)}catch(r){console.error("Error fetching users:",r)}},t=async()=>{try{const r=await g.get("/api/roles");y(r.data)}catch(r){console.error("Error fetching roles:",r)}},m=async r=>{try{const p=await g.get(`/api/users/${r}`);n(p.data.data),l(!0)}catch(p){console.error("Error fetching user profile:",p)}};return e.jsxs(w,{children:[e.jsx(A,{xs:12,children:e.jsxs(D,{className:"mb-4",children:[e.jsxs(P,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Access Control"}),e.jsxs(u,{color:"primary",children:[e.jsx(_,{icon:B,className:"me-2"}),"Add User"]})]}),e.jsx(M,{children:e.jsxs(H,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[e.jsx(k,{children:e.jsxs(v,{children:[e.jsx(C,{children:"Name"}),e.jsx(C,{children:"Email"}),e.jsx(C,{className:"text-center",children:"Role"}),e.jsx(C,{className:"text-center",children:"Actions"})]})}),e.jsx($,{children:f.map(r=>e.jsxs(v,{children:[e.jsx(h,{children:r.name}),e.jsx(h,{children:r.email}),e.jsx(h,{className:"text-center",children:r.role}),e.jsx(h,{className:"text-center",children:r.department}),e.jsx(h,{className:"text-center",children:e.jsxs(u,{color:"secondary",size:"sm",onClick:()=>m(r.id),children:[e.jsx(_,{icon:z,className:"me-1"}),"More"]})})]},r.id))})]})})]})}),c&&e.jsx(E,{modalVisible:x,setModalVisible:l,user:c,fetchUsers:d,roles:a})]})};export{ee as default};
