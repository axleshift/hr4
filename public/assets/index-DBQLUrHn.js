import{r as o,i as f,j as e}from"./index-B-bStDXG.js";import{C as M,a as D}from"./CRow-WZrP-GNl.js";import{C as E,a as q}from"./CCardBody-BLSXzXXW.js";import{C as I}from"./CCardHeader-C8yRHxzR.js";import{a as d}from"./index.esm-BE5dqi0K.js";import{C as $,a as k,b as B}from"./CModalHeader-U3NhAAeE.js";import{C as N}from"./CModalTitle-DPGCgfiH.js";import{C as P}from"./CForm-BMqmO1xF.js";import{a as c,C as m}from"./CFormInput-CB-zuSvj.js";import{C as A}from"./CModalFooter-BRsfRJAJ.js";import{C as H,a as L,b as y,c as r,d as R}from"./CTable-nV2lEdcv.js";import{C as O}from"./DefaultLayout-DPazaI7a.js";import"./CCloseButton-Lv6jMc8C.js";import"./cil-user-Ddrdy7PS.js";const ne=()=>{const[T,h]=o.useState(!1),[x,g]=o.useState([]),[n,u]=o.useState({event_title:"",delivery_method:"",event_location:"",schedule:"",start_time:"",end_time:""});o.useEffect(()=>{C()},[]);const C=async()=>{try{const t=await f.get("/training");g(t.data.data)}catch(t){console.error("Error fetching trainings:",t)}},a=t=>{const{name:s,value:i}=t.target;u({...n,[s]:i})},b=async t=>{t.preventDefault();try{await f.post("/training",n),h(!1),C(),u({event_title:"",delivery_method:"",event_location:"",schedule:"",start_time:"",end_time:""})}catch(s){console.error("Error adding training:",s)}},S=x.filter((t,s,i)=>s===i.findIndex(l=>l.event_title===t.event_title)),w=x.filter((t,s,i)=>s===i.findIndex(l=>l.delivery_method===t.delivery_method)),j=(t,s,i)=>{const l=new Date,v=new Date(`${t}T${s}`),p=new Date(`${t}T${i}`);return l<v?"Pending":l<=p?"Ongoing":"Complete"},_=t=>{const[s,i]=t.split(":"),l=parseInt(s,10),v=l>=12?"PM":"AM";return`${l%12||12}:${i} ${v}`},[V,F]=o.useState(new Date);return o.useEffect(()=>{const t=setInterval(()=>{F(new Date)},1e3);return()=>clearInterval(t)},[]),e.jsx(M,{children:e.jsx(D,{xs:12,children:e.jsxs(E,{className:"mb-4",children:[e.jsxs(I,{children:[e.jsx("strong",{children:"Training Schedule"}),e.jsxs("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:[e.jsx(d,{color:"primary",onClick:()=>h(!0),children:"Add Stuff"}),e.jsxs($,{alignment:"center",backdrop:"static",size:"lg",visible:T,onClose:()=>h(!1),children:[e.jsx(k,{children:e.jsx(N,{children:"Add Stuff"})}),e.jsx(B,{children:e.jsxs(P,{onSubmit:b,children:[e.jsx(c,{htmlFor:"event_title",children:"Training Class"}),e.jsx(m,{type:"text",id:"event_title",name:"event_title",value:n.event_title,onChange:a,required:!0}),e.jsx("div",{children:S.map(t=>e.jsx(d,{color:"secondary",variant:"outline",className:"me-2",onClick:()=>u({...n,event_title:t.event_title}),children:t.event_title},t.id))}),e.jsx(c,{htmlFor:"delivery_method",children:"Type of Delivery Method"}),e.jsx(m,{type:"text",id:"delivery_method",name:"delivery_method",value:n.delivery_method,onChange:a,required:!0}),e.jsx("div",{children:w.map(t=>e.jsx(d,{color:"secondary",variant:"outline",className:"me-2",onClick:()=>u({...n,delivery_method:t.delivery_method}),children:t.delivery_method},t.id))}),e.jsx(c,{htmlFor:"event_location",children:"event_location / Mode"}),e.jsx(m,{type:"text",id:"event_location",name:"event_location",value:n.event_location,onChange:a,required:!0}),e.jsx(c,{htmlFor:"schedule",children:"Schedule"}),e.jsx(m,{type:"date",id:"schedule",name:"schedule",value:n.schedule,onChange:a,required:!0}),e.jsx(c,{htmlFor:"start_time",children:"Start Time"}),e.jsx(m,{type:"time",id:"start_time",name:"start_time",value:n.start_time,onChange:a,required:!0}),e.jsx(c,{htmlFor:"end_time",children:"End Time"}),e.jsx(m,{type:"time",id:"end_time",name:"end_time",value:n.end_time,onChange:a,required:!0}),e.jsxs(A,{children:[e.jsx(d,{color:"secondary",onClick:()=>h(!1),children:"Cancel"}),e.jsx(d,{color:"primary",type:"submit",children:"Add Module"})]})]})})]})]})]}),e.jsx(q,{children:e.jsxs(H,{children:[e.jsx(L,{children:e.jsxs(y,{children:[e.jsx(r,{children:"Training Class"}),e.jsx(r,{children:"Delivery Method"}),e.jsx(r,{children:"Event Location"}),e.jsx(r,{children:"Schedule"}),e.jsx(r,{children:"Start Time"}),e.jsx(r,{children:"End Time"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Participants"})]})}),e.jsx(R,{children:x.map(t=>e.jsxs(y,{children:[e.jsx(r,{children:t.event_title}),e.jsx(r,{children:t.delivery_method}),e.jsx(r,{children:t.event_location}),e.jsx(r,{children:t.schedule}),e.jsx(r,{children:_(t.start_time)}),e.jsx(r,{children:_(t.end_time)}),e.jsx(r,{children:e.jsx(O,{color:j(t.schedule,t.start_time,t.end_time)==="Pending"?"warning":j(t.schedule,t.start_time,t.end_time)==="Ongoing"?"info":"success",className:"ms-2",children:j(t.schedule,t.start_time,t.end_time)})}),e.jsx(r,{children:e.jsx(d,{color:"primary",variant:"outline",children:"View Participants"})})]},t.id))})]})})]})})})};export{ne as default};
