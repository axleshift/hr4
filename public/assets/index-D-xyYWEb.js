import{r as m,j as e,q as f,P as a}from"./index-9Ga_QVsW.js";import{c as l,d as i,a as x,e as b}from"./index.esm-DbN6gc2M.js";import{a as F,b as E,c as S,d as T,e as M}from"./DefaultLayout-3JLOUB-U.js";import{C as R}from"./cil-user-B90ypDXy.js";import{C as D}from"./CFormSelect-BKTT_AUu.js";import{C as q,a as w}from"./CRow-DwNROKie.js";import{C as H,a as P}from"./CCardBody-Jt1VmHdK.js";import{C as V}from"./CCardHeader-BcsVgn-M.js";import{c as k}from"./cil-user-plus-9sfVD_63.js";import{C as A,a as B,b as L,c as h,d as I,e as p}from"./CTable-CYgXDZLH.js";import{c as O}from"./cil-options-sHCm5Gxk.js";import"./CCloseButton-D1HwUcHz.js";const N=({modalVisible:u,setModalVisible:j,user:s,fetchUsers:y})=>{const n=o=>o||"NULL",[t,c]=m.useState({name:"NULL",email:"NULL",role:"NULL",department:"NULL",employee_type:"NULL",employment_status:"NULL",date_of_hire:"NULL",gender:"NULL",phone_number:"NULL",address:"NULL"}),C=["HR","Finance","Sales","IT","Marketing","Customer Service","Operations","Training"];m.useEffect(()=>{s&&c({name:n(s.name),email:n(s.email),role:n(s.role),department:n(s.department),employee_type:n(s.employee_type),employment_status:n(s.employment_status),date_of_hire:n(s.date_of_hire),gender:n(s.gender),phone_number:n(s.phone_number),address:n(s.address)})},[s]);const r=o=>{const{name:g,value:U}=o.target;c(v=>({...v,[g]:U||"NULL"}))},d=()=>{j(!1)},_=async o=>{o.preventDefault();try{await f.put(`/api/users/${s.id}`,t),y(),d()}catch(g){console.error("Error updating user profile:",g)}};return e.jsxs(F,{visible:u,onClose:d,children:[e.jsx(E,{children:e.jsx(S,{children:"Edit Profile"})}),e.jsx(T,{children:e.jsxs(R,{onSubmit:_,children:[e.jsx(l,{htmlFor:"name",children:"Full Name"}),e.jsx(i,{id:"name",name:"name",value:t.name,onChange:r}),e.jsx(l,{htmlFor:"email",children:"Email"}),e.jsx(i,{id:"email",name:"email",value:t.email,readOnly:!0}),e.jsx(l,{htmlFor:"role",children:"Role"}),e.jsx(i,{id:"role",name:"role",value:t.role,onChange:r}),e.jsx(l,{htmlFor:"department",children:"Department"}),e.jsxs(D,{id:"department",name:"department",value:t.department,onChange:r,children:[e.jsx("option",{value:"NULL",children:"Select Department"}),C.map(o=>e.jsx("option",{value:o,children:o},o))]}),e.jsx(l,{htmlFor:"employee_type",children:"Employee Type"}),e.jsx(i,{id:"employee_type",name:"employee_type",value:t.employee_type,onChange:r}),e.jsx(l,{htmlFor:"employment_status",children:"Employment Status"}),e.jsx(i,{id:"employment_status",name:"employment_status",value:t.employment_status,onChange:r}),e.jsx(l,{htmlFor:"date_of_hire",children:"Date of Hire"}),e.jsx(i,{id:"date_of_hire",name:"date_of_hire",type:"date",value:t.date_of_hire,onChange:r}),e.jsx(l,{htmlFor:"gender",children:"Gender"}),e.jsx(i,{id:"gender",name:"gender",value:t.gender,onChange:r}),e.jsx(l,{htmlFor:"phone_number",children:"Phone Number"}),e.jsx(i,{id:"phone_number",name:"phone_number",value:t.phone_number,onChange:r}),e.jsx(l,{htmlFor:"address",children:"Address"}),e.jsx(i,{id:"address",name:"address",value:t.address,onChange:r})]})}),e.jsxs(M,{children:[e.jsx(x,{color:"secondary",onClick:d,children:"Close"}),e.jsx(x,{color:"primary",onClick:_,children:"Save Changes"})]})]})};N.propTypes={modalVisible:a.bool.isRequired,setModalVisible:a.func.isRequired,user:a.shape({id:a.number.isRequired,name:a.string,email:a.string,role:a.string,department:a.string,employee_type:a.string,employment_status:a.string,date_of_hire:a.string,gender:a.string,phone_number:a.string,address:a.string}).isRequired,fetchUsers:a.func.isRequired};const se=()=>{const[u,j]=m.useState([]),[s,y]=m.useState(null),[n,t]=m.useState(!1);m.useEffect(()=>{c()},[]);const c=async()=>{try{const r=await f.get("/api/users");j(r.data.data)}catch(r){console.error("Error fetching users:",r)}},C=async r=>{try{const d=await f.get(`/api/users/${r}`);y(d.data.data),t(!0)}catch(d){console.error("Error fetching user profile:",d)}};return e.jsxs(q,{children:[e.jsx(w,{xs:12,children:e.jsxs(H,{className:"mb-4",children:[e.jsxs(V,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Access Control"}),e.jsxs(x,{color:"primary",children:[e.jsx(b,{icon:k,className:"me-2"})," Add User"]})]}),e.jsx(P,{children:e.jsxs(A,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[e.jsx(B,{children:e.jsxs(L,{children:[e.jsx(h,{className:"bg-body-tertiary",children:"Name"}),e.jsx(h,{className:"bg-body-tertiary",children:"Email"}),e.jsx(h,{className:"bg-body-tertiary text-center",children:"Role"}),e.jsx(h,{className:"bg-body-tertiary text-center",children:"More"})]})}),e.jsx(I,{children:u.map(r=>e.jsxs(L,{children:[e.jsx(p,{children:r.name}),e.jsx(p,{children:r.email}),e.jsx(p,{className:"text-center",children:r.role}),e.jsx(p,{className:"text-center",children:e.jsxs(x,{color:"secondary",size:"sm",onClick:()=>C(r.id),children:[e.jsx(b,{icon:O})," More"]})})]},r.id))})]})})]})}),s&&e.jsx(N,{modalVisible:n,setModalVisible:t,user:s,fetchUsers:c})]})};export{se as default};
