import{r as l,_ as q,R as x,a as T,c as K,P as o,j as e,h as H}from"./index-CQlAYqkb.js";import{a as M,b as z,c as W,d as U}from"./DefaultLayout-CYPSq5QG.js";import{C as ne}from"./CModalTitle-2v6JyzoR.js";import{C as oe}from"./CForm-Cda0ws8B.js";import{C as D,a as F}from"./CRow-J-Im3nHI.js";import{c as I,a as E}from"./index.esm-Bjmbyhe4.js";import{C as G}from"./CFormInput-CjYn8D5i.js";import{C as le}from"./CFormTextarea-DmSxJmU_.js";import{C as je,a as Ne}from"./CCardBody-IW5uDjsh.js";import{C as be}from"./CCardHeader-CAnLSaPV.js";import{_ as ye,f as Ee,a as we,T as Te,u as Se}from"./CCloseButton-B6fDL_NU.js";import{C as Re,a as Pe,b as ce,c as k,d as Ae,e as L}from"./CTable-D0Ur-5_8.js";import"./cil-user-Ddrdy7PS.js";var ue=l.createContext({}),X=l.forwardRef(function(r,t){var p=r.children,s=r.activeItemKey,c=r.alwaysOpen,d=c===void 0?!1:c,u=r.className,i=r.flush,n=q(r,["children","activeItemKey","alwaysOpen","className","flush"]),a=l.useState(s),f=a[0],h=a[1];return x.createElement("div",T({className:K("accordion",{"accordion-flush":i},u)},n,{ref:t}),x.createElement(ue.Provider,{value:{_activeItemKey:f,alwaysOpen:d,setActiveKey:h}},p))});X.propTypes={alwaysOpen:o.bool,activeItemKey:o.oneOfType([o.number,o.string]),children:o.node,className:o.string,flush:o.bool};X.displayName="CAccordion";var Y=l.createContext({}),Z=l.forwardRef(function(r,t){var p=r.children,s=r.className,c=r.id,d=r.itemKey,u=q(r,["children","className","id","itemKey"]),i=c??l.useId(),n=l.useRef(d??i),a=l.useContext(ue),f=a._activeItemKey,h=a.alwaysOpen,C=a.setActiveKey,g=l.useState(f===n.current),N=g[0],b=g[1];return l.useEffect(function(){!h&&N&&C(n.current)},[N]),l.useEffect(function(){b(f===n.current)},[f]),x.createElement("div",T({className:K("accordion-item",s)},u,{ref:t}),x.createElement(Y.Provider,{value:{id:i,setVisible:b,visible:N}},p))});Z.propTypes={children:o.node,className:o.string,itemKey:o.oneOfType([o.number,o.string])};Z.displayName="CAccordionItem";function Q(){return Q=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var p=arguments[t];for(var s in p)({}).hasOwnProperty.call(p,s)&&(r[s]=p[s])}return r},Q.apply(null,arguments)}function De(r,t){return r.classList?!!t&&r.classList.contains(t):(" "+(r.className.baseVal||r.className)+" ").indexOf(" "+t+" ")!==-1}function Fe(r,t){r.classList?r.classList.add(t):De(r,t)||(typeof r.className=="string"?r.className=r.className+" "+t:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+t))}function de(r,t){return r.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function qe(r,t){r.classList?r.classList.remove(t):typeof r.className=="string"?r.className=de(r.className,t):r.setAttribute("class",de(r.className&&r.className.baseVal||"",t))}var Ke=function(t,p){return t&&p&&p.split(" ").forEach(function(s){return Fe(t,s)})},J=function(t,p){return t&&p&&p.split(" ").forEach(function(s){return qe(t,s)})},ee=function(r){ye(t,r);function t(){for(var s,c=arguments.length,d=new Array(c),u=0;u<c;u++)d[u]=arguments[u];return s=r.call.apply(r,[this].concat(d))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(i,n){var a=s.resolveArguments(i,n),f=a[0],h=a[1];s.removeClasses(f,"exit"),s.addClass(f,h?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(i,n)},s.onEntering=function(i,n){var a=s.resolveArguments(i,n),f=a[0],h=a[1],C=h?"appear":"enter";s.addClass(f,C,"active"),s.props.onEntering&&s.props.onEntering(i,n)},s.onEntered=function(i,n){var a=s.resolveArguments(i,n),f=a[0],h=a[1],C=h?"appear":"enter";s.removeClasses(f,C),s.addClass(f,C,"done"),s.props.onEntered&&s.props.onEntered(i,n)},s.onExit=function(i){var n=s.resolveArguments(i),a=n[0];s.removeClasses(a,"appear"),s.removeClasses(a,"enter"),s.addClass(a,"exit","base"),s.props.onExit&&s.props.onExit(i)},s.onExiting=function(i){var n=s.resolveArguments(i),a=n[0];s.addClass(a,"exit","active"),s.props.onExiting&&s.props.onExiting(i)},s.onExited=function(i){var n=s.resolveArguments(i),a=n[0];s.removeClasses(a,"exit"),s.addClass(a,"exit","done"),s.props.onExited&&s.props.onExited(i)},s.resolveArguments=function(i,n){return s.props.nodeRef?[s.props.nodeRef.current,i]:[i,n]},s.getClassNames=function(i){var n=s.props.classNames,a=typeof n=="string",f=a&&n?n+"-":"",h=a?""+f+i:n[i],C=a?h+"-active":n[i+"Active"],g=a?h+"-done":n[i+"Done"];return{baseClassName:h,activeClassName:C,doneClassName:g}},s}var p=t.prototype;return p.addClass=function(c,d,u){var i=this.getClassNames(d)[u+"ClassName"],n=this.getClassNames("enter"),a=n.doneClassName;d==="appear"&&u==="done"&&a&&(i+=" "+a),u==="active"&&c&&Ee(c),i&&(this.appliedClasses[d][u]=i,Ke(c,i))},p.removeClasses=function(c,d){var u=this.appliedClasses[d],i=u.base,n=u.active,a=u.done;this.appliedClasses[d]={},i&&J(c,i),n&&J(c,n),a&&J(c,a)},p.render=function(){var c=this.props;c.classNames;var d=we(c,["classNames"]);return x.createElement(Te,Q({},d,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(x.Component);ee.defaultProps={classNames:""};ee.propTypes={};var se=l.forwardRef(function(r,t){var p=r.children,s=r.className,c=r.horizontal,d=r.onHide,u=r.onShow,i=r.visible,n=q(r,["children","className","horizontal","onHide","onShow","visible"]),a=l.useRef(null),f=Se(t,a),h=l.useState(),C=h[0],g=h[1],N=l.useState(),b=N[0],y=N[1],R=function(){if(u&&u(),c){a.current&&y(a.current.scrollWidth);return}a.current&&g(a.current.scrollHeight)},$=function(){if(c){y(0);return}g(0)},P=function(){if(c){a.current&&y(a.current.scrollWidth);return}a.current&&g(a.current.scrollHeight)},O=function(){if(d&&d(),c){y(0);return}g(0)},A=function(){if(c){y(0);return}g(0)};return x.createElement(ee,{in:i,nodeRef:a,onEntering:R,onEntered:$,onExit:P,onExiting:O,onExited:A,timeout:350},function(S){var V=C===0?null:{height:C},_=b===0?null:{width:b};return x.createElement("div",T({className:K(s,{"collapse-horizontal":c,collapsing:S==="entering"||S==="exiting","collapse show":S==="entered",collapse:S==="exited"}),style:T(T({},V),_)},n,{ref:f}),p)})});se.propTypes={children:o.node,className:o.string,horizontal:o.bool,onHide:o.func,onShow:o.func,visible:o.bool};se.displayName="CCollapse";var re=l.forwardRef(function(r,t){var p=r.children,s=r.className,c=q(r,["children","className"]),d=l.useContext(Y),u=d.id,i=d.visible;return x.createElement(se,{className:"accordion-collapse",id:u,visible:i},x.createElement("div",T({className:K("accordion-body",s)},c,{ref:t}),p))});re.propTypes={children:o.node,className:o.string};re.displayName="CAccordionBody";var ie=l.forwardRef(function(r,t){var p=r.children,s=r.className,c=q(r,["children","className"]),d=l.useContext(Y),u=d.id,i=d.visible,n=d.setVisible;return x.createElement("button",T({type:"button",className:K("accordion-button",{collapsed:!i},s),"aria-controls":u,"aria-expanded":i,onClick:function(){return n(!i)}},c,{ref:t}),p)});ie.propTypes={children:o.node,className:o.string};ie.displayName="CAccordionButton";var ae=l.forwardRef(function(r,t){var p=r.children,s=r.className,c=q(r,["children","className"]);return x.createElement("div",T({className:K("accordion-header",s)},c,{ref:t}),x.createElement(ie,null,p))});ae.propTypes={children:o.node,className:o.string};ae.displayName="CAccordionHeader";const pe=({visibleProgram:r,setVisibleProgram:t,programTitle:p,setProgramTitle:s,programDescription:c,setProgramDescription:d,handleSaveProgram:u,visibleCourse:i,setVisibleCourse:n,courseTitle:a,setCourseTitle:f,courseDescription:h,setCourseDescription:C,setCourseFile:g,handleSaveCourse:N,modalVisible:b,setModalVisible:y,base64Doc:R,mimeType:$,fileName:P})=>{const[O,A]=l.useState(!1),[S,V]=l.useState(null),[_,me]=l.useState(""),[te,fe]=l.useState("");return e.jsxs(e.Fragment,{children:[e.jsxs(M,{size:"lg",visible:r,onClose:()=>t(!1),children:[e.jsx(z,{children:e.jsx(ne,{children:"Add Program"})}),e.jsx(W,{children:e.jsxs(oe,{children:[e.jsx(D,{className:"mb-3",children:e.jsxs(F,{md:12,children:[e.jsx(I,{children:"Program Title"}),e.jsx(G,{value:p,onChange:j=>s(j.target.value)})]})}),e.jsx(D,{className:"mb-3",children:e.jsxs(F,{md:12,children:[e.jsx(I,{children:"Program Description"}),e.jsx(le,{value:c,onChange:j=>d(j.target.value)})]})})]})}),e.jsxs(U,{children:[e.jsx(E,{color:"secondary",onClick:()=>t(!1),children:"Close"}),e.jsx(E,{color:"primary",onClick:u,children:"Save Program"})]})]}),e.jsxs(M,{size:"lg",visible:i,onClose:()=>n(!1),children:[e.jsx(z,{children:e.jsx(ne,{children:"Add Course"})}),e.jsx(W,{children:e.jsxs(oe,{children:[e.jsx(D,{className:"mb-3",children:e.jsxs(F,{md:12,children:[e.jsx(I,{children:"Course Title"}),e.jsx(G,{value:a,onChange:j=>f(j.target.value)})]})}),e.jsx(D,{className:"mb-3",children:e.jsxs(F,{md:12,children:[e.jsx(I,{children:"Course Description"}),e.jsx(le,{value:h,onChange:j=>C(j.target.value)})]})}),e.jsx(D,{className:"mb-3",children:e.jsxs(F,{md:12,children:[e.jsx(I,{children:"Upload File"}),e.jsx(G,{type:"file",onChange:j=>g(j.target.files[0])})]})})]})}),e.jsxs(U,{children:[e.jsx(E,{color:"secondary",onClick:()=>n(!1),children:"Close"}),e.jsx(E,{color:"primary",onClick:N,children:"Save Course"})]})]}),e.jsxs(M,{visible:b,onClose:()=>y(!1),children:[e.jsx(z,{children:"Course Document Preview"}),e.jsx(W,{children:R?$==="application/pdf"?e.jsx("iframe",{src:R,style:{width:"100%",height:"500px",border:"none"}}):e.jsx("iframe",{src:`https://view.officeapps.live.com/op/embed.aspx?src=${R}`,style:{width:"100%",height:"500px",border:"none"}}):e.jsx("p",{children:"No preview available."})}),e.jsx(U,{children:e.jsx(E,{color:"secondary",onClick:()=>y(!1),children:"Close"})})]})]})};pe.propTypes={visibleProgram:o.bool.isRequired,setVisibleProgram:o.func.isRequired,programTitle:o.string.isRequired,setProgramTitle:o.func.isRequired,programDescription:o.string.isRequired,setProgramDescription:o.func.isRequired,handleSaveProgram:o.func.isRequired,visibleCourse:o.bool.isRequired,setVisibleCourse:o.func.isRequired,courseTitle:o.string.isRequired,setCourseTitle:o.func.isRequired,courseDescription:o.string.isRequired,setCourseDescription:o.func.isRequired,setCourseFile:o.func.isRequired,handleSaveCourse:o.func.isRequired,modalVisible:o.bool.isRequired,setModalVisible:o.func.isRequired,base64Doc:o.string.isRequired,mimeType:o.string.isRequired,fileName:o.string.isRequired};const Je=()=>{const[r,t]=l.useState([]),[p,s]=l.useState([]),[c,d]=l.useState(""),[u,i]=l.useState(""),[n,a]=l.useState(""),[f,h]=l.useState(""),[C,g]=l.useState(null),[N,b]=l.useState(null),[y,R]=l.useState(null),[$,P]=l.useState(!1),[O,A]=l.useState(!1),[S,V]=l.useState(!1),[_,me]=l.useState(""),[te,fe]=l.useState(""),[j,$e]=l.useState("");l.useEffect(()=>{(async()=>{try{const m=await H.get("/api/programs");t(m.data.data)}catch(m){console.error("Error fetching programs:",m)}})()},[]);const he=async v=>{try{const m=await H.get(`/api/courses?program_id=${v}`);s(m.data.data)}catch(m){console.error("Error fetching courses:",m)}},ve=async()=>{if(!c||!u){alert("Please provide both title and description for the program.");return}try{const v=await H.post("/api/programs",{title:c,description:u});t(m=>[...m,v.data.data]),d(""),i(""),P(!1)}catch(v){console.error("Error adding program:",v),alert("Failed to add program.")}},Ce=async v=>{if(v.preventDefault(),!n||!f){alert("Please provide both title and description for the course.");return}const m=new FormData;m.append("title",n),m.append("description",f),m.append("program_id",N),C&&m.append("file",C);try{const w=await H.post("/api/courses",m,{headers:{"Content-Type":"multipart/form-data"}});s(B=>[...B,w.data]),A(!1),a(""),h(""),g(null)}catch(w){console.error("Error saving course:",w),alert("Failed to save course.")}},ge=async v=>{try{await H.delete(`/api/courses/${v}`),s(m=>m.filter(w=>w.id!==v))}catch(m){console.error("Error deleting course:",m),alert("Failed to delete course.")}},xe=v=>{fetchDocPreview(v)};return e.jsxs(D,{children:[e.jsx(F,{xs:12,children:e.jsxs(je,{className:"mb-4",children:[e.jsxs(be,{children:[e.jsx("strong",{children:"List of Programs"}),e.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:e.jsx(E,{color:"primary",onClick:()=>P(!0),children:"Add Program"})})]}),e.jsx(Ne,{children:e.jsx(X,{alwaysOpen:!0,children:r.map(v=>e.jsxs(Z,{children:[e.jsx(ae,{onClick:()=>{he(v.id)},children:v.title}),e.jsxs(re,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",v.description]}),e.jsx(E,{color:"primary",onClick:()=>{b(v.id),A(!0)},children:"Add Course"}),e.jsxs(Re,{striped:!0,className:"mt-3",children:[e.jsx(Pe,{children:e.jsxs(ce,{children:[e.jsx(k,{children:"Course Title"}),e.jsx(k,{children:"Description"}),e.jsx(k,{children:"File"}),e.jsx(k,{children:"Actions"})]})}),e.jsx(Ae,{children:p.filter(m=>m.program_id===v.id).map(m=>{var w,B;return e.jsxs(ce,{children:[e.jsx(L,{children:m.title}),e.jsx(L,{children:m.description}),e.jsx(L,{children:(w=m.file_name)!=null&&w.endsWith(".docx")||(B=m.file_name)!=null&&B.endsWith(".pdf")?e.jsx(E,{color:"info",onClick:()=>xe(m.id),children:"View"}):e.jsx("span",{children:"No File"})}),e.jsx(L,{children:e.jsx(E,{color:"danger",onClick:()=>ge(m.id),children:"Delete"})})]},m.id)})})]})]})]},v.id))})})]})}),e.jsx(pe,{visibleProgram:$,setVisibleProgram:P,programTitle:c,setProgramTitle:d,programDescription:u,setProgramDescription:i,handleSaveProgram:ve,visibleCourse:O,setVisibleCourse:A,courseTitle:n,setCourseTitle:a,courseDescription:f,setCourseDescription:h,setCourseFile:g,handleSaveCourse:Ce,modalVisible:S,setModalVisible:V,base64Doc:_,mimeType:te,fileName:j})]})};export{Je as default};
