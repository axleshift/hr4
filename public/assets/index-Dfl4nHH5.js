import{r as o,_ as R,R as f,b as p,c as H,P as n,d as W,j as e}from"./index-D2jFRD8E.js";import{a as $}from"./axios-upsvKRUO.js";import{C as J,a as q}from"./CRow-DULDCFn-.js";import{C as z,a as Q}from"./CCardBody-DIIyknoc.js";import{C as U}from"./CCardHeader-DsfJINjQ.js";import{C as X,a as Y}from"./CInputGroupText-C_Hhe3iu.js";import{C as Z}from"./CFormInput-Dco99Eg6.js";import{C as ee,a as se,b as K,c as T,d as re,e as b}from"./CTable-M_BWZ35z.js";import{u as ne,T as oe,b as M,C as te}from"./DefaultLayout-CeppFIGt.js";import{a as ae}from"./index.esm-BN_667ih.js";import"./cil-user-Ddrdy7PS.js";var I=o.createContext({}),V=o.forwardRef(function(s,c){var u=s.children,i=s.animation,d=i===void 0?!0:i,h=s.autohide,_=h===void 0?!0:h,j=s.className,l=s.color,v=s.delay,x=v===void 0?5e3:v,m=s.index,E=s.innerKey,g=s.visible,y=g===void 0?!1:g,r=s.onClose,t=s.onShow,a=R(s,["children","animation","autohide","className","color","delay","index","innerKey","visible","onClose","onShow"]),w=o.useRef(),G=ne(c,w),L=o.useState(!1),S=L[0],B=L[1],N=o.useRef();o.useEffect(function(){B(y)},[y]);var O={visible:S,setVisible:B};o.useEffect(function(){return function(){return clearTimeout(N.current)}},[]),o.useEffect(function(){A()},[S]);var A=function(){_&&(clearTimeout(N.current),N.current=window.setTimeout(function(){B(!1)},x))};return f.createElement(oe,{in:S,nodeRef:w,onEnter:function(){return t&&t(m??null)},onExited:function(){return r&&r(m??null)},timeout:250,unmountOnExit:!0},function(P){var C;return f.createElement(I.Provider,{value:O},f.createElement("div",p({className:H("toast",(C={fade:d},C["bg-".concat(l)]=l,C["border-0"]=l,C["show showing"]=P==="entering"||P==="exiting",C.show=P==="entered",C),j),"aria-live":"assertive","aria-atomic":"true",role:"alert",onMouseEnter:function(){return clearTimeout(N.current)},onMouseLeave:function(){return A()}},a,{key:E,ref:G}),u))})});V.propTypes={animation:n.bool,autohide:n.bool,children:n.node,className:n.string,color:W,delay:n.number,index:n.number,innerKey:n.oneOfType([n.number,n.string]),onClose:n.func,onShow:n.func,visible:n.bool};V.displayName="CToast";var k=o.forwardRef(function(s,c){var u=s.children,i=s.className,d=R(s,["children","className"]);return f.createElement("div",p({className:H("toast-body",i)},d,{ref:c}),u)});k.propTypes={children:n.node,className:n.string};k.displayName="CToastBody";var D=o.forwardRef(function(s,c){var u=s.children,i=s.as,d=R(s,["children","as"]),h=o.useContext(I).setVisible;return i?f.createElement(i,p({onClick:function(){return h(!1)}},d,{ref:c}),u):f.createElement(M,p({onClick:function(){return h(!1)}},d,{ref:c}))});D.propTypes=p(p({},M.propTypes),{as:n.elementType});D.displayName="CToastClose";var F=o.forwardRef(function(s,c){var u=s.children,i=s.className,d=s.closeButton,h=R(s,["children","className","closeButton"]);return f.createElement("div",p({className:H("toast-header",i)},h,{ref:c}),u,d&&f.createElement(D,null))});F.propTypes={children:n.node,className:n.string,closeButton:n.bool};F.displayName="CToastHeader";const ge=()=>{const[s,c]=o.useState([]),[u,i]=o.useState([]),[d,h]=o.useState(""),[_,j]=o.useState(!1),[l,v]=o.useState(null),x=10;o.useEffect(()=>{m()},[]);const m=async()=>{try{const t=(await $.get("http://localhost:8000/api/training")).data.data.filter(a=>new Date>new Date(`${a.schedule}T${a.end_time}`)).map(a=>({...a,cost_per_session:a.cost_per_session||Math.floor(Math.random()*500)+100,num_trainees:x,training_hours:a.training_hours||10}));c(t),i(t)}catch(r){console.error("Error fetching trainings:",r)}},E=r=>{const t=r.target.value.toLowerCase();h(t),i(s.filter(a=>a.training_class.toLowerCase().includes(t)||a.agenda.toLowerCase().includes(t)))},g=r=>r<200?{label:"Low Priority",color:"success"}:r>=200&&r<=400?{label:"Review",color:"warning"}:{label:"High Spend",color:"danger"},y=r=>{const t=(r.cost_per_session/x).toFixed(2),a=(r.training_hours/r.cost_per_session).toFixed(2),w=r.cost_per_session*x;v({...r,costPerTrainee:t,trainingHoursPerCost:a,totalTrainingBudget:w}),j(!0)};return e.jsx(J,{children:e.jsx(q,{xs:12,children:e.jsxs(z,{children:[e.jsx(U,{children:e.jsx("strong",{children:"Completed Training Budget Reports"})}),e.jsxs(Q,{children:[e.jsxs(X,{className:"mb-3",children:[e.jsx(Y,{children:"Search"}),e.jsx(Z,{placeholder:"Filter by Training Class or Agenda",value:d,onChange:E})]}),e.jsxs(ee,{striped:!0,hover:!0,children:[e.jsx(se,{children:e.jsxs(K,{children:[e.jsx(T,{children:"#"}),e.jsx(T,{children:"Training Class"}),e.jsx(T,{children:"Agenda"}),e.jsx(T,{children:"Recommendation"}),e.jsx(T,{children:"Actions"})]})}),e.jsx(re,{children:u.map((r,t)=>e.jsxs(K,{children:[e.jsx(b,{children:t+1}),e.jsx(b,{children:r.training_class}),e.jsx(b,{children:r.agenda}),e.jsx(b,{children:e.jsx(te,{color:g(r.cost_per_session).color,className:"ms-2",children:g(r.cost_per_session).label})}),e.jsx(b,{children:e.jsx(ae,{color:"info",onClick:()=>y(r),children:"View Details"})})]},r.id))})]}),l&&e.jsxs(V,{visible:_,onClose:()=>j(!1),autohide:!0,color:"light",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:"300px",maxWidth:"400px"},children:[e.jsxs(F,{children:[e.jsx("strong",{className:"me-auto",children:"Training Details"}),e.jsx("small",{children:"Just Now"})]}),e.jsxs(k,{children:[e.jsx("strong",{children:"Training Class:"})," ",l.training_class," ",e.jsx("br",{}),e.jsx("strong",{children:"Agenda:"})," ",l.agenda," ",e.jsx("br",{}),e.jsx("strong",{children:"Cost per Session (₱):"})," ",l.cost_per_session," ",e.jsx("br",{}),e.jsx("strong",{children:"Cost per Trainee (₱):"})," ",l.costPerTrainee," ",e.jsx("br",{}),e.jsx("strong",{children:"Training Hours:"})," ",l.training_hours," ",e.jsx("br",{}),e.jsx("strong",{children:"Training Hours per Cost:"})," ",l.trainingHoursPerCost," ",e.jsx("br",{}),e.jsx("strong",{children:"Total Training Budget (₱):"})," ",l.totalTrainingBudget.toLocaleString()," ",e.jsx("br",{}),e.jsx("strong",{children:"Number of Participants:"})," ",x," ",e.jsx("br",{})]})]})]})]})})})};export{ge as default};
