import{r as d,_ as w,R as j,a as E,c as S,P as o,j as r,q}from"./index--llg56iC.js";import{a as X,b as Y,c as Z,d as ee,e as se}from"./DefaultLayout-DACtqyMv.js";import{C as re}from"./cil-user-DSnfsitD.js";import{C as A,a as T}from"./CRow-DjQMRprf.js";import{c as K,d as B,a as R}from"./index.esm-CPSOUg3I.js";import{C as ae}from"./CFormTextarea-DBTPGfkP.js";import{C as ce,a as de}from"./CCardBody-Bl-UMN8y.js";import{C as ue}from"./CCardHeader-0m0Y28gd.js";import{_ as pe,f as me,a as fe,T as he,u as ve}from"./CCloseButton-eoC3QwgO.js";import{C as Ce,a as ge,b as ie,c as I,d as xe,e as _}from"./CTable-CD4zdADy.js";var te=d.createContext({}),k=d.forwardRef(function(e,n){var u=e.children,s=e.activeItemKey,l=e.alwaysOpen,c=l===void 0?!1:l,p=e.className,a=e.flush,t=w(e,["children","activeItemKey","alwaysOpen","className","flush"]),i=d.useState(s),f=i[0],h=i[1];return j.createElement("div",E({className:S("accordion",{"accordion-flush":a},p)},t,{ref:n}),j.createElement(te.Provider,{value:{_activeItemKey:f,alwaysOpen:c,setActiveKey:h}},u))});k.propTypes={alwaysOpen:o.bool,activeItemKey:o.oneOfType([o.number,o.string]),children:o.node,className:o.string,flush:o.bool};k.displayName="CAccordion";var z=d.createContext({}),M=d.forwardRef(function(e,n){var u=e.children,s=e.className,l=e.id,c=e.itemKey,p=w(e,["children","className","id","itemKey"]),a=l??d.useId(),t=d.useRef(c??a),i=d.useContext(te),f=i._activeItemKey,h=i.alwaysOpen,g=i.setActiveKey,x=d.useState(f===t.current),N=x[0],v=x[1];return d.useEffect(function(){!h&&N&&g(t.current)},[N]),d.useEffect(function(){v(f===t.current)},[f]),j.createElement("div",E({className:S("accordion-item",s)},p,{ref:n}),j.createElement(z.Provider,{value:{id:a,setVisible:v,visible:N}},u))});M.propTypes={children:o.node,className:o.string,itemKey:o.oneOfType([o.number,o.string])};M.displayName="CAccordionItem";function V(){return V=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var u=arguments[n];for(var s in u)({}).hasOwnProperty.call(u,s)&&(e[s]=u[s])}return e},V.apply(null,arguments)}function je(e,n){return e.classList?!!n&&e.classList.contains(n):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+n+" ")!==-1}function Ne(e,n){e.classList?e.classList.add(n):je(e,n)||(typeof e.className=="string"?e.className=e.className+" "+n:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+n))}function ne(e,n){return e.replace(new RegExp("(^|\\s)"+n+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Ee(e,n){e.classList?e.classList.remove(n):typeof e.className=="string"?e.className=ne(e.className,n):e.setAttribute("class",ne(e.className&&e.className.baseVal||"",n))}var be=function(n,u){return n&&u&&u.split(" ").forEach(function(s){return Ne(n,s)})},L=function(n,u){return n&&u&&u.split(" ").forEach(function(s){return Ee(n,s)})},W=function(e){pe(n,e);function n(){for(var s,l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];return s=e.call.apply(e,[this].concat(c))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(a,t){var i=s.resolveArguments(a,t),f=i[0],h=i[1];s.removeClasses(f,"exit"),s.addClass(f,h?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(a,t)},s.onEntering=function(a,t){var i=s.resolveArguments(a,t),f=i[0],h=i[1],g=h?"appear":"enter";s.addClass(f,g,"active"),s.props.onEntering&&s.props.onEntering(a,t)},s.onEntered=function(a,t){var i=s.resolveArguments(a,t),f=i[0],h=i[1],g=h?"appear":"enter";s.removeClasses(f,g),s.addClass(f,g,"done"),s.props.onEntered&&s.props.onEntered(a,t)},s.onExit=function(a){var t=s.resolveArguments(a),i=t[0];s.removeClasses(i,"appear"),s.removeClasses(i,"enter"),s.addClass(i,"exit","base"),s.props.onExit&&s.props.onExit(a)},s.onExiting=function(a){var t=s.resolveArguments(a),i=t[0];s.addClass(i,"exit","active"),s.props.onExiting&&s.props.onExiting(a)},s.onExited=function(a){var t=s.resolveArguments(a),i=t[0];s.removeClasses(i,"exit"),s.addClass(i,"exit","done"),s.props.onExited&&s.props.onExited(a)},s.resolveArguments=function(a,t){return s.props.nodeRef?[s.props.nodeRef.current,a]:[a,t]},s.getClassNames=function(a){var t=s.props.classNames,i=typeof t=="string",f=i&&t?t+"-":"",h=i?""+f+a:t[a],g=i?h+"-active":t[a+"Active"],x=i?h+"-done":t[a+"Done"];return{baseClassName:h,activeClassName:g,doneClassName:x}},s}var u=n.prototype;return u.addClass=function(l,c,p){var a=this.getClassNames(c)[p+"ClassName"],t=this.getClassNames("enter"),i=t.doneClassName;c==="appear"&&p==="done"&&i&&(a+=" "+i),p==="active"&&l&&me(l),a&&(this.appliedClasses[c][p]=a,be(l,a))},u.removeClasses=function(l,c){var p=this.appliedClasses[c],a=p.base,t=p.active,i=p.done;this.appliedClasses[c]={},a&&L(l,a),t&&L(l,t),i&&L(l,i)},u.render=function(){var l=this.props;l.classNames;var c=fe(l,["classNames"]);return j.createElement(he,V({},c,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(j.Component);W.defaultProps={classNames:""};W.propTypes={};var U=d.forwardRef(function(e,n){var u=e.children,s=e.className,l=e.horizontal,c=e.onHide,p=e.onShow,a=e.visible,t=w(e,["children","className","horizontal","onHide","onShow","visible"]),i=d.useRef(null),f=ve(n,i),h=d.useState(),g=h[0],x=h[1],N=d.useState(),v=N[0],b=N[1],P=function(){if(p&&p(),l){i.current&&b(i.current.scrollWidth);return}i.current&&x(i.current.scrollHeight)},F=function(){if(l){b(0);return}x(0)},D=function(){if(l){i.current&&b(i.current.scrollWidth);return}i.current&&x(i.current.scrollHeight)},H=function(){if(c&&c(),l){b(0);return}x(0)},O=function(){if(l){b(0);return}x(0)};return j.createElement(W,{in:a,nodeRef:i,onEntering:P,onEntered:F,onExit:D,onExiting:H,onExited:O,timeout:350},function(y){var C=g===0?null:{height:g},m=v===0?null:{width:v};return j.createElement("div",E({className:S(s,{"collapse-horizontal":l,collapsing:y==="entering"||y==="exiting","collapse show":y==="entered",collapse:y==="exited"}),style:E(E({},C),m)},t,{ref:f}),u)})});U.propTypes={children:o.node,className:o.string,horizontal:o.bool,onHide:o.func,onShow:o.func,visible:o.bool};U.displayName="CCollapse";var G=d.forwardRef(function(e,n){var u=e.children,s=e.className,l=w(e,["children","className"]),c=d.useContext(z),p=c.id,a=c.visible;return j.createElement(U,{className:"accordion-collapse",id:p,visible:a},j.createElement("div",E({className:S("accordion-body",s)},l,{ref:n}),u))});G.propTypes={children:o.node,className:o.string};G.displayName="CAccordionBody";var J=d.forwardRef(function(e,n){var u=e.children,s=e.className,l=w(e,["children","className"]),c=d.useContext(z),p=c.id,a=c.visible,t=c.setVisible;return j.createElement("button",E({type:"button",className:S("accordion-button",{collapsed:!a},s),"aria-controls":p,"aria-expanded":a,onClick:function(){return t(!a)}},l,{ref:n}),u)});J.propTypes={children:o.node,className:o.string};J.displayName="CAccordionButton";var Q=d.forwardRef(function(e,n){var u=e.children,s=e.className,l=w(e,["children","className"]);return j.createElement("div",E({className:S("accordion-header",s)},l,{ref:n}),j.createElement(J,null,u))});Q.propTypes={children:o.node,className:o.string};Q.displayName="CAccordionHeader";const oe=({visibleProgram:e,setVisibleProgram:n,programTitle:u,setProgramTitle:s,programDescription:l,setProgramDescription:c,handleSaveProgram:p,visibleCourse:a,setVisibleCourse:t,courseTitle:i,setCourseTitle:f,courseDescription:h,setCourseDescription:g,setCourseFile:x,handleSaveCourse:N})=>r.jsxs(r.Fragment,{children:[r.jsxs(X,{size:"lg",visible:e,onClose:()=>n(!1),children:[r.jsx(Y,{children:r.jsx(Z,{children:"Add Program"})}),r.jsx(ee,{children:r.jsxs(re,{children:[r.jsx(A,{className:"mb-3",children:r.jsxs(T,{md:12,children:[r.jsx(K,{children:"Program Title"}),r.jsx(B,{value:u,onChange:v=>s(v.target.value)})]})}),r.jsx(A,{className:"mb-3",children:r.jsxs(T,{md:12,children:[r.jsx(K,{children:"Program Description"}),r.jsx(ae,{value:l,onChange:v=>c(v.target.value)})]})})]})}),r.jsxs(se,{children:[r.jsx(R,{color:"secondary",onClick:()=>n(!1),children:"Close"}),r.jsx(R,{color:"primary",onClick:p,children:"Save Program"})]})]}),r.jsxs(X,{size:"lg",visible:a,onClose:()=>t(!1),children:[r.jsx(Y,{children:r.jsx(Z,{children:"Add Course"})}),r.jsx(ee,{children:r.jsxs(re,{children:[r.jsx(A,{className:"mb-3",children:r.jsxs(T,{md:12,children:[r.jsx(K,{children:"Course Title"}),r.jsx(B,{value:i,onChange:v=>f(v.target.value)})]})}),r.jsx(A,{className:"mb-3",children:r.jsxs(T,{md:12,children:[r.jsx(K,{children:"Course Description"}),r.jsx(ae,{value:h,onChange:v=>g(v.target.value)})]})}),r.jsx(A,{className:"mb-3",children:r.jsxs(T,{md:12,children:[r.jsx(K,{children:"Upload File"}),r.jsx(B,{type:"file",onChange:v=>x(v.target.files[0])})]})})]})}),r.jsxs(se,{children:[r.jsx(R,{color:"secondary",onClick:()=>t(!1),children:"Close"}),r.jsx(R,{color:"primary",onClick:N,children:"Save Course"})]})]})]});oe.propTypes={visibleProgram:o.bool.isRequired,setVisibleProgram:o.func.isRequired,programTitle:o.string.isRequired,setProgramTitle:o.func.isRequired,programDescription:o.string.isRequired,setProgramDescription:o.func.isRequired,handleSaveProgram:o.func.isRequired,visibleCourse:o.bool.isRequired,setVisibleCourse:o.func.isRequired,courseTitle:o.string.isRequired,setCourseTitle:o.func.isRequired,courseDescription:o.string.isRequired,setCourseDescription:o.func.isRequired,setCourseFile:o.func.isRequired,handleSaveCourse:o.func.isRequired};const Ie=()=>{const[e,n]=d.useState([]),[u,s]=d.useState([]),[l,c]=d.useState(""),[p,a]=d.useState(""),[t,i]=d.useState(""),[f,h]=d.useState(""),[g,x]=d.useState(null),[N,v]=d.useState(null),[b,P]=d.useState(!1),[F,D]=d.useState(!1);d.useEffect(()=>{(async()=>{try{const m=await q.get("/api/programs");n(m.data.data)}catch(m){console.error("Error fetching programs:",m)}})()},[]);const H=async C=>{try{const m=await q.get(`/api/courses?program_id=${C}`);s(m.data.data)}catch(m){console.error("Error fetching courses:",m)}},O=async()=>{try{const C=await q.post("/api/programs",{title:l,description:p});n(m=>[...m,C.data.data]),c(""),a(""),P(!1)}catch(C){console.error("Error adding program:",C)}},y=async C=>{C.preventDefault();const m=new FormData;m.append("title",t),m.append("description",f),m.append("program_id",N),g&&m.append("file",g);try{const $=await q.post("/api/courses",m,{headers:{"Content-Type":"multipart/form-data"}});s(le=>[...le,$.data]),D(!1),i(""),h(""),x(null)}catch($){console.error("Error saving course:",$)}};return r.jsxs(A,{children:[r.jsx(T,{xs:12,children:r.jsxs(ce,{className:"mb-4",children:[r.jsxs(ue,{children:[r.jsx("strong",{children:"List of Programs"}),r.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:r.jsx(R,{color:"primary",onClick:()=>P(!0),children:"Add Program"})})]}),r.jsx(de,{children:r.jsx(k,{alwaysOpen:!0,children:e.map(C=>r.jsxs(M,{children:[r.jsx(Q,{onClick:()=>{H(C.id)},children:C.title}),r.jsxs(G,{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Description:"})," ",C.description]}),r.jsx(R,{color:"primary",onClick:()=>{v(C.id),D(!0)},children:"Add Course"}),r.jsxs(Ce,{striped:!0,className:"mt-3",children:[r.jsx(ge,{children:r.jsxs(ie,{children:[r.jsx(I,{children:"Course Title"}),r.jsx(I,{children:"Description"}),r.jsx(I,{children:"File"}),r.jsx(I,{children:"Actions"})]})}),r.jsx(xe,{children:u.filter(m=>m.program_id===C.id).map(m=>r.jsxs(ie,{children:[r.jsx(_,{children:m.title}),r.jsx(_,{children:m.description}),r.jsx(_,{children:m.file_path?r.jsx("a",{href:m.file_path,target:"_blank",rel:"noopener noreferrer",children:m.file_name||"Download"}):r.jsx("span",{children:"No File"})}),r.jsx(_,{})]},m.id))})]})]})]},C.id))})})]})}),r.jsx(oe,{visibleProgram:b,setVisibleProgram:P,programTitle:l,setProgramTitle:c,programDescription:p,setProgramDescription:a,handleSaveProgram:O,visibleCourse:F,setVisibleCourse:D,courseTitle:t,setCourseTitle:i,courseDescription:f,setCourseDescription:h,setCourseFile:x,handleSaveCourse:y})]})};export{Ie as default};
