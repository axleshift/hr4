import{r as h,j as e,q as L,P as a}from"./index-BtC9M8xT.js";import{c as d,d as i,a as N,e as k}from"./index.esm-fifLd_RN.js";import{a as M,b as R,c as V,d as q,e as D}from"./DefaultLayout-4Tq2nP6D.js";import{C as H}from"./cil-user-DQ5_ojpi.js";import{C as P,a as B}from"./CRow-Cft7bt9h.js";import{C as A,a as I}from"./CCardBody-BpK0HP0U.js";import{C as O}from"./CCardHeader-Cl6QiI_s.js";import{C as $,a as z,b as E,c as x,d as G,e as y}from"./CTable-BdnBYRay.js";import{c as J}from"./cil-options-sHCm5Gxk.js";import"./CCloseButton-DdVIv5fH.js";const T=({modalVisible:g,setModalVisible:f,user:r,fetchUsers:b})=>{const o=c=>c||"NULL",[t,p]=h.useState({name:"NULL",email:"NULL",role:"NULL",department:"NULL",employee_type:"NULL",employment_status:"NULL",date_of_hire:"NULL",gender:"NULL",phone_number:"NULL",address:"NULL"});h.useEffect(()=>{r&&p({name:o(r.name),email:o(r.email),role:o(r.role),department:o(r.department),employee_type:o(r.employee_type),employment_status:o(r.employment_status),date_of_hire:o(r.date_of_hire),gender:o(r.gender),phone_number:o(r.phone_number),address:o(r.address)})},[r]);const l=c=>{const{name:u,value:_}=c.target;p(j=>({...j,[u]:_||"NULL"}))},n=()=>{f(!1)},C=async c=>{c.preventDefault();try{await L.put(`/api/users/${r.id}`,t),b(),n()}catch(u){console.error("Error updating user profile:",u)}};return e.jsxs(M,{visible:g,onClose:n,children:[e.jsx(R,{children:e.jsx(V,{children:"Edit Profile"})}),e.jsx(q,{children:e.jsxs(H,{onSubmit:C,children:[e.jsx(d,{htmlFor:"name",children:"Full Name"}),e.jsx(i,{id:"name",name:"name",value:t.name,onChange:l}),e.jsx(d,{htmlFor:"email",children:"Email"}),e.jsx(i,{id:"email",name:"email",value:t.email,readOnly:!0}),e.jsx(d,{htmlFor:"role",children:"Role"}),e.jsx(i,{id:"role",name:"role",value:t.role,onChange:l}),e.jsx(d,{htmlFor:"department",children:"Department"}),e.jsx(i,{id:"department",name:"department",value:t.department,onChange:l}),e.jsx(d,{htmlFor:"employee_type",children:"Employee Type"}),e.jsx(i,{id:"employee_type",name:"employee_type",value:t.employee_type,onChange:l}),e.jsx(d,{htmlFor:"employment_status",children:"Employment Status"}),e.jsx(i,{id:"employment_status",name:"employment_status",value:t.employment_status,onChange:l}),e.jsx(d,{htmlFor:"date_of_hire",children:"Date of Hire"}),e.jsx(i,{id:"date_of_hire",name:"date_of_hire",type:"date",value:t.date_of_hire,onChange:l}),e.jsx(d,{htmlFor:"gender",children:"Gender"}),e.jsx(i,{id:"gender",name:"gender",value:t.gender,onChange:l}),e.jsx(d,{htmlFor:"phone_number",children:"Phone Number"}),e.jsx(i,{id:"phone_number",name:"phone_number",value:t.phone_number,onChange:l}),e.jsx(d,{htmlFor:"address",children:"Address"}),e.jsx(i,{id:"address",name:"address",value:t.address,onChange:l})]})}),e.jsxs(D,{children:[e.jsx(N,{color:"secondary",onClick:n,children:"Close"}),e.jsx(N,{color:"primary",onClick:C,children:"Save Changes"})]})]})};T.propTypes={modalVisible:a.bool.isRequired,setModalVisible:a.func.isRequired,user:a.shape({id:a.number.isRequired,name:a.string,email:a.string,role:a.string,department:a.string,employee_type:a.string,employment_status:a.string,date_of_hire:a.string,gender:a.string,phone_number:a.string,address:a.string}).isRequired,fetchUsers:a.func.isRequired};const ne=()=>{const[g,f]=h.useState([]),[r,b]=h.useState(null),[o,t]=h.useState(!1),[p,l]=h.useState(""),[n,C]=h.useState({key:"name",direction:"asc"});h.useEffect(()=>{c()},[]);const c=async()=>{try{const s=await L.get("/api/users");f(s.data.data)}catch(s){console.error("Error fetching users:",s)}},u=async s=>{try{const m=await L.get(`/api/users/${s}`);b(m.data.data),t(!0)}catch(m){console.error("Error fetching user profile:",m)}},_=s=>{l(s.target.value.toLowerCase())},j=s=>{let m="asc";n.key===s&&n.direction==="asc"&&(m="desc"),C({key:s,direction:m})},w=[...g].sort((s,m)=>{var S,F;const U=(S=s[n.key])==null?void 0:S.toString().toLowerCase(),v=(F=m[n.key])==null?void 0:F.toString().toLowerCase();return U<v?n.direction==="asc"?-1:1:U>v?n.direction==="asc"?1:-1:0}).filter(s=>s.name.toLowerCase().includes(p)||s.email.toLowerCase().includes(p));return e.jsxs(P,{children:[e.jsx(B,{xs:12,children:e.jsxs(A,{className:"mb-4",children:[e.jsx(O,{className:"d-flex justify-content-between align-items-center",children:e.jsx("strong",{children:"Access Control"})}),e.jsxs(I,{children:[e.jsx("div",{className:"mb-3",children:e.jsx(i,{type:"text",placeholder:"Search by name or email",value:p,onChange:_})}),e.jsxs($,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[e.jsx(z,{children:e.jsxs(E,{children:[e.jsx(x,{children:"#"}),e.jsxs(x,{className:"bg-body-tertiary",onClick:()=>j("name"),style:{cursor:"pointer"},children:["Name"," ",n.key==="name"&&(n.direction==="asc"?"↑":"↓")]}),e.jsxs(x,{className:"bg-body-tertiary",onClick:()=>j("email"),style:{cursor:"pointer"},children:["Email"," ",n.key==="email"&&(n.direction==="asc"?"↑":"↓")]}),e.jsx(x,{className:"bg-body-tertiary text-center",children:"Role"}),e.jsx(x,{className:"bg-body-tertiary text-center",children:"More"})]})}),e.jsx(G,{children:w.map(s=>e.jsxs(E,{children:[e.jsx(y,{children:s.id}),e.jsx(y,{children:s.name}),e.jsx(y,{children:s.email}),e.jsx(y,{className:"text-center",children:s.role}),e.jsx(y,{className:"text-center",children:e.jsxs(N,{color:"secondary",size:"sm",onClick:()=>u(s.id),children:[e.jsx(k,{icon:J})," More"]})})]},s.id))})]})]})]})}),r&&e.jsx(T,{modalVisible:o,setModalVisible:t,user:r,fetchUsers:c})]})};export{ne as default};
