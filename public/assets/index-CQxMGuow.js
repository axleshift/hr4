import{r as d,j as e,q as j,P as r}from"./index-DdGbaW5V.js";import{c as l,d as i,a as C,e as b}from"./index.esm-D7X5MaNi.js";import{a as N,b as T,c as U,d as w,e as D}from"./DefaultLayout-DghG-dg6.js";import{C as M}from"./cil-user-D92lEvC9.js";import{C as v}from"./CFormSelect-CxUr9xHQ.js";import{C as q,a as H}from"./CRow-BgZBxYZM.js";import{C as P,a as A}from"./CCardBody-C2DKxQQM.js";import{C as k}from"./CCardHeader-BKa6MPlI.js";import{c as B}from"./cil-user-plus-9sfVD_63.js";import{C as I,a as O,b as F,c as x,d as z,e as u}from"./CTable-BVgeZFd1.js";import{c as V}from"./cil-options-sHCm5Gxk.js";import"./CCloseButton-m1ECbTZM.js";const E=({modalVisible:f,setModalVisible:c,user:s,fetchUsers:y})=>{const[g,h]=d.useState([]);d.useEffect(()=>{(async()=>{try{const m=await j.get("/api/roles");h(m.data)}catch(m){console.error("Error fetching roles:",m)}})()},[]);const[a,p]=d.useState({name:"",email:"",role:"",department:"",employee_type:"",employment_status:"",date_of_hire:"",gender:"",phone_number:"",address:""}),t=["HR","Finance","Sales","IT","Marketing","Customer Service","Operations","Training"];d.useEffect(()=>{s&&p({name:s.name||"",email:s.email||"",role:s.role||"",department:s.department||"",employee_type:s.employee_type||"",employment_status:s.employment_status||"",date_of_hire:s.date_of_hire||"",gender:s.gender||"",phone_number:s.phone_number||"",address:s.address||""})},[s]);const n=o=>{const{name:m,value:R}=o.target;p(S=>({...S,[m]:R}))},_=async o=>{o.preventDefault();try{await j.put(`/api/users/${s.id}`,a),y(),c(!1)}catch(m){console.error("Error updating user profile:",m)}};return e.jsxs(N,{visible:f,onClose:()=>c(!1),size:"lg",children:[e.jsx(T,{children:e.jsx(U,{children:"Edit Profile"})}),e.jsx(w,{children:e.jsxs(M,{onSubmit:_,children:[e.jsx(l,{htmlFor:"name",children:"Full Name"}),e.jsx(i,{id:"name",name:"name",value:a.name,onChange:n}),e.jsx(l,{htmlFor:"email",children:"Email"}),e.jsx(i,{id:"email",name:"email",value:a.email,readOnly:!0}),e.jsx(l,{htmlFor:"role",children:"Role"}),e.jsxs(v,{id:"role",name:"role",value:a.role,onChange:n,children:[e.jsx("option",{value:"",children:"Select Role"}),g.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]}),e.jsx(l,{htmlFor:"department",children:"Department"}),e.jsxs(v,{id:"department",name:"department",value:a.department,onChange:n,children:[e.jsx("option",{value:"",children:"Select Department"}),t.map(o=>e.jsx("option",{value:o,children:o},o))]}),e.jsx(l,{htmlFor:"employee_type",children:"Employee Type"}),e.jsx(i,{id:"employee_type",name:"employee_type",value:a.employee_type,onChange:n}),e.jsx(l,{htmlFor:"employment_status",children:"Employment Status"}),e.jsx(i,{id:"employment_status",name:"employment_status",value:a.employment_status,onChange:n}),e.jsx(l,{htmlFor:"date_of_hire",children:"Date of Hire"}),e.jsx(i,{id:"date_of_hire",name:"date_of_hire",type:"date",value:a.date_of_hire,onChange:n}),e.jsx(l,{htmlFor:"gender",children:"Gender"}),e.jsx(i,{id:"gender",name:"gender",value:a.gender,onChange:n}),e.jsx(l,{htmlFor:"phone_number",children:"Phone Number"}),e.jsx(i,{id:"phone_number",name:"phone_number",value:a.phone_number,onChange:n}),e.jsx(l,{htmlFor:"address",children:"Address"}),e.jsx(i,{id:"address",name:"address",value:a.address,onChange:n})]})}),e.jsxs(D,{children:[e.jsx(C,{color:"secondary",onClick:()=>c(!1),children:"Close"}),e.jsx(C,{color:"primary",onClick:_,children:"Save Changes"})]})]})};E.propTypes={modalVisible:r.bool.isRequired,setModalVisible:r.func.isRequired,user:r.shape({id:r.number.isRequired,name:r.string,email:r.string,role:r.string,department:r.string,employee_type:r.string,employment_status:r.string,date_of_hire:r.string,gender:r.string,phone_number:r.string,address:r.string}).isRequired,fetchUsers:r.func.isRequired};const re=()=>{const[f,c]=d.useState([]),[s,y]=d.useState(null),[g,h]=d.useState(!1);d.useEffect(()=>{a()},[]);const a=async()=>{try{const t=await j.get("/api/users");c(t.data.data)}catch(t){console.error("Error fetching users:",t)}},p=async t=>{try{const n=await j.get(`/api/users/${t}`);y(n.data.data),h(!0)}catch(n){console.error("Error fetching user profile:",n)}};return e.jsxs(q,{children:[e.jsx(H,{xs:12,children:e.jsxs(P,{className:"mb-4",children:[e.jsxs(k,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Access Control"}),e.jsxs(C,{color:"primary",children:[e.jsx(b,{icon:B,className:"me-2"}),"Add User"]})]}),e.jsx(A,{children:e.jsxs(I,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[e.jsx(O,{children:e.jsxs(F,{children:[e.jsx(x,{children:"Name"}),e.jsx(x,{children:"Email"}),e.jsx(x,{className:"text-center",children:"Role"}),e.jsx(x,{className:"text-center",children:"Actions"})]})}),e.jsx(z,{children:f.map(t=>e.jsxs(F,{children:[e.jsx(u,{children:t.name}),e.jsx(u,{children:t.email}),e.jsx(u,{className:"text-center",children:t.role}),e.jsx(u,{className:"text-center",children:e.jsxs(C,{color:"secondary",size:"sm",onClick:()=>p(t.id),children:[e.jsx(b,{icon:V,className:"me-1"}),"More"]})})]},t.id))})]})})]})}),s&&e.jsx(E,{modalVisible:g,setModalVisible:h,user:s,fetchUsers:a})]})};export{re as default};
