import{r as t,j as e,q as c}from"./index-CRTnaubu.js";import{R as $}from"./react-DOh6XfOk.js";import{C as z,a as u}from"./CRow-BZadPtpU.js";import{C as j,a as g}from"./CCardBody-CvEhZX08.js";import{C}from"./CCardHeader-C-ukDWz0.js";import{C as T,a as v,b as h,c as n,d as M,e as i}from"./CTable-Dx8-mqMW.js";import{a as o,c as b,d as A}from"./index.esm-BlCmWVN3.js";import{a as K,b as V,c as Y,d as G,e as J}from"./DefaultLayout-ZBGOecQ5.js";import{C as S}from"./cil-user-FNuvXb9m.js";import{C as q}from"./CFormTextarea-c6df-Lt8.js";import"./CCloseButton-ZV-Kt9uN.js";const ae=()=>{const[R,w]=t.useState([]),[N,B]=t.useState([]),[r,p]=t.useState(null),[f,D]=t.useState(null),[m,y]=t.useState({rating:"",comments:""}),[E,k]=t.useState({moduleName:"",moduleDescription:"",suggestions:""}),[H,d]=t.useState(!1);t.useEffect(()=>{const s=async()=>{try{const l=await c.get("/api/modules");w(l.data.data)}catch(l){console.error("Error fetching modules:",l)}},a=async()=>{try{const l=await c.get("api/training");B(l.data.data)}catch(l){console.error("Error fetching training schedules:",l)}};s(),a()},[]);const I=s=>{p(s)},P=s=>{D(s)},F=s=>{const{id:a,value:l}=s.target;y(x=>({...x,[a]:l}))},_=async()=>{if(r)try{await c.post(`/modules/${r.id}/feedback`,{...m,moduleId:r.id}),d(!1),alert("Feedback submitted successfully!"),p(null),y({rating:"",comments:""})}catch(s){console.error("Error submitting feedback:",s)}},L=s=>{const{id:a,value:l}=s.target;k(x=>({...x,[a]:l}))},W=async()=>{try{await c.post("/modules/request",{...E}),alert("Module request submitted successfully!"),k({moduleName:"",moduleDescription:"",suggestions:""})}catch(s){console.error("Error submitting module request:",s)}};return e.jsxs(z,{children:[e.jsx(u,{xs:12,children:e.jsxs(j,{className:"mb-4",children:[e.jsx(C,{children:e.jsx("strong",{children:"Employee Engagement - Modules"})}),e.jsx(g,{children:e.jsxs(T,{striped:!0,bordered:!0,hover:!0,children:[e.jsx(v,{children:e.jsxs(h,{children:[e.jsx(n,{children:"Module"}),e.jsx(n,{children:"Description"}),e.jsx(n,{children:"Enrollment"}),e.jsx(n,{children:"Feedback"})]})}),e.jsx(M,{children:R.map((s,a)=>e.jsxs(h,{children:[e.jsxs(i,{children:[e.jsx("img",{src:s.image?`data:image/jpeg;base64,${s.image}`:$,alt:s.title,style:{width:"50px",height:"50px",objectFit:"cover"}}),s.title]}),e.jsx(i,{children:s.description}),e.jsx(i,{children:!r||r.id!==s.id?e.jsx(o,{color:"primary",onClick:()=>I(s),children:"Enroll"}):e.jsx(o,{color:"secondary",disabled:!0,children:"Enrolled"})}),e.jsx(i,{children:e.jsx(o,{color:r&&r.id===s.id?"success":"secondary",onClick:()=>r&&r.id===s.id&&d(!0),disabled:r&&r.id!==s.id,children:"Provide Feedback"})})]},a))})]})})]})}),e.jsx(u,{xs:12,children:e.jsxs(j,{className:"mb-4",children:[e.jsx(C,{children:e.jsx("strong",{children:"Training Schedule Enrollment"})}),e.jsx(g,{children:e.jsxs(T,{striped:!0,bordered:!0,hover:!0,children:[e.jsx(v,{children:e.jsxs(h,{children:[e.jsx(n,{children:"Training Class"}),e.jsx(n,{children:"Agenda"}),e.jsx(n,{children:"Location"}),e.jsx(n,{children:"Schedule"}),e.jsx(n,{children:"Start Time"}),e.jsx(n,{children:"End Time"}),e.jsx(n,{children:"Enrollment"})]})}),e.jsx(M,{children:N.map((s,a)=>e.jsxs(h,{children:[e.jsx(i,{children:s.training_class}),e.jsx(i,{children:s.agenda}),e.jsx(i,{children:s.location}),e.jsx(i,{children:s.schedule}),e.jsx(i,{children:s.start_time}),e.jsx(i,{children:s.end_time}),e.jsx(i,{children:!f||f.id!==s.id?e.jsx(o,{color:"primary",onClick:()=>P(s),children:"Enroll"}):e.jsx(o,{color:"secondary",disabled:!0,children:"Enrolled"})})]},a))})]})})]})}),e.jsxs(K,{alignment:"center",size:"lg",visible:H,onClose:()=>d(!1),children:[e.jsx(V,{children:e.jsx(Y,{children:"Provide Feedback"})}),e.jsx(G,{children:e.jsxs(S,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(b,{htmlFor:"rating",children:"Rating (1-5)"}),e.jsx(A,{type:"number",id:"rating",value:m.rating,onChange:F,max:5,min:1,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(b,{htmlFor:"comments",children:"Comments"}),e.jsx(q,{id:"comments",rows:3,value:m.comments,onChange:F,required:!0})]})]})}),e.jsxs(J,{children:[e.jsx(o,{color:"secondary",onClick:()=>d(!1),children:"Cancel"}),e.jsx(o,{color:"primary",onClick:_,children:"Submit Feedback"})]})]}),e.jsx(u,{xs:12,children:e.jsxs(j,{className:"mb-4",children:[e.jsx(C,{children:e.jsx("strong",{children:"Request a Module or Provide Suggestions"})}),e.jsx(g,{children:e.jsxs(S,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(b,{htmlFor:"suggestions",children:"Suggestions or What You Want to Know"}),e.jsx(q,{id:"suggestions",rows:3,value:E.suggestions,onChange:L,required:!0})]}),e.jsx(o,{color:"primary",onClick:W,children:"Submit Request"})]})})]})})]})};export{ae as default};
