import{r as a,q as n,j as e}from"./index-EQ45Zhqe.js";import{C as M,a as T}from"./CRow-BN4C6_Gt.js";import{C as g,a as D}from"./CCardBody-C9Sdfomr.js";import{C as E}from"./CCardHeader-BCdDV8Wm.js";import{C as S,a as B,b as h,c as t,d as H,e as o}from"./CTable-Bk0ExHJY.js";import{a as p}from"./index.esm-CQDOk0RL.js";import{a as N,b as _,d as R,e as V}from"./DefaultLayout-BmgQeWSX.js";import"./CCloseButton-CV_qVvr4.js";import"./cil-user-p1C7t12v.js";const O=()=>{const[m,x]=a.useState([]),[l,f]=a.useState(""),[j,C]=a.useState(""),[u,b]=a.useState(""),[y,i]=a.useState(!1);a.useEffect(()=>{w()},[]);const w=async()=>{try{const s=await n.get("/api/modules");x(s.data.data)}catch(s){console.error("Error fetching modules:",s)}},v=async s=>{try{const r=await n.get(`/api/modules/${s}/preview`);f(r.data.base64),C(r.data.mime_type),b(r.data.file_name),i(!0)}catch(r){console.error("Error fetching document preview:",r)}};return e.jsxs(M,{children:[e.jsx(T,{xs:12,children:e.jsxs(g,{className:"mb-4",children:[e.jsx(E,{children:e.jsx("strong",{children:"MODULES"})}),e.jsx(D,{children:e.jsxs(S,{striped:!0,hover:!0,children:[e.jsx(B,{children:e.jsxs(h,{children:[e.jsx(t,{children:"#"}),e.jsx(t,{children:"Title"}),e.jsx(t,{children:"Description"}),e.jsx(t,{children:"Actions"})]})}),e.jsx(H,{children:m.map((s,r)=>{var c,d;return e.jsxs(h,{children:[e.jsx(t,{children:r+1}),e.jsx(o,{children:s.title}),e.jsx(o,{children:s.description}),e.jsx(o,{children:(((c=s.file_name)==null?void 0:c.endsWith(".docx"))||((d=s.file_name)==null?void 0:d.endsWith(".pdf")))&&e.jsx(p,{color:"info",onClick:()=>v(s.id),children:"View"})})]},r)})})]})})]})}),e.jsxs(N,{visible:y,onClose:()=>i(!1),size:"xl",fullscreen:!0,children:[e.jsx(_,{children:"Document Preview"}),e.jsx(R,{style:{padding:0},children:l?j==="application/pdf"?e.jsx("iframe",{src:`${l}`,style:{width:"100%",height:"90vh",border:"none"}}):e.jsx("iframe",{src:`https://view.officeapps.live.com/op/embed.aspx?src=https://hr4.axleshift.com/uploads/${u}`,style:{width:"100%",height:"90vh",border:"none"}}):e.jsx("p",{children:"No preview available."})}),e.jsx(V,{children:e.jsx(p,{color:"secondary",onClick:()=>i(!1),children:"Close"})})]})]})};export{O as default};
