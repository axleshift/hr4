import{r as a,q as n,j as e}from"./index-CBN3NsPO.js";import{C as y,a as v}from"./CRow-CYDUnoMS.js";import{C as M,a as T}from"./CCardBody-wrEJJag6.js";import{C as g}from"./CCardHeader-DB_pdnbW.js";import{C as D,a as E,b as p,c as o,d as B,e as c}from"./CTable-hRhl3TVu.js";import{a as h}from"./index.esm-CcuRlmdM.js";import{a as S,b as H,d as R,e as V}from"./DefaultLayout-DIe9kNa2.js";import"./CCloseButton-SGXnnTS-.js";import"./cil-user-CRP5HkOC.js";const F=()=>{const[m,x]=a.useState([]),[i,f]=a.useState(""),[j,C]=a.useState(""),[b,t]=a.useState(!1);a.useEffect(()=>{u()},[]);const u=async()=>{try{const s=await n.get("/api/modules");x(s.data.data)}catch(s){console.error("Error fetching modules:",s)}},w=async s=>{try{const r=await n.get(`/api/modules/${s}/preview`);f(r.data.base64),C(r.data.mime_type),t(!0)}catch(r){console.error("Error fetching document preview:",r)}};return e.jsxs(y,{children:[e.jsx(v,{xs:12,children:e.jsxs(M,{className:"mb-4",children:[e.jsx(g,{children:e.jsx("strong",{children:"MODULES"})}),e.jsx(T,{children:e.jsxs(D,{striped:!0,hover:!0,children:[e.jsx(E,{children:e.jsxs(p,{children:[e.jsx(o,{children:"#"}),e.jsx(o,{children:"Title"}),e.jsx(o,{children:"Description"}),e.jsx(o,{children:"Actions"})]})}),e.jsx(B,{children:m.map((s,r)=>{var l,d;return e.jsxs(p,{children:[e.jsx(o,{children:r+1}),e.jsx(c,{children:s.title}),e.jsx(c,{children:s.description}),e.jsx(c,{children:(((l=s.file_name)==null?void 0:l.endsWith(".docx"))||((d=s.file_name)==null?void 0:d.endsWith(".pdf")))&&e.jsx(h,{color:"info",onClick:()=>w(s.id),children:"View"})})]},r)})})]})})]})}),e.jsxs(S,{visible:b,onClose:()=>t(!1),children:[e.jsx(H,{children:"Document Preview"}),e.jsx(R,{children:i?j==="application/pdf"?e.jsx("iframe",{src:`data:application/pdf;base64,${i}`,style:{width:"100%",height:"500px",border:"none"}}):e.jsx("iframe",{src:`https://view.officeapps.live.com/op/embed.aspx?src=data:application/vnd.openxmlformats-officedocument.wordprocessingml.document;base64,${i}`,style:{width:"100%",height:"500px",border:"none"}}):e.jsx("p",{children:"No preview available."})}),e.jsx(V,{children:e.jsx(h,{color:"secondary",onClick:()=>t(!1),children:"Close"})})]})]})};export{F as default};
