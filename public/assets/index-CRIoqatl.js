import{r as d,j as e,q as f,P as r}from"./index-B9QbTpfT.js";import{c as l,d as i,a as u,e as g}from"./index.esm-DC5GxEDC.js";import{a as E,b as S,c as N,d as T,e as R}from"./DefaultLayout-C4tMoVkj.js";import{C as U}from"./cil-user-DggpskeP.js";import{C as D}from"./CFormSelect-jHiBr934.js";import{C as M,a as q}from"./CRow-gxtc-DFO.js";import{C as w,a as H}from"./CCardBody-3OB0Hfih.js";import{C as P}from"./CCardHeader-DCy3fFHe.js";import{c as A}from"./cil-user-plus-9sfVD_63.js";import{C as k,a as B,b as _,c as p,d as I,e as x}from"./CTable-CqzKo0zP.js";import{c as O}from"./cil-options-sHCm5Gxk.js";import"./CCloseButton-DkZZcsqn.js";const b=({modalVisible:j,setModalVisible:m,user:s,fetchUsers:C})=>{const[n,c]=d.useState({name:"",email:"",role:"",department:"",employee_type:"",employment_status:"",date_of_hire:"",gender:"",phone_number:"",address:""}),h=["HR","Finance","Sales","IT","Marketing","Customer Service","Operations","Training"];d.useEffect(()=>{s&&c({name:s.name||"",email:s.email||"",role:s.role||"",department:s.department||"",employee_type:s.employee_type||"",employment_status:s.employment_status||"",date_of_hire:s.date_of_hire||"",gender:s.gender||"",phone_number:s.phone_number||"",address:s.address||""})},[s]);const t=o=>{const{name:y,value:v}=o.target;c(F=>({...F,[y]:v}))},a=async o=>{o.preventDefault();try{await f.put(`/api/users/${s.id}`,n),C(),m(!1)}catch(y){console.error("Error updating user profile:",y)}};return e.jsxs(E,{visible:j,onClose:()=>m(!1),size:"lg",children:[e.jsx(S,{children:e.jsx(N,{children:"Edit Profile"})}),e.jsx(T,{children:e.jsxs(U,{onSubmit:a,children:[e.jsx(l,{htmlFor:"name",children:"Full Name"}),e.jsx(i,{id:"name",name:"name",value:n.name,onChange:t}),e.jsx(l,{htmlFor:"email",children:"Email"}),e.jsx(i,{id:"email",name:"email",value:n.email,readOnly:!0}),e.jsx(l,{htmlFor:"role",children:"Role"}),e.jsx(i,{id:"role",name:"role",value:n.role,onChange:t}),e.jsx(l,{htmlFor:"department",children:"Department"}),e.jsxs(D,{id:"department",name:"department",value:n.department,onChange:t,children:[e.jsx("option",{value:"",children:"Select Department"}),h.map(o=>e.jsx("option",{value:o,children:o},o))]}),e.jsx(l,{htmlFor:"employee_type",children:"Employee Type"}),e.jsx(i,{id:"employee_type",name:"employee_type",value:n.employee_type,onChange:t}),e.jsx(l,{htmlFor:"employment_status",children:"Employment Status"}),e.jsx(i,{id:"employment_status",name:"employment_status",value:n.employment_status,onChange:t}),e.jsx(l,{htmlFor:"date_of_hire",children:"Date of Hire"}),e.jsx(i,{id:"date_of_hire",name:"date_of_hire",type:"date",value:n.date_of_hire,onChange:t}),e.jsx(l,{htmlFor:"gender",children:"Gender"}),e.jsx(i,{id:"gender",name:"gender",value:n.gender,onChange:t}),e.jsx(l,{htmlFor:"phone_number",children:"Phone Number"}),e.jsx(i,{id:"phone_number",name:"phone_number",value:n.phone_number,onChange:t}),e.jsx(l,{htmlFor:"address",children:"Address"}),e.jsx(i,{id:"address",name:"address",value:n.address,onChange:t})]})}),e.jsxs(R,{children:[e.jsx(u,{color:"secondary",onClick:()=>m(!1),children:"Close"}),e.jsx(u,{color:"primary",onClick:a,children:"Save Changes"})]})]})};b.propTypes={modalVisible:r.bool.isRequired,setModalVisible:r.func.isRequired,user:r.shape({id:r.number.isRequired,name:r.string,email:r.string,role:r.string,department:r.string,employee_type:r.string,employment_status:r.string,date_of_hire:r.string,gender:r.string,phone_number:r.string,address:r.string}).isRequired,fetchUsers:r.func.isRequired};const ee=()=>{const[j,m]=d.useState([]),[s,C]=d.useState(null),[n,c]=d.useState(!1);d.useEffect(()=>{h()},[]);const h=async()=>{try{const a=await f.get("/api/users");m(a.data.data)}catch(a){console.error("Error fetching users:",a)}},t=async a=>{try{const o=await f.get(`/api/users/${a}`);C(o.data.data),c(!0)}catch(o){console.error("Error fetching user profile:",o)}};return e.jsxs(M,{children:[e.jsx(q,{xs:12,children:e.jsxs(w,{className:"mb-4",children:[e.jsxs(P,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Access Control"}),e.jsxs(u,{color:"primary",children:[e.jsx(g,{icon:A,className:"me-2"}),"Add User"]})]}),e.jsx(H,{children:e.jsxs(k,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[e.jsx(B,{children:e.jsxs(_,{children:[e.jsx(p,{children:"Name"}),e.jsx(p,{children:"Email"}),e.jsx(p,{className:"text-center",children:"Role"}),e.jsx(p,{className:"text-center",children:"Actions"})]})}),e.jsx(I,{children:j.map(a=>e.jsxs(_,{children:[e.jsx(x,{children:a.name}),e.jsx(x,{children:a.email}),e.jsx(x,{className:"text-center",children:a.role}),e.jsx(x,{className:"text-center",children:e.jsxs(u,{color:"secondary",size:"sm",onClick:()=>t(a.id),children:[e.jsx(g,{icon:O,className:"me-1"}),"More"]})})]},a.id))})]})})]})}),s&&e.jsx(b,{modalVisible:n,setModalVisible:c,user:s,fetchUsers:h})]})};export{ee as default};
