import{r as l,x as j,i as u,j as e}from"./index-TMA-7Ptt.js";import{C as v,a as S}from"./CRow-BIrn9JH0.js";import{a as T,b as $,d as k,e as B}from"./DefaultLayout-CKTp8KZ-.js";import{a as C}from"./index.esm-DgUlWbM4.js";import{C as D,a as R}from"./CCardBody-goKmrJRE.js";import{C as A}from"./CCardHeader-B8EQFUpz.js";import{C as F,a as P,b as f,c as t,d as I,e as n}from"./CTable-ZpFQkSZj.js";import"./CCloseButton-Bmn43ASU.js";import"./cil-user-C1FW2OcE.js";const U=()=>{const[g,c]=l.useState([]),[b,y]=l.useState([]),[E,d]=l.useState(!1),[o,h]=l.useState(null);l.useEffect(()=>{m(),N()},[]);const m=async()=>{try{const s=await j.get("https://backend-hr1.axleshift.com/api/employees");c(s.data.data||s.data)}catch(s){console.error("Error fetching external employees:",s);try{const r=await u.get("/api/employee");c(r.data.data)}catch(r){console.error("Error fetching local employees:",r)}}},N=async()=>{try{const s=await j.get("https://backend-hr1.axleshift.com/api/newhires");y(s.data.data||s.data)}catch(s){console.error("Error fetching new hires:",s)}},i=s=>{const r=s.middleName?` ${s.middleName}`:"";return`${s.firstName}${r} ${s.lastName}`},w=async(s,r)=>{try{await u.put(`/api/employee-status/${s}`,{status:r}),m()}catch(a){console.error(`Error updating status for ${s}:`,a)}},x=(s,r)=>e.jsxs(D,{className:"mb-4",children:[e.jsx(A,{className:"d-flex justify-content-between align-items-center",children:e.jsx("strong",{children:r})}),e.jsx(R,{children:e.jsxs(F,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[e.jsx(P,{children:e.jsxs(f,{children:[e.jsx(t,{children:"Employee ID"}),e.jsx(t,{children:"Name"}),e.jsx(t,{children:"Position"}),e.jsx(t,{children:"Department"}),e.jsx(t,{children:"Date Hired"}),e.jsx(t,{children:"Email"}),e.jsx(t,{className:"text-center",children:"Status"}),e.jsx(t,{className:"text-center",children:"Actions"})]})}),e.jsx(I,{children:s.map(a=>e.jsxs(f,{children:[e.jsx(n,{children:a.employeeId}),e.jsx(n,{children:i(a)}),e.jsx(n,{children:a.position}),e.jsx(n,{children:a.department}),e.jsx(n,{children:a.dateHired}),e.jsx(n,{children:a.email}),e.jsx(n,{className:"text-center",children:e.jsxs("select",{className:"form-select",value:a.status||"pending",onChange:M=>w(a.employeeId,M.target.value),children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"ongoing",children:"Ongoing"}),e.jsx("option",{value:"passed",children:"Passed"}),e.jsx("option",{value:"failed",children:"Failed"})]})}),e.jsx(n,{className:"text-center",children:e.jsx("button",{className:"btn btn-primary",onClick:()=>H(a),children:"Action"})})]},a.id))})]})})]}),H=s=>{h(s),d(!0)},p=()=>{d(!1),h(null)};return e.jsxs(v,{children:[e.jsxs(S,{xs:12,children:[x(g,"Employee Management"),x(b,"New Hires")]}),o&&e.jsxs(T,{visible:E,onClose:p,children:[e.jsxs($,{children:[e.jsx("strong",{children:i(o)})," "]}),e.jsx(k,{children:e.jsxs("p",{children:["More details about ",i(o)]})}),e.jsxs(B,{children:[e.jsx(C,{color:"secondary",onClick:p,children:"Close"}),e.jsx(C,{color:"primary",children:"Confirm Action"})]})]})]})};export{U as default};
