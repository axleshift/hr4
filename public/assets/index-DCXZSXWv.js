import{a as i,j as e}from"./index-D0ykVIBh.js";import{a as c}from"./index-t--hEgTQ.js";import{R as $}from"./react-DOh6XfOk.js";import{C as z,a as u}from"./CRow-C7kEkgmS.js";import{C as j,a as g}from"./CCardBody-Bvtd8o25.js";import{C}from"./CCardHeader-DzCRFb7L.js";import{C as T,a as v,b as h,c as t,d as M,e as n}from"./CTable-fJWtcUeL.js";import{a}from"./index.esm-CEZIJNA6.js";import{C as A,a as K,b as V,c as Y}from"./CModalHeader-DDtLaalK.js";import{C as G}from"./CModalTitle-CxTbZa01.js";import{C as S}from"./CForm-Vi-ufwid.js";import{a as p,C as J}from"./CFormInput-BEWTXsMD.js";import{C as q}from"./CFormTextarea-DNBO9X0f.js";import"./DefaultLayout-CimxNCuU.js";import"./cil-user-Ddrdy7PS.js";const ce=()=>{const[R,w]=i.useState([]),[N,B]=i.useState([]),[r,b]=i.useState(null),[f,D]=i.useState(null),[m,y]=i.useState({rating:"",comments:""}),[E,k]=i.useState({moduleName:"",moduleDescription:"",suggestions:""}),[H,d]=i.useState(!1);i.useEffect(()=>{const s=async()=>{try{const l=await c.get("http://localhost:8000/api/modules");w(l.data.data)}catch(l){console.error("Error fetching modules:",l)}},o=async()=>{try{const l=await c.get("http://localhost:8000/api/training");B(l.data.data)}catch(l){console.error("Error fetching training schedules:",l)}};s(),o()},[]);const I=s=>{b(s)},P=s=>{D(s)},F=s=>{const{id:o,value:l}=s.target;y(x=>({...x,[o]:l}))},_=async()=>{if(r)try{await c.post(`http://localhost:8000/api/modules/${r.id}/feedback`,{...m,moduleId:r.id}),d(!1),alert("Feedback submitted successfully!"),b(null),y({rating:"",comments:""})}catch(s){console.error("Error submitting feedback:",s)}},L=s=>{const{id:o,value:l}=s.target;k(x=>({...x,[o]:l}))},W=async()=>{try{await c.post("http://localhost:8000/api/modules/request",{...E}),alert("Module request submitted successfully!"),k({moduleName:"",moduleDescription:"",suggestions:""})}catch(s){console.error("Error submitting module request:",s)}};return e.jsxs(z,{children:[e.jsx(u,{xs:12,children:e.jsxs(j,{className:"mb-4",children:[e.jsx(C,{children:e.jsx("strong",{children:"Employee Engagement - Modules"})}),e.jsx(g,{children:e.jsxs(T,{striped:!0,bordered:!0,hover:!0,children:[e.jsx(v,{children:e.jsxs(h,{children:[e.jsx(t,{children:"Module"}),e.jsx(t,{children:"Description"}),e.jsx(t,{children:"Enrollment"}),e.jsx(t,{children:"Feedback"})]})}),e.jsx(M,{children:R.map((s,o)=>e.jsxs(h,{children:[e.jsxs(n,{children:[e.jsx("img",{src:s.image?`data:image/jpeg;base64,${s.image}`:$,alt:s.title,style:{width:"50px",height:"50px",objectFit:"cover"}}),s.title]}),e.jsx(n,{children:s.description}),e.jsx(n,{children:!r||r.id!==s.id?e.jsx(a,{color:"primary",onClick:()=>I(s),children:"Enroll"}):e.jsx(a,{color:"secondary",disabled:!0,children:"Enrolled"})}),e.jsx(n,{children:e.jsx(a,{color:r&&r.id===s.id?"success":"secondary",onClick:()=>r&&r.id===s.id&&d(!0),disabled:r&&r.id!==s.id,children:"Provide Feedback"})})]},o))})]})})]})}),e.jsx(u,{xs:12,children:e.jsxs(j,{className:"mb-4",children:[e.jsx(C,{children:e.jsx("strong",{children:"Training Schedule Enrollment"})}),e.jsx(g,{children:e.jsxs(T,{striped:!0,bordered:!0,hover:!0,children:[e.jsx(v,{children:e.jsxs(h,{children:[e.jsx(t,{children:"Training Class"}),e.jsx(t,{children:"Agenda"}),e.jsx(t,{children:"Location"}),e.jsx(t,{children:"Schedule"}),e.jsx(t,{children:"Start Time"}),e.jsx(t,{children:"End Time"}),e.jsx(t,{children:"Enrollment"})]})}),e.jsx(M,{children:N.map((s,o)=>e.jsxs(h,{children:[e.jsx(n,{children:s.training_class}),e.jsx(n,{children:s.agenda}),e.jsx(n,{children:s.location}),e.jsx(n,{children:s.schedule}),e.jsx(n,{children:s.start_time}),e.jsx(n,{children:s.end_time}),e.jsx(n,{children:!f||f.id!==s.id?e.jsx(a,{color:"primary",onClick:()=>P(s),children:"Enroll"}):e.jsx(a,{color:"secondary",disabled:!0,children:"Enrolled"})})]},o))})]})})]})}),e.jsxs(A,{alignment:"center",size:"lg",visible:H,onClose:()=>d(!1),children:[e.jsx(K,{children:e.jsx(G,{children:"Provide Feedback"})}),e.jsx(V,{children:e.jsxs(S,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(p,{htmlFor:"rating",children:"Rating (1-5)"}),e.jsx(J,{type:"number",id:"rating",value:m.rating,onChange:F,max:5,min:1,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(p,{htmlFor:"comments",children:"Comments"}),e.jsx(q,{id:"comments",rows:3,value:m.comments,onChange:F,required:!0})]})]})}),e.jsxs(Y,{children:[e.jsx(a,{color:"secondary",onClick:()=>d(!1),children:"Cancel"}),e.jsx(a,{color:"primary",onClick:_,children:"Submit Feedback"})]})]}),e.jsx(u,{xs:12,children:e.jsxs(j,{className:"mb-4",children:[e.jsx(C,{children:e.jsx("strong",{children:"Request a Module or Provide Suggestions"})}),e.jsx(g,{children:e.jsxs(S,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(p,{htmlFor:"suggestions",children:"Suggestions or What You Want to Know"}),e.jsx(q,{id:"suggestions",rows:3,value:E.suggestions,onChange:L,required:!0})]}),e.jsx(a,{color:"primary",onClick:W,children:"Submit Request"})]})})]})})]})};export{ce as default};
