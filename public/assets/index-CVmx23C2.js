import{r as c,_ as D,R as g,a as A,c as I,P as m,j as e,q as H}from"./index-UZyNn6QG.js";import{C as b,a as y}from"./CRow-4YcakBs0.js";import{C as pe,a as he}from"./CCardBody-BMksS1tt.js";import{C as me}from"./CCardHeader-CDQSFULM.js";import{a as N,c as S,d as k}from"./index.esm-BUzG2lc_.js";import{_ as fe,f as ve,a as Ce,T as xe,u as ge}from"./CCloseButton-DEVWpDY-.js";import{C as je,a as Ne,b as V,c as O,d as Ee,e as _}from"./CTable-i3RoKXsl.js";import{a as z,b as W,c as q,d as U,e as G}from"./DefaultLayout-DzJQEfNK.js";import{C as J}from"./cil-user-CrUQDcI8.js";import{C as Q}from"./CFormTextarea-C8uKUd7Y.js";var le=c.createContext({}),Z=c.forwardRef(function(s,i){var u=s.children,r=s.activeItemKey,o=s.alwaysOpen,d=o===void 0?!1:o,p=s.className,a=s.flush,t=D(s,["children","activeItemKey","alwaysOpen","className","flush"]),n=c.useState(r),f=n[0],v=n[1];return g.createElement("div",A({className:I("accordion",{"accordion-flush":a},p)},t,{ref:i}),g.createElement(le.Provider,{value:{_activeItemKey:f,alwaysOpen:d,setActiveKey:v}},u))});Z.propTypes={alwaysOpen:m.bool,activeItemKey:m.oneOfType([m.number,m.string]),children:m.node,className:m.string,flush:m.bool};Z.displayName="CAccordion";var ee=c.createContext({}),se=c.forwardRef(function(s,i){var u=s.children,r=s.className,o=s.id,d=s.itemKey,p=D(s,["children","className","id","itemKey"]),a=o??c.useId(),t=c.useRef(d??a),n=c.useContext(le),f=n._activeItemKey,v=n.alwaysOpen,C=n.setActiveKey,x=c.useState(f===t.current),j=x[0],E=x[1];return c.useEffect(function(){!v&&j&&C(t.current)},[j]),c.useEffect(function(){E(f===t.current)},[f]),g.createElement("div",A({className:I("accordion-item",r)},p,{ref:i}),g.createElement(ee.Provider,{value:{id:a,setVisible:E,visible:j}},u))});se.propTypes={children:m.node,className:m.string,itemKey:m.oneOfType([m.number,m.string])};se.displayName="CAccordionItem";function Y(){return Y=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var u=arguments[i];for(var r in u)({}).hasOwnProperty.call(u,r)&&(s[r]=u[r])}return s},Y.apply(null,arguments)}function be(s,i){return s.classList?!!i&&s.classList.contains(i):(" "+(s.className.baseVal||s.className)+" ").indexOf(" "+i+" ")!==-1}function ye(s,i){s.classList?s.classList.add(i):be(s,i)||(typeof s.className=="string"?s.className=s.className+" "+i:s.setAttribute("class",(s.className&&s.className.baseVal||"")+" "+i))}function oe(s,i){return s.replace(new RegExp("(^|\\s)"+i+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Ae(s,i){s.classList?s.classList.remove(i):typeof s.className=="string"?s.className=oe(s.className,i):s.setAttribute("class",oe(s.className&&s.className.baseVal||"",i))}var we=function(i,u){return i&&u&&u.split(" ").forEach(function(r){return ye(i,r)})},X=function(i,u){return i&&u&&u.split(" ").forEach(function(r){return Ae(i,r)})},re=function(s){fe(i,s);function i(){for(var r,o=arguments.length,d=new Array(o),p=0;p<o;p++)d[p]=arguments[p];return r=s.call.apply(s,[this].concat(d))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(a,t){var n=r.resolveArguments(a,t),f=n[0],v=n[1];r.removeClasses(f,"exit"),r.addClass(f,v?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(a,t)},r.onEntering=function(a,t){var n=r.resolveArguments(a,t),f=n[0],v=n[1],C=v?"appear":"enter";r.addClass(f,C,"active"),r.props.onEntering&&r.props.onEntering(a,t)},r.onEntered=function(a,t){var n=r.resolveArguments(a,t),f=n[0],v=n[1],C=v?"appear":"enter";r.removeClasses(f,C),r.addClass(f,C,"done"),r.props.onEntered&&r.props.onEntered(a,t)},r.onExit=function(a){var t=r.resolveArguments(a),n=t[0];r.removeClasses(n,"appear"),r.removeClasses(n,"enter"),r.addClass(n,"exit","base"),r.props.onExit&&r.props.onExit(a)},r.onExiting=function(a){var t=r.resolveArguments(a),n=t[0];r.addClass(n,"exit","active"),r.props.onExiting&&r.props.onExiting(a)},r.onExited=function(a){var t=r.resolveArguments(a),n=t[0];r.removeClasses(n,"exit"),r.addClass(n,"exit","done"),r.props.onExited&&r.props.onExited(a)},r.resolveArguments=function(a,t){return r.props.nodeRef?[r.props.nodeRef.current,a]:[a,t]},r.getClassNames=function(a){var t=r.props.classNames,n=typeof t=="string",f=n&&t?t+"-":"",v=n?""+f+a:t[a],C=n?v+"-active":t[a+"Active"],x=n?v+"-done":t[a+"Done"];return{baseClassName:v,activeClassName:C,doneClassName:x}},r}var u=i.prototype;return u.addClass=function(o,d,p){var a=this.getClassNames(d)[p+"ClassName"],t=this.getClassNames("enter"),n=t.doneClassName;d==="appear"&&p==="done"&&n&&(a+=" "+n),p==="active"&&o&&ve(o),a&&(this.appliedClasses[d][p]=a,we(o,a))},u.removeClasses=function(o,d){var p=this.appliedClasses[d],a=p.base,t=p.active,n=p.done;this.appliedClasses[d]={},a&&X(o,a),t&&X(o,t),n&&X(o,n)},u.render=function(){var o=this.props;o.classNames;var d=Ce(o,["classNames"]);return g.createElement(xe,Y({},d,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},i}(g.Component);re.defaultProps={classNames:""};re.propTypes={};var ae=c.forwardRef(function(s,i){var u=s.children,r=s.className,o=s.horizontal,d=s.onHide,p=s.onShow,a=s.visible,t=D(s,["children","className","horizontal","onHide","onShow","visible"]),n=c.useRef(null),f=ge(i,n),v=c.useState(),C=v[0],x=v[1],j=c.useState(),E=j[0],w=j[1],T=function(){if(p&&p(),o){n.current&&w(n.current.scrollWidth);return}n.current&&x(n.current.scrollHeight)},B=function(){if(o){w(0);return}x(0)},P=function(){if(o){n.current&&w(n.current.scrollWidth);return}n.current&&x(n.current.scrollHeight)},F=function(){if(d&&d(),o){w(0);return}x(0)},M=function(){if(o){w(0);return}x(0)};return g.createElement(re,{in:a,nodeRef:n,onEntering:T,onEntered:B,onExit:P,onExiting:F,onExited:M,timeout:350},function(R){var L=C===0?null:{height:C},$=E===0?null:{width:E};return g.createElement("div",A({className:I(r,{"collapse-horizontal":o,collapsing:R==="entering"||R==="exiting","collapse show":R==="entered",collapse:R==="exited"}),style:A(A({},L),$)},t,{ref:f}),u)})});ae.propTypes={children:m.node,className:m.string,horizontal:m.bool,onHide:m.func,onShow:m.func,visible:m.bool};ae.displayName="CCollapse";var ne=c.forwardRef(function(s,i){var u=s.children,r=s.className,o=D(s,["children","className"]),d=c.useContext(ee),p=d.id,a=d.visible;return g.createElement(ae,{className:"accordion-collapse",id:p,visible:a},g.createElement("div",A({className:I("accordion-body",r)},o,{ref:i}),u))});ne.propTypes={children:m.node,className:m.string};ne.displayName="CAccordionBody";var ie=c.forwardRef(function(s,i){var u=s.children,r=s.className,o=D(s,["children","className"]),d=c.useContext(ee),p=d.id,a=d.visible,t=d.setVisible;return g.createElement("button",A({type:"button",className:I("accordion-button",{collapsed:!a},r),"aria-controls":p,"aria-expanded":a,onClick:function(){return t(!a)}},o,{ref:i}),u)});ie.propTypes={children:m.node,className:m.string};ie.displayName="CAccordionButton";var te=c.forwardRef(function(s,i){var u=s.children,r=s.className,o=D(s,["children","className"]);return g.createElement("div",A({className:I("accordion-header",r)},o,{ref:i}),g.createElement(ie,null,u))});te.propTypes={children:m.node,className:m.string};te.displayName="CAccordionHeader";const _e=()=>{const[s,i]=c.useState([]),[u,r]=c.useState([]),[o,d]=c.useState(""),[p,a]=c.useState(""),[t,n]=c.useState(""),[f,v]=c.useState(""),[C,x]=c.useState({title:"",description:"",file:null}),[j,E]=c.useState(null),[w,T]=c.useState(!1),[B,P]=c.useState(!1),[F,M]=c.useState(!1);c.useEffect(()=>{(async()=>{try{const h=await H.get("/api/programs");i(h.data.data)}catch(h){console.error("Error fetching programs:",h)}})()},[]),c.useEffect(()=>{(async()=>{try{const h=await H.get("/api/courses");r(h.data.data)}catch(h){console.error("Error fetching courses:",h)}})()},[]);const R=async()=>{try{const l=await H.post("/api/programs",{title:o,description:p});i(h=>[...h,l.data.data]),d(""),a(""),T(!1)}catch(l){console.error("Error adding program:",l)}},L=async()=>{try{const l=await H.post("/api/courses",{title:t,description:f,program_id:j});r([...u,l.data]),P(!1)}catch(l){console.error("Error saving course:",l)}},$=l=>{const{id:h,value:K}=l.target;x(ue=>({...ue,[h]:K}))},ce=l=>{x(h=>({...h,file:l.target.files[0]}))},de=async()=>{var h;const l=new FormData;l.append("title",C.title),l.append("description",C.description),l.append("course_id",j),C.file&&l.append("file",C.file);try{await H.post("/api/modules",l,{headers:{"Content-Type":"multipart/form-data"}}),x({title:"",description:"",file:null}),M(!1)}catch(K){console.error("Error uploading module:",((h=K.response)==null?void 0:h.data)||K.message)}};return e.jsxs(b,{children:[e.jsx(y,{xs:12,children:e.jsxs(pe,{className:"mb-4",children:[e.jsxs(me,{children:[e.jsx("strong",{children:"List of Programs"}),e.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:e.jsx(N,{color:"primary",onClick:()=>T(!0),children:"Add Program"})})]}),e.jsx(he,{children:e.jsx(Z,{alwaysOpen:!0,children:s.map(l=>e.jsxs(se,{children:[e.jsx(te,{onClick:()=>{E(l.id)},children:l.title}),e.jsxs(ne,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",l.description]}),e.jsx(N,{color:"primary",onClick:()=>{E(l.id),P(!0)},children:"Add Course"}),e.jsxs(je,{striped:!0,className:"mt-3",children:[e.jsx(Ne,{children:e.jsxs(V,{children:[e.jsx(O,{children:"Title"}),e.jsx(O,{children:"Description"}),e.jsx(O,{children:"Module"}),e.jsx(O,{children:"Actions"})]})}),e.jsx(Ee,{children:modules.length>0?modules.map((h,K)=>e.jsxs(V,{children:[e.jsx(O,{children:K+1}),e.jsx(_,{children:h.title}),e.jsx(_,{children:h.description}),e.jsx(_,{children:h.file_url?e.jsx("a",{href:h.file_url,target:"_blank",rel:"noopener noreferrer",children:h.file_name||"Download"}):e.jsx("span",{children:"No File"})}),e.jsx(_,{children:e.jsx(N,{color:"danger",size:"sm",onClick:()=>handleDelete(h.id),children:"Delete"})})]},h.id)):e.jsx(V,{children:e.jsx(_,{colSpan:5,className:"text-center",children:"No modules available."})})})]})]})]},l.id))})})]})}),e.jsxs(z,{size:"xl",visible:w,onClose:()=>T(!1),children:[e.jsx(W,{children:e.jsx(q,{children:"Add Program"})}),e.jsx(U,{children:e.jsxs(J,{children:[e.jsx(b,{className:"mb-3",children:e.jsxs(y,{md:12,children:[e.jsx(S,{children:"Program Title"}),e.jsx(k,{value:o,onChange:l=>d(l.target.value)})]})}),e.jsx(b,{className:"mb-3",children:e.jsxs(y,{md:12,children:[e.jsx(S,{children:"Program Description"}),e.jsx(Q,{value:p,onChange:l=>a(l.target.value)})]})})]})}),e.jsxs(G,{children:[e.jsx(N,{color:"secondary",onClick:()=>T(!1),children:"Close"}),e.jsx(N,{color:"primary",onClick:R,children:"Save Program"})]})]}),e.jsxs(z,{size:"xl",visible:B,onClose:()=>P(!1),children:[e.jsx(W,{children:e.jsx(q,{children:"Add Course"})}),e.jsx(U,{children:e.jsxs(J,{children:[e.jsx(b,{className:"mb-3",children:e.jsxs(y,{md:12,children:[e.jsx(S,{children:"Course Title"}),e.jsx(k,{value:t,onChange:l=>n(l.target.value)})]})}),e.jsx(b,{className:"mb-3",children:e.jsxs(y,{md:12,children:[e.jsx(S,{children:"Course Description"}),e.jsx(Q,{value:f,onChange:l=>v(l.target.value)})]})})]})}),e.jsxs(G,{children:[e.jsx(N,{color:"secondary",onClick:()=>P(!1),children:"Close"}),e.jsx(N,{color:"primary",onClick:L,children:"Save Course"})]})]}),e.jsxs(z,{size:"xl",visible:F,onClose:()=>M(!1),children:[e.jsx(W,{children:e.jsx(q,{children:"Add Module"})}),e.jsx(U,{children:e.jsxs(J,{children:[e.jsx(b,{className:"mb-3",children:e.jsxs(y,{md:12,children:[e.jsx(S,{children:"Module Title"}),e.jsx(k,{id:"title",value:C.title,onChange:$})]})}),e.jsx(b,{className:"mb-3",children:e.jsxs(y,{md:12,children:[e.jsx(S,{children:"Module Description"}),e.jsx(Q,{id:"description",value:C.description,onChange:$})]})}),e.jsx(b,{className:"mb-3",children:e.jsxs(y,{md:12,children:[e.jsx(S,{children:"Upload File"}),e.jsx(k,{type:"file",onChange:ce})]})})]})}),e.jsxs(G,{children:[e.jsx(N,{color:"secondary",onClick:()=>M(!1),children:"Close"}),e.jsx(N,{color:"primary",onClick:de,children:"Save Module"})]})]})]})};export{_e as default};
