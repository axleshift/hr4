import{r as o,x as j,i as C,j as e}from"./index-rlOt-ibk.js";import{C as T,a as B}from"./CRow-BmPSp4be.js";import{a as $,b as k,c as D,d as P,e as R,f as F}from"./DefaultLayout-P8jHfjn3.js";import{a as i}from"./index.esm-CfE61z2s.js";import{C as I,a as V}from"./CCardBody-iVXpIfxB.js";import{C as z}from"./CCardHeader-CUwmqhNP.js";import{C as A,a as L,b as g,c as r,d as O,e as n}from"./CTable-D848Imms.js";import"./CCloseButton-BCCQnC2N.js";import"./cil-user-vOfyXNQI.js";const Z=()=>{const[f,d]=o.useState([]),[w,E]=o.useState([]),[b,l]=o.useState(!1),[c,N]=o.useState(null),[h,m]=o.useState("");o.useEffect(()=>{x(),y()},[]);const x=async()=>{try{const s=await j.get("https://backend-hr1.axleshift.com/api/employees");d(s.data.data||s.data)}catch(s){console.error("Error fetching external employees:",s);try{const t=await C.get("/api/employee");d(t.data.data)}catch(t){console.error("Error fetching local employees:",t)}}},y=async()=>{try{const s=await j.get("https://backend-hr1.axleshift.com/api/newhires");E(s.data.data||s.data)}catch(s){console.error("Error fetching new hires:",s)}},u=s=>{const t=s.middleName?` ${s.middleName}`:"";return`${s.firstName}${t} ${s.lastName}`},S=async(s,t)=>{try{await C.put(`/api/employee-status/${s}`,{status:t}),x(),l(!1)}catch(a){console.error(`Error updating status for ${s}:`,a)}},v=s=>{N(s),m(s.status||"pending"),l(!0)},H=()=>{c&&S(c.employeeId,h)},p=(s,t)=>e.jsxs(I,{className:"mb-4",children:[e.jsx(z,{className:"d-flex justify-content-between align-items-center",children:e.jsx("strong",{children:t})}),e.jsx(V,{children:e.jsxs(A,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[e.jsx(L,{children:e.jsxs(g,{children:[e.jsx(r,{children:"Employee ID"}),e.jsx(r,{children:"Name"}),e.jsx(r,{children:"Position"}),e.jsx(r,{children:"Department"}),e.jsx(r,{children:"Date Hired"}),e.jsx(r,{children:"Email"}),e.jsx(r,{className:"text-center",children:"Status"})]})}),e.jsx(O,{children:s.map(a=>e.jsxs(g,{children:[e.jsx(n,{children:a.employeeId}),e.jsx(n,{children:u(a)}),e.jsx(n,{children:a.position}),e.jsx(n,{children:a.department}),e.jsx(n,{children:a.dateHired}),e.jsx(n,{children:a.email}),e.jsxs(n,{className:"text-center",children:[e.jsx(F,{color:M(a.status),children:a.status?a.status.charAt(0).toUpperCase()+a.status.slice(1):"Pending"}),e.jsx(i,{color:"primary",onClick:()=>v(a),className:"ms-2",children:"Change Status"})]})]},a.id))})]})})]}),M=s=>{switch((s||"").toLowerCase()){case"passed":return"success";case"ongoing":return"warning";case"failed":return"danger";case"pending":default:return"secondary"}};return e.jsxs(T,{children:[e.jsxs(B,{xs:12,children:[p(f,"Employee Management"),p(w,"New Hires")]}),e.jsxs($,{show:b,onClose:()=>l(!1),size:"lg",children:[e.jsx(k,{closeButton:!0,children:e.jsxs(D,{children:["Change Status for ",c&&u(c)]})}),e.jsx(P,{children:e.jsxs("select",{className:"form-select",value:h,onChange:s=>m(s.target.value),children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"ongoing",children:"Ongoing"}),e.jsx("option",{value:"passed",children:"Passed"}),e.jsx("option",{value:"failed",children:"Failed"})]})}),e.jsxs(R,{children:[e.jsx(i,{color:"secondary",onClick:()=>l(!1),children:"Cancel"}),e.jsx(i,{color:"primary",onClick:H,children:"Save Changes"})]})]})]})};export{Z as default};
